!function t(i,n,e){function o(s,h){if(!n[s]){if(!i[s]){var u="function"==typeof require&&require;if(!h&&u)return u(s,!0);if(r)return r(s,!0);var a=new Error("Cannot find module '"+s+"'");throw a.code="MODULE_NOT_FOUND",a}var c=n[s]={t:{}};i[s][0].call(c.t,function(t){var n=i[s][1][t];return o(n||t)},c,c.t,t,i,n,e)}return n[s].t}for(var r="function"==typeof require&&require,s=0;s<e.length;s++)o(e[s]);return o}({1:[function(t,i,n){(function(i){var n=t("./src/graphs/GreulerAdapter"),e=t("./src/state/UrlState"),o=t("./src/ActionQueue"),r=t("./src/components/ResetButton"),s=t("./src/graphs/graphfactory");t("./src/Logger").level=i.i;var h,u=new o,a=new URLSearchParams(window.location.search),c=new e({o:window.location.protocol+"//"+window.location.host+window.location.pathname,s:window.history.replaceState.bind(window.history,{},""),h:a}),l=Math.floor((window.innerWidth>0?window.innerWidth:screen.width)-40),f=Math.floor(.75*(window.innerHeight>0?window.innerHeight:screen.height));l<1e3&&(Math.floor(Math.min(l,f)*(1/18)),h=200);var d="true"===a.get("immutable"),g="false"!==a.get("allowAddNodes"),w="false"!==a.get("allowAddEdges"),p="false"!==a.get("allowEdit"),m="false"!==a.get("allowChangeColors"),b="false"!==a.get("allowLabels");i.u=s.l({document:i.document,g:new n({p:i.p}),m:u,state:c,width:l,height:f,v:.1,C:h,A:250,N:d,_:g,L:w,M:m,O:p,R:b,S:a.has("colorChoices")&&a.getAll("colorChoices").map(function(t){return"#"+t}),P:c.B(),D:c.j()}),i.I=i.u.I,i.q=new r(Object.assign({G:[i.u]},{m:u})),i.u.T(document.getElementById("main-graph")),i.q.T(document.getElementById("reset-button"))}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{U:2,k:6,F:11,X:18,K:24,W:31}],2:[function(t,i,n){(function(n){function e(t){this.setTimeout=t&&t.setTimeout||n.setTimeout.bind(n),this.clearTimeout=t&&t.clearTimeout||n.clearTimeout.bind(n),this.H=t&&t.H||10,this.Y=[],this.V=!1}var o=t("./utils/Literal");e.prototype={className:"ActionQueue",defer:function(t,i){1==arguments.length&&(i=t,t=1);var n=this.setTimeout(i,t);return{cancel:function(){this.clearTimeout(n)}.bind(this)}},J:function(t){var i=this.Y;return i.push(t),this.V||this.Z(),{cancel:function(){i.splice(i.indexOf(t),1)}}},Z:function(){var t=function(){this.Y.forEach(function(t){t()}),this.setTimeout(t,this.H)}.bind(this);t(),this.V=!0},$:function(){return{setTimeout:new o("global.setTimeout.bind(global)"),clearTimeout:new o("global.clearTimeout.bind(global)"),H:this.H}}},i.t=e}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{tt:33}],3:[function(t,i,n){function e(t){this.m=t&&t.m}function o(t,i){this.m=t,this.it=i,this.nt=0,this.interval=100,this.et=function(){return!0}}e.prototype={className:"Animator",ot:function(){return this.rt(),new o(this.m,Array.prototype.slice.call(arguments))},$:function(){return{m:this.m}},rt:function(){if(!this.m)throw Error("ActionQueue is required")}},o.prototype={every:function(t){return this.interval=t,this},st:function(t){return this.et=t,this},play:function(){var t=function(){this.et()&&(this.it[this.nt](),this.nt=(this.nt+1)%this.it.length,this.m.defer(this.interval,t))}.bind(this);return t(),this},stop:function(){return this.st(function(){return!1})}},i.t=e},{}],4:[function(t,i,n){function e(t){t&&(this.m=t.m,this.ht=t.ht||250,this.ut=new r({m:this.m,timeout:500,name:"mouseTouchSwitch"}),this.at=t),this.ct=0,this.lt=0,this.ft=!1,this.dt=[]}var o=t("./utils"),r=t("./ModeSwitch"),s=new(t("./Logger"))("Component");e.prototype={gt:function(){},wt:function(){},pt:function(){},className:"",$:function(){return this.at},T:function(t){this.bt(),this.Et=t,t.addEventListener("mouseup",function(t){s.debug("mouseup",o.vt(t)),this.ut.Ct("mouse",function(t){this.At(t.Nt)}.bind(this))}.bind(this)),t.addEventListener("touchend",function(t){s.debug("touchend",o.vt(t)),this.ut.Ct("touch",function(t){this.At(t.Nt)}.bind(this))}.bind(this)),t.addEventListener("mousedown",function(t){t=o.vt(t),s.debug("mousedown",t),this.ut._t("mouse",function(){return this.yt(t),{Nt:t}}.bind(this))}.bind(this)),t.addEventListener("touchstart",function(t){t=o.vt(t),s.debug("touchstart",t),this.ut._t("touch",function(){return this.yt(t),{Nt:t}}.bind(this))}.bind(this)),t.addEventListener("keyup",function(t){t=o.vt(t),s.debug("keyup",t),13===t.keyCode&&this.pt(t)}.bind(this)),this.Lt()&&(t.innerHTML=this.Lt()),this.Mt(t)},Lt:function(){return null},Mt:function(t){},Ot:function(t){return this.dt.push(t),this},remove:function(){this.dt.forEach(function(t){t(this)}.bind(this)),this.Et.remove(),s.debug("closed component",this)},bt:function(){if(!this.m)throw Error("actionQueue is required");if(!this.className)throw new Error("Must override className")},At:function(t){this.lt++,this.ft?this.ft=!1:this.gt(t)},yt:function(t){var i=++this.ct;this.m.defer(this.ht,function(){this.ct===i&&this.lt===this.ct-1&&(this.ft=!0,this.wt(t))}.bind(this))}},i.t=e},{Rt:6,St:7,Pt:32}],5:[function(t,i,n){function e(t){this.document=t&&t.document,this.m=t&&t.m,this.xt=t&&t.xt}t("./utils");var o=t("./geometry/Position"),r=t("./Component"),s=t("./utils/Literal");e.prototype={className:"ComponentManager",$:function(){return{document:new s("global.document"),m:this.m,xt:this.xt}},Bt:function(t){var i=new((t=Object.assign({position:new o({jt:{x:0,y:0}}),It:void 0,Dt:r,at:void 0},t)).Dt)(Object.assign({},this.xt,t.at)),n=this.document.createElement("div");if(t.position&&(n.style=t.position.qt()),"function"==typeof t.It){var e=this.m.J(function(){n.style=t.It().qt({width:n.offsetWidth,height:n.offsetHeight})}.bind(this));i.Ot(e.cancel.bind(e))}return this.document.body.insertBefore(n,this.document.body.firstChild),i.T(n),i}},i.t=e},{Gt:4,Tt:14,Pt:32,tt:33}],6:[function(t,i,n){(function(t){function n(t){this.name=t||"Logger"}var e=["DEBUG","INFO","WARN","ERROR"];n.level="WARN",n.Ut={},n.prototype={debug:function(t,i){this.kt.apply(this,[(new Date).getTime(),"DEBUG",this.name].concat(Array.prototype.splice.call(arguments,0)))},info:function(t,i){this.kt.apply(this,[(new Date).getTime(),"INFO",this.name].concat(Array.prototype.splice.call(arguments,0)))},warn:function(t,i){this.kt.apply(this,[(new Date).getTime(),"WARN",this.name].concat(Array.prototype.splice.call(arguments,0)))},error:function(t,i){this.kt.apply(this,[(new Date).getTime(),"ERROR",this.name].concat(Array.prototype.splice.call(arguments,0)))},kt:function(){var i=arguments[1],o=n.Ut[this.name]||n.level;e.indexOf(i)>=e.indexOf(o)&&t.console.log.apply(t.console.log,arguments)}},i.t=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],7:[function(t,i,n){function e(t){this.m=t&&t.m,this.timeout=t&&t.timeout||0,this.Ft=t&&t.zt||{},this.name=t&&t.name||"ModeSwitch",this.Qt=null,this.Xt=null,o.debug("Initialized "+this.name,this)}var o=new(t("./Logger"))("ModeSwitch");e.prototype={className:"ModeSwitch",$:function(){return{m:this.m,timeout:this.timeout,zt:this.Ft,name:this.name}},_t:function(t,i){if(this.Kt(),this.Wt(t)){o.debug(this.name+": Entering '"+t+"'",this);var n=(i||function(){})();this.Ft[t]=n,this.Qt=t,this.Ht()}else o.debug(this.name+": Not entering '"+t+"'; active mode is "+this.Qt,this);return this},Ct:function(t,i){return this.Kt(),this.Yt(t)?(o.debug(this.name+": Exiting "+t,this),(i||function(){})(this.Ft[t]),this.Vt()):o.debug(this.name+": Not exiting '"+t+"'; active mode is "+this.Qt,this),this},Jt:function(t){var i=this.Qt||"default",n=t[i];return n?(o.debug(this.name+": Found callback for active mode",i,t),n(this.Ft[this.Qt||"default"])):o.debug(this.name+": No callback for active mode",i,t),this},Wt:function(t){return!this.Qt||this.Yt(t)},Yt:function(t){return this.Qt===t},Ht:function(){this.Xt&&this.Xt.cancel()},Vt:function(){var t=function(){delete this.Ft[this.Qt],this.Qt=null}.bind(this);this.Ht(),this.timeout?this.Xt=this.m.defer(this.timeout,t):t()},Kt:function(){if(this.timeout&&!this.m)throw new Error("action queue is required if a timeout is specified")}},i.t=e},{Rt:6}],8:[function(t,i,n){i.t={Zt:"#db190f",$t:"#f76402",ti:"#fbff14",ii:"#28b92b",ni:"#2826b5",ei:"#2980B9",oi:"#8c28b7",ri:"#00FF00",si:["#db190f","#f76402","#fbff14","#28b92b","#2826b5","#2980B9","#8c28b7"]}},{}],9:[function(t,i,n){function e(t){o.apply(this,arguments),this.text=t&&t.text}var o=t("../Component");e.prototype=Object.assign(new o,{className:"BlockText",Lt:function(){return this.text&&"<p>"+this.text+"</p>"}}),i.t=e},{hi:4}],10:[function(t,i,n){function e(t){o.apply(this,arguments),this.g=t&&t.g,this.ui=t&&t.ui,this.I=t&&t.I,this.width=t&&t.width,this.height=t&&t.height,this.v=t.v}var o=t("../Component");t("../utils"),new(t("../Logger"))("GraphComponent");e.prototype=Object.assign(new o,{className:"GraphComponent",Mt:function(t){this.I.initialize({Et:t,width:this.width,height:this.height})},gt:function(t){var i=this.g.ai(t,this.v);this.ui.ci({Jt:function(t){i.li()&&i.id!==t.id?this.I.fi(t,i):this.ui.di()}.bind(this),gi:function(){i.li()?this.I.wi(i):this.I.pi()}.bind(this)})},wt:function(t){var i=this.g.ai(t,this.v);i.li()&&this.ui.mi(i)},reset:function(){this.I.reset(),this.ui.di()},bt:function(){if(o.prototype.bt.call(this,arguments),!this.g)throw new Error("adapter is required");if(!this.ui)throw new Error("edit mode is required");if(!this.I)throw new Error("graph is required")}}),i.t=e},{hi:4,bi:6,Ei:32}],11:[function(t,i,n){function e(t){o.apply(this,arguments),this.G=t?t.G:[]}var o=t("../Component");e.prototype=Object.assign(new o,{className:"ResetButton",gt:function(t){this.G.forEach(function(t){t.reset()})}}),i.t=e},{hi:4}],12:[function(t,i,n){function e(t){o.apply(this,arguments),this.vi=t&&t.text||"",this.Ci=t&&t.Ci||function(){}}var o=t("../Component");e.prototype=Object.assign(new o,{className:"TextBox",Lt:function(){return'<input type="text" value="'+this.vi+'"></input>'},Ai:function(){return this.Et.getElementsByTagName("input")[0].value},pt:function(t){this.Ci()}}),i.t=e},{hi:4}],13:[function(t,i,n){function e(t){this.dimensions=t||{left:0,top:0,right:0,bottom:0}}e.prototype={className:"BoundingBox",$:function(){return this.dimensions},Ni:function(t){return new e({left:this.dimensions.left-this._i()*t,right:this.dimensions.right+this._i()*t,top:this.dimensions.top-this.yi()*t,bottom:this.dimensions.bottom+this.yi()*t})},translate:function(t){return new e({left:this.dimensions.left+t.x,right:this.dimensions.right+t.x,top:this.dimensions.top+t.y,bottom:this.dimensions.bottom+t.y})},contains:function(t){return this.dimensions.left<=t.x&&t.x<=this.dimensions.right&&this.dimensions.top<=t.y&&t.y<=this.dimensions.bottom},Li:function(){return{x:this.dimensions.left+this._i()/2,y:this.dimensions.top+this.yi()/2}},Mi:function(){return{x:this.dimensions.left,y:this.dimensions.top}},Oi:function(){return{x:this.dimensions.right,y:this.dimensions.top}},Ri:function(){return{x:this.dimensions.left,y:this.dimensions.bottom}},Si:function(){return{x:this.dimensions.right,y:this.dimensions.bottom}},_i:function(){return this.dimensions.right-this.dimensions.left},yi:function(){return this.dimensions.bottom-this.dimensions.top}},i.t=e},{}],14:[function(t,i,n){function e(t){if(!o.Pi(t))throw new Error("invalid position object "+t);Object.assign(this,t)}var o=t("../utils");e.prototype={className:"Position",$:function(){return this},qt:function(t){if(t=Object.assign({width:0,height:0},t),this.jt)return"position: absolute; left: "+this.jt.x+"; top: "+this.jt.y+";";if(this.xi)return"position: absolute; left: "+(this.xi.x-t.width)+"; top: "+this.xi.y+";";if(this.Bi)return"position: absolute; left: "+this.Bi.x+"; top: "+(this.Bi.y-t.height)+";";if(this.Di)return"position: absolute; left: "+(this.Di.x-t.width)+"; top: "+(this.Di.y-t.height)+";";throw new Error("invalid position object: "+this)}},i.t=e},{Ei:32}],15:[function(t,i,n){function e(){}var o=t("../utils");e.prototype={className:"ColorChanger",$:function(){return{}},setColor:function(t){var i=o.ji(t.g),n=o.ji(t.state),e=o.ji(t.Ii),r=o.ji(t.color);i.qi(e,r),n.Gi({id:e.id,color:r})}},i.t=e},{Ei:32}],16:[function(t,i,n){function e(){}var o=t("../utils");e.prototype={className:"EdgeCreator",$:function(){return{}},fi:function(t){var i=o.ji(t.g),n=o.ji(t.state),e=o.ji(t.source),r=o.ji(t.target),s=t.C;i.fi({source:e,target:r,Ti:s}),n.Ui(e.id,r.id)}},i.t=e},{Ei:32}],17:[function(t,i,n){function e(t){this.state=t&&t.state,this.g=t&&t.g,this.m=t&&t.m,this.ki=t&&t.ki,this.Fi=t&&t.Fi||new h,this.zi=t&&t.zi||new u,this.Qi=t&&t.Qi||new a,this.S=t&&t.S||r.Xi(o.si,o.ei),this.Ki=t&&t.Ki,this.C=t&&t.C,this.P=t&&t.P||[],this.D=t&&t.D||[],this.at=t}var o=t("../colors"),r=t("../utils"),s=t("../Logger"),h=t("./NodeCreator"),u=t("./EdgeCreator"),a=t("./ColorChanger"),c=new s("Graph");e.prototype={className:"Graph",$:function(){return Object.assign({P:this.state.B(),D:this.state.j()},this.at)},initialize:function(t){this.Kt(),c.debug("initializing graph",this),this.g.initialize(t.Et,r.Wi({width:t.width,height:t.height,Hi:this.P.map(function(t){return r.Wi({id:t.id,color:t.color||this.S[0],label:"",size:this.Ki},{Yi:["id","label"]})}.bind(this)),Vi:this.D,C:this.C})),this.m.defer(function(){c.debug("initializing label set"),this.ki.initialize(this.P.map(function(t){return{Ii:this.g.Ji(t.id),label:t.label}}.bind(this)))}.bind(this))},pi:function(){this.Fi.pi({state:this.state,g:this.g,color:this.S[0],Ki:this.Ki})},wi:function(t){var i=this.Zi(t),n=this.S[i];this.Qi.setColor({g:this.g,state:this.state,Ii:t,color:n})},fi:function(t,i){this.zi.fi({source:t,target:i,g:this.g,state:this.state,C:this.C})},reset:function(){c.debug("resetting"),this.g.$i(function(){this.state.B().forEach(function(t){this.g.removeNode(t)}.bind(this))}.bind(this)),this.state.reset(),this.ki.tn()},Zi:function(t){return(this.S.indexOf(t.color)+1)%this.S.length},Kt:function(){if(!this.state)throw new Error("state is required");if(!this.g)throw new Error("adapter is required");if(!this.m)throw new Error("actionQueue is required");if(!this.ki)throw new Error("labelSet is required");if(!this.Fi)throw new Error("nodeCreator is required");if(!this.zi)throw new Error("edgeCreator is required")}},i.t=e},{bi:6,in:8,Ei:32,nn:15,en:16,on:22}],18:[function(t,i,n){function e(t){this.p=t&&t.p,this.rn=!1}var o=t("./graphelements"),r=t("../utils"),s=t("../geometry/BoundingBox"),h=t("../utils/Literal"),u=new(t("../Logger"))("GreulerAdapter");e.prototype={className:"GreulerAdapter",$:function(){return{p:new h("global.greuler")}},initialize:function(t,i){i=i||{},this.sn=this.p(r.Wi({target:"#"+t.id,width:i.width,height:i.height,data:r.Wi({Hi:i.Hi&&i.Hi.map(this.hn),links:i.Vi,un:i.C&&function(){return i.C}})})).update(),this.I=this.sn.I},pi:function(t){this.I.pi(this.hn(t));this.an()},removeNode:function(t){this.I.removeNode(this.hn(t));this.an()},fi:function(t){this.I.fi(r.Wi({source:t.source.id,target:t.target.id,un:t.Ti},{Yi:["source","target"]}));this.an()},qi:function(t,i){if(t.cn)t.cn.setAttribute("fill",i);else if(t.id){var n=this.I.Ji({id:t.id});this.ln(n).setAttribute("fill",i)}else u.error("Got unexpected target node",t)},ai:function(t,i){return this.fn(t,i)||o.NONE},Ji:function(t){return u.debug("retrieving node",t),this.dn(function(i){return i.id===t})[0]},dn:function(t){return t=t||function(){return!0},this.I.gn(t).map(function(t){var i=this.ln(t);return new o.Node({id:t.id,wn:t,cn:i,color:i.getAttribute("fill"),pn:this.mn.bind(this,t)})}.bind(this))},$i:function(t){this.rn=!0,t(this),this.rn=!1,this.an()},hn:function(t){return r.Wi({id:t.id,fill:t.color,label:t.label||"",r:t.size},{Yi:["id","label"]})},ln:function(t){u.debug("retrieving dom element for node: "+t.index,this.sn);var i=this.sn.bn[0][0].childNodes;return u.debug(i),i[t.index].getElementsByTagName("circle")[0]},fn:function(t,i){i=i||0;var n={x:t.clientX,y:t.clientY},e=this.dn(function(t){return this.mn(t).Ni(i).contains(n)}.bind(this));return e&&e.length?(e.sort(function(t,i){return r.Ti(t.Li(),n)-r.Ti(i.Li(),n)}),e[0]):void 0},an:function(){this.rn||(this.sn=this.sn.update())},mn:function(t){var i=this.sn.root[0][0].getBoundingClientRect();return new s({left:t.bounds.x,right:t.bounds.En,top:t.bounds.y,bottom:t.bounds.vn}).translate({x:i.left,y:i.top})}},i.t=e},{bi:6,Cn:13,Ei:32,An:33,Nn:23}],19:[function(t,i,n){function e(){}e.prototype={className:"NoOpColorChanger",$:function(){return{}},setColor:function(){}},i.t=e},{}],20:[function(t,i,n){function e(){}e.prototype={className:"NoOpEdgeCreator",$:function(){return{}},fi:function(){}},i.t=e},{}],21:[function(t,i,n){function e(){}e.prototype={className:"NoOpNodeCreator",$:function(){return{}},pi:function(){}},i.t=e},{}],22:[function(t,i,n){function e(){}var o=t("../utils");e.prototype={className:"NodeCreator",$:function(){return{}},pi:function(t){var i=o.ji(t.state),n=o.ji(t.g),e=o.ji(t.color),r=t.Ki,s=i.Gi({color:e}),h=o.Wi({id:s,color:e,label:"",size:r},{Yi:["id","label"]});n.pi(h)}},i.t=e},{Ei:32}],23:[function(t,i,n){function e(t){t&&(this.id=t.id,this.cn=t.cn)}function o(t){e.apply(this,arguments),t&&(this.wn=t.wn,this.color=t.color,this.pn=t.pn)}function r(){e.apply(this,arguments)}function s(){e.apply(this,arguments)}e.prototype={li:function(){return!1},_n:function(){return!1}},o.prototype=Object.assign(new e,{li:function(){return!0},Li:function(){return this.pn().Li()},Mi:function(){return this.pn().Mi()},Oi:function(){return this.pn().Oi()},Ri:function(){return this.pn().Ri()},Si:function(){return this.pn().Si()}}),r.prototype=Object.assign(new e,{_n:function(){return!0}}),s.prototype=Object.assign(new e,{}),i.t={Node:o,yn:r,NONE:new s}},{}],24:[function(t,i,n){t("./GreulerAdapter");var e=t("./ColorChanger"),o=t("./EdgeCreator"),r=t("./NodeCreator"),s=t("./NoOpColorChanger"),h=t("./NoOpEdgeCreator"),u=t("./NoOpNodeCreator"),a=t("./Graph"),c=t("../modes/DisallowedEditMode"),l=t("../modes/EditMode"),f=t("../modes/NonAnimatingEditMode"),d=t("../labels/EmptyLabelSet"),g=t("../labels/NodeLabelSet"),w=t("../components/GraphComponent"),p=t("../Animator"),m=t("../ComponentManager"),b=t("../utils"),E=new(t("../Logger"))("graphfactory");i.t={Ln:function(t){return t=Object.assign({N:!1,_:!0,L:!0,M:!0,R:!0},t),E.debug("instantiating graph",t),new a({m:b.ji(t.m),g:b.ji(t.g),S:t.S,Qi:this.Mn(t),zi:this.On(t),C:t.C,P:t.P,D:t.D,ki:this.Rn(t),Fi:this.Sn(t),Ki:t.Ki,state:b.ji(t.state)})},l:function(t){t=Object.assign({N:!1,_:!0,L:!0,M:!0,R:!0,O:!0},t),E.debug("instantiating graph component",t);var i=this.Rn(t);return new w(Object.assign({I:this.Ln(Object.assign({ki:i},t)),g:b.ji(t.g),ui:this.Pn(t,i),width:t.width,height:t.height,v:t.v},this.xn(t)))},Bn:function(t){return new m({m:b.ji(t.m),xt:this.xn(t),document:b.ji(t.document)})},xn:function(t){return{m:b.ji(t.m)}},Mn:function(t){return t.N||!t.M?new s:new e},On:function(t){return t.N||!t.L?new h:new o},Sn:function(t){return t.N||!t._?new u:new r},Pn:function(t,i){return t.N||!t.O?new c:t.L?new l({g:b.ji(t.g),Dn:new p({m:b.ji(t.m)}),ki:i,A:t.A}):new f({g:b.ji(t.g),ki:i,A:t.A})},Rn:function(t){return t.R?new g({jn:t.jn||this.Bn(t),state:t.state}):new d}}},{In:3,qn:5,bi:6,Gn:10,Tn:26,Un:27,kn:28,Fn:29,zn:30,Ei:32,nn:15,en:16,Qn:17,Xn:18,Kn:19,Wn:20,Hn:21,on:22}],25:[function(t,i,n){function e(t){t&&(this.jn=t.jn,this.text=t.text,this.It=t.It,this.Yn=new o({name:"EditableLabel({ text: '"+this.text+"'})"}),this.Vn=t.Vn||function(){})}var o=t("../ModeSwitch"),r=t("../components/BlockText"),s=t("../components/TextBox"),h=new(t("../Logger"))("EditableLabel");e.prototype={className:"EditableLabel",$:function(){return{jn:this.jn,text:this.text,It:this.It,Vn:this.Vn}},display:function(){return h.debug("displaying text",this.text),this.Kt(),this.Yn.Ct("edit",function(t){this.text=t.Jn.Ai(),t.Jn.remove(),h.debug("got text from input component",this.text)}.bind(this)).Ct("display",function(t){t.Jn.remove()}),this.text&&this.Yn._t("display",function(){var t=this.jn.Bt({Dt:r,at:{text:this.text},It:this.It});return this.Vn(this.text),h.debug("EditableLabel: displaying component with text",this.text),{Jn:t}}.bind(this)),this},Zn:function(){return h.debug("editing text",this.text),this.Kt(),this.Yn.Ct("display",function(t){t.Jn.remove(),h.debug("closed display component")}.bind(this)).Ct("edit",function(t){t.Jn.remove()}),this.Yn._t("edit",function(){var t=this.jn.Bt({Dt:s,at:{text:this.text,Ci:this.display.bind(this)},It:this.It});return h.debug("opened edit component"),{Jn:t}}.bind(this)),this},Kt:function(){if(!this.jn)throw new Error("componentManager is required");if(!this.Yn)throw new Error("modeSwitch is required")},remove:function(){return h.debug("removing",this),this.Yn.Ct("display",function(t){t.Jn.remove(),h.debug("closed display component")}).Ct("edit",function(t){t.Jn.remove(),h.debug("closed edit component")}),this},$n:function(t){t.Jn.remove()}},e.te={create:function(t){return new e(t)}},i.t=e},{bi:6,ie:7,ne:9,ee:12}],26:[function(t,i,n){function e(){}e.prototype={className:"EmptyLabelSet",$:function(){return{}},initialize:function(){},Zn:function(){},display:function(){},tn:function(){}},i.t=e},{}],27:[function(t,i,n){function e(t){this.jn=t&&t.jn,this.state=t&&t.state,this.oe=t&&t.oe||r.te,this.labels={}}var o=t("../geometry/Position"),r=t("./EditableLabel"),s=new(t("../Logger"))("NodeLabelSet");e.prototype={className:"NodeLabelSet",$:function(){return{jn:this.jn,state:this.state}},initialize:function(t){s.debug("initializing",t),t.filter(function(t){return!!t.label}).forEach(function(t){var i=this.re(t.Ii,t.label);this.labels[t.Ii.id]=i,i.display()}.bind(this))},Zn:function(t){s.debug("editing label for node "+t.id),this.se(t).Zn()},display:function(t){s.debug("displaying label for node "+t.id),this.se(t).display()},tn:function(){s.debug("closing all labels",this.labels),Object.values(this.labels).forEach(function(t){t.remove()}),this.labels={}},se:function(t){var i;return this.labels[t.id]?(i=this.labels[t.id],s.info("reusing existing label for node "+t.id,i)):(i=this.re(t),this.labels[t.id]=i,s.info("created new label for node "+t.id,i)),i},re:function(t,i){return s.debug("Creating label",t),this.oe.create({text:i,jn:this.jn,It:function(){return new o({Di:t.pn().Mi()})},Vn:function(i){s.debug("saving label",t,i),this.state.Gi({id:t.id,label:i})}.bind(this)})},Kt:function(){if(!this.jn)throw new Error("componentManager is required");if(!this.state)throw new Error("state is required")}},i.t=e},{bi:6,he:14,ue:25}],28:[function(t,i,n){function e(){o.apply(this,arguments)}var o=t("./EditMode");e.prototype=Object.assign(new o,{className:"DisallowedEditMode",mi:function(){},Kt:function(){}}),i.t=e},{ae:29}],29:[function(t,i,n){function e(t){this.g=t&&t.g,this.Dn=t&&t.Dn,this.A=t&&t.A||250,this.ki=t&&t.ki,this.Yn=t&&t.Yn||new o({name:"editMode"}),this.Yn._t("display")}var o=t("../ModeSwitch"),r=t("../colors"),s=new(t("../Logger"))("EditMode");e.prototype={className:"EditMode",$:function(){return{g:this.g,Dn:this.Dn,A:this.A,ki:this.ki,Yn:this.Yn}},mi:function(t){s.info("activating"),this.Kt(),this.Yn.Ct("display").Ct("edit",this.ce.bind(this))._t("edit",function(){var i=this.g.dn(function(i){return i.id!==t.id}),n=i.reduce(function(t,i){return t[i.id]=i.color,t},{}),e=this.le(i,n);this.ki.Zn(t);var o={Ii:t,animation:e,fe:i,de:n};return s.debug("activated",o),o}.bind(this))},di:function(){s.debug("deactvating"),this.Kt(),this.Yn.Ct("edit",this.ce.bind(this))._t("display",function(){s.debug("deactvated")})},ci:function(t){t=Object.assign({Jt:function(){},gi:function(){}},t),this.Kt(),this.Yn.Jt({Zn:function(i){t.Jt(i.Ii)},display:t.gi})},ge:function(t){t.forEach(function(t){this.g.qi(t,r.ri)}.bind(this))},we:function(t,i){t.forEach(function(t){this.g.qi(t,i[t.id])}.bind(this))},ce:function(t){s.debug("cleaning up edit mode state",t),t.animation.stop(),this.ki.display(t.Ii),this.we(t.fe,t.de)},le:function(t,i){return this.Dn.ot(this.ge.bind(this,t),this.we.bind(this,t,i)).every(this.A).play()},Kt:function(){if(!this.g)throw new Error("adapter is required");if(!this.Dn)throw new Error("animator is required");if(!this.Yn)throw new Error("modeSwitch is required")}},i.t=e},{bi:6,ie:7,in:8}],30:[function(t,i,n){function e(){o.apply(this,arguments)}var o=t("./EditMode"),r=new(t("../Logger"))("NonAnimatingEditMode");e.prototype=Object.assign(new o,{className:"NonAnimatingEditMode",le:function(){return r.debug("not animating for edit mode"),{stop:function(){}}},Kt:function(){if(!this.g)throw new Error("adapter is required");if(!this.Yn)throw new Error("modeSwitch is required")}}),i.t=e},{bi:6,ae:29}],31:[function(t,i,n){function e(t){this.o=t&&t.o,this.s=t&&t.s,this.h=t&&t.h}var o=t("../utils"),r=t("../utils/Literal"),s=new(t("../Logger"))("UrlState");NUM_NODES_PARAM="n",COLOR_PARAM_PREFIX="c_",EDGE_PARAM_PREFIX="e_",LABEL_PARAM_PREFIX="l_",e.prototype={className:"UrlState",$:function(){return{o:this.o,s:new r("window.history.replaceState.bind(window.history, {}, '')"),h:new r("new URLSearchParams(window.location.search)")}},Gi:function(t){var i;return(t=t||{}).hasOwnProperty("id")&&null!==t.id&&void 0!==t.id?i=t.id:(i=this.pe(),this.h.set(NUM_NODES_PARAM,i+1)),t.color&&this.me(i,t.color),t.label&&this.be(i,t.label),this.Ee(),i},ve:function(t){var i=this.Ce(t),n=this.Ae().find(function(t){return this.Ne({_e:i,ye:t})}.bind(this)),e=this.h.get(LABEL_PARAM_PREFIX+t);return o.Wi({id:t,color:n&&n.replace(COLOR_PARAM_PREFIX,"#"),label:e&&decodeURIComponent(e)},{Yi:"id"})},Ui:function(t,i){var n,e=EDGE_PARAM_PREFIX+t;n=this.h.has(e)?this.Le(e)|this.Ce(i):this.Ce(i),this.Me(e,n),this.Ee()},B:function(){var t=[];if(this.h.has(NUM_NODES_PARAM))for(var i=0;i<this.h.get(NUM_NODES_PARAM);i++)t.push(this.ve(i));return t},j:function(){return this.Oe().map(function(t){for(var i=parseInt(t.replace(EDGE_PARAM_PREFIX,"")),n=[],e=this.Le(t),o=e.toString(2).length,r=0;r<o;r++){var s=this.Ce(r);(e&s)===s&&n.push({source:i,target:r})}return n}.bind(this)).reduce(function(t,i){return t.concat(i)},[])},be:function(t,i){this.h.set(LABEL_PARAM_PREFIX+t,encodeURIComponent(i))},Re:function(){return this.o+"?"+this.h.toString()},reset:function(){s.debug("resetting"),this.Se().forEach(function(t){this.h.delete(t)}.bind(this)),this.Ee()},Ne:function(t){return t=this.Pe(t),!!this.h.has(t.ye)&&(this.Le(t.ye)&t._e)===t._e},xe:function(t){t=this.Pe(t);var i;i=this.h.has(t.ye)?this.Le(t.ye)|t._e:t._e,this.Me(t.ye,i)},Be:function(t){if(t=this.Pe(t),!this.h.has(t.ye))throw Error("Attempted to remove color "+t.ye);var i=this.Le(t.ye)&~t._e;0===i?this.h.delete(t.ye):this.Me(t.ye,i)},Le:function(t){return parseInt(this.h.get(t),16)},Me:function(t,i){this.h.set(t,i.toString(16))},Ce:function(t){return t<=30?1<<t:Math.pow(2,t)},Pe:function(t){if(!t.hasOwnProperty("bit")&&!t.hasOwnProperty("nodeId"))throw Error("bit or nodeId is required");if(!t.hasOwnProperty("color")&&!t.hasOwnProperty("colorKey"))throw Error("color or colorKey is required");return{_e:t.hasOwnProperty("bit")?t._e:this.Ce(t.De),ye:t.hasOwnProperty("colorKey")?t.ye:t.color.replace("#",COLOR_PARAM_PREFIX)}},Ae:function(){return this.Se(function(t){return t.startsWith(COLOR_PARAM_PREFIX)})},Oe:function(){return this.Se(function(t){return t.startsWith(EDGE_PARAM_PREFIX)})},Se:function(t){t=t||function(){return!0};for(var i=[],n=this.h.keys(),e=n.next();!e.done;)t(e.value)&&i.push(e.value),e=n.next();return i},pe:function(){return this.h.has(NUM_NODES_PARAM)?parseInt(this.h.get(NUM_NODES_PARAM)):0},me:function(t,i){var n=this.Ce(t);this.Ae().forEach(function(t){this.Ne({_e:n,ye:t})&&this.Be({_e:n,ye:t})}.bind(this)),this.xe({_e:n,color:i})},Ee:function(){this.s(this.Re())}},i.t=e},{bi:6,Ei:32,An:33}],32:[function(t,i,n){function e(t,i){function n(t){return" ".repeat(i)+t}function s(t){return" ".repeat(i+2)+t}return i=i||0,t instanceof r?t.value:Array.isArray(t)?"[\n"+t.map(function(t){return e(t,i+2)+","}).map(s).join("\n")+"\n"+n("]"):t&&t.className&&t.$?"new "+t.className+"({\n"+Object.keys(t.$()).map(function(n){return n+": "+e(t.$()[n],i+2)+","}).map(s).join("\n")+"\n"+n("})"):t&&"object"==typeof t?"{\n"+Object.keys(t).map(function(n){return n+": "+e(t[n],i+2)+","}).map(s).join("\n")+"\n"+n("}"):t&&"string"==typeof t?"'"+o(t,"'","\\'")+"'":t||0===t?t.toString():"null"}function o(t,i,n){return t.split(i).join(n)}var r=t("./utils/Literal");i.t={Ti:function(t,i){var n=t.x-i.x,e=t.y-i.y;return Math.sqrt(n*n+e*e)},Wi:function(t,i){var n={};return Object.keys(t).forEach(function(i){t[i]&&(n[i]=t[i])}),i&&i.Yi&&(i.Yi.constructor===Array?i.Yi.forEach(function(i){n[i]=t[i]}):n[i.Yi]=t[i.Yi]),n},vt:function(t){return t&&t.touches&&t.touches.length?Object.assign(t,{clientX:t.touches[0].clientX,clientY:t.touches[0].clientY,screenX:t.touches[0].screenX,screenY:t.touches[0].screenY}):t},Pi:function(t){return!(!t||"object"!=typeof t||Array.isArray(t))&&1===Object.keys(t).filter(function(i){return!!t[i]}).length},Xi:function(t,i){var n=t.indexOf(i);if(n>=0){for(var e=[],o=n;o<t.length;o++)e.push(t[o]);for(o=0;o<n;o++)e.push(t[o]);return e}return t},je:e,Ie:o,ji:function(t){if(!t)throw new Error("missing required object");return t}}},{tt:33}],33:[function(t,i,n){i.t=function(t){this.value=t}},{}]},{},[1]);