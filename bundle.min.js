!function t(i,e,n){function o(s,h){if(!e[s]){if(!i[s]){var u="function"==typeof require&&require;if(!h&&u)return u(s,!0);if(r)return r(s,!0);var a=new Error("Cannot find module '"+s+"'");throw a.code="MODULE_NOT_FOUND",a}var c=e[s]={t:{}};i[s][0].call(c.t,function(t){var e=i[s][1][t];return o(e||t)},c,c.t,t,i,e,n)}return e[s].t}for(var r="function"==typeof require&&require,s=0;s<n.length;s++)o(n[s]);return o}({1:[function(t,i,e){(function(i){var e=t("./src/graphs/GreulerAdapter"),n=t("./src/state/UrlState"),o=t("./src/ActionQueue"),r=(t("./src/components/ResetButton"),t("./src/graphs/graphfactory"));t("./src/Logger").level=i.i;var s=new o,h=new URLSearchParams(window.location.search),u=new n({o:window.location.protocol+"//"+window.location.host+window.location.pathname,s:window.history.replaceState.bind(window.history,{},""),h:h}),a="true"===h.get("immutable"),c="false"!==h.get("allowAddNodes"),l="false"!==h.get("allowAddEdges"),f="false"!==h.get("allowEdit"),d="false"!==h.get("allowChangeColors"),g="false"!==h.get("allowLabels");i.u=r.l({document:i.document,screen:i.screen,window:window,size:"fullscreen",g:new e({p:i.p}),m:s,state:u,v:.1,C:250,A:a,N:c,_:l,L:d,M:f,O:g,S:h.has("colorChoices")&&h.getAll("colorChoices").map(function(t){return"#"+t}),R:u.P(),D:u.B()}),i.I=i.u.I,i.u.j(document.getElementById("main-graph"))}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{q:2,G:6,T:11,U:18,F:24,k:31}],2:[function(t,i,e){(function(e){function n(t){this.setTimeout=t&&t.setTimeout||e.setTimeout.bind(e),this.clearTimeout=t&&t.clearTimeout||e.clearTimeout.bind(e),this.X=t&&t.X||10,this.K=[],this.W=!1}var o=t("./utils/Literal");n.prototype={className:"ActionQueue",defer:function(t,i){1==arguments.length&&(i=t,t=1);var e=this.setTimeout(i,t);return{cancel:function(){this.clearTimeout(e)}.bind(this)}},H:function(t){var i=this.K;return i.push(t),this.W||this.Y(),{cancel:function(){i.splice(i.indexOf(t),1)}}},Y:function(){var t=function(){this.K.forEach(function(t){t()}),this.setTimeout(t,this.X)}.bind(this);t(),this.W=!0},V:function(){return{setTimeout:new o("global.setTimeout.bind(global)"),clearTimeout:new o("global.clearTimeout.bind(global)"),X:this.X}}},i.t=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{J:33}],3:[function(t,i,e){function n(t){this.m=t&&t.m}function o(t,i){this.m=t,this.Z=i,this.$=0,this.interval=100,this.tt=function(){return!0}}n.prototype={className:"Animator",it:function(){return this.et(),new o(this.m,Array.prototype.slice.call(arguments))},V:function(){return{m:this.m}},et:function(){if(!this.m)throw Error("ActionQueue is required")}},o.prototype={every:function(t){return this.interval=t,this},nt:function(t){return this.tt=t,this},play:function(){var t=function(){this.tt()&&(this.Z[this.$](),this.$=(this.$+1)%this.Z.length,this.m.defer(this.interval,t))}.bind(this);return t(),this},stop:function(){return this.nt(function(){return!1})}},i.t=n},{}],4:[function(t,i,e){function n(t){t&&(this.m=t.m,this.ot=t.ot||250,this.rt=new r({m:this.m,timeout:500,name:"mouseTouchSwitch"}),this.st=t),this.ht=0,this.ut=0,this.at=!1,this.ct=[]}var o=t("./utils"),r=t("./ModeSwitch"),s=new(t("./Logger"))("Component");n.prototype={lt:function(){},ft:function(){},dt:function(){},className:"",V:function(){return this.st},j:function(t){this.gt(),this.wt=t,t.addEventListener("mouseup",function(t){s.debug("mouseup",o.pt(t)),this.rt.vt("mouse",function(t){this.bt(t.Et)}.bind(this))}.bind(this)),t.addEventListener("touchend",function(t){s.debug("touchend",o.pt(t)),this.rt.vt("touch",function(t){this.bt(t.Et)}.bind(this))}.bind(this)),t.addEventListener("mousedown",function(t){t=o.pt(t),s.debug("mousedown",t),this.rt.Ct("mouse",function(){return this.At(t),{Et:t}}.bind(this))}.bind(this)),t.addEventListener("touchstart",function(t){t=o.pt(t),s.debug("touchstart",t),this.rt.Ct("touch",function(){return this.At(t),{Et:t}}.bind(this))}.bind(this)),t.addEventListener("keyup",function(t){t=o.pt(t),s.debug("keyup",t),13===t.keyCode&&this.dt(t)}.bind(this)),this.Nt()&&(t.innerHTML=this.Nt()),this._t(t)},Nt:function(){return null},_t:function(t){},yt:function(t){return this.ct.push(t),this},remove:function(){this.ct.forEach(function(t){t(this)}.bind(this)),this.wt.remove(),s.debug("closed component",this)},gt:function(){if(!this.m)throw Error("actionQueue is required");if(!this.className)throw new Error("Must override className")},bt:function(t){this.ut++,this.at?this.at=!1:this.lt(t)},At:function(t){var i=++this.ht;this.m.defer(this.ot,function(){this.ht===i&&this.ut===this.ht-1&&(this.at=!0,this.ft(t))}.bind(this))}},i.t=n},{Lt:6,Mt:7,Ot:32}],5:[function(t,i,e){function n(t){this.document=t&&t.document,this.m=t&&t.m,this.St=t&&t.St}t("./utils");var o=t("./geometry/Position"),r=t("./Component"),s=t("./utils/Literal");n.prototype={className:"ComponentManager",V:function(){return{document:new s("global.document"),m:this.m,St:this.St}},Rt:function(t){var i=new((t=Object.assign({position:new o({xt:{x:0,y:0}}),Dt:void 0,Pt:r,st:void 0},t)).Pt)(Object.assign({},this.St,t.st)),e=this.document.createElement("div");if(t.position&&(e.style=t.position.Bt()),"function"==typeof t.Dt){var n=this.m.H(function(){e.style=t.Dt().Bt({width:e.offsetWidth,height:e.offsetHeight})}.bind(this));i.yt(n.cancel.bind(n))}return this.document.body.insertBefore(e,this.document.body.firstChild),i.j(e),i}},i.t=n},{zt:4,It:14,Ot:32,J:33}],6:[function(t,i,e){(function(t){function e(t){this.name=t||"Logger"}var n=["DEBUG","INFO","WARN","ERROR"];e.level="WARN",e.jt={},e.prototype={debug:function(t,i){this.qt.apply(this,[(new Date).getTime(),"DEBUG",this.name].concat(Array.prototype.splice.call(arguments,0)))},info:function(t,i){this.qt.apply(this,[(new Date).getTime(),"INFO",this.name].concat(Array.prototype.splice.call(arguments,0)))},warn:function(t,i){this.qt.apply(this,[(new Date).getTime(),"WARN",this.name].concat(Array.prototype.splice.call(arguments,0)))},error:function(t,i){this.qt.apply(this,[(new Date).getTime(),"ERROR",this.name].concat(Array.prototype.splice.call(arguments,0)))},qt:function(){var i=arguments[1],o=e.jt[this.name]||e.level;n.indexOf(i)>=n.indexOf(o)&&t.console.log.apply(t.console.log,arguments)}},i.t=e}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],7:[function(t,i,e){function n(t){this.m=t&&t.m,this.timeout=t&&t.timeout||0,this.Gt=t&&t.Tt||{},this.name=t&&t.name||"ModeSwitch",this.Ut=null,this.Ft=null,o.debug("Initialized "+this.name,this)}var o=new(t("./Logger"))("ModeSwitch");n.prototype={className:"ModeSwitch",V:function(){return{m:this.m,timeout:this.timeout,Tt:this.Gt,name:this.name}},Ct:function(t,i){if(this.kt(),this.Qt(t)){o.debug(this.name+": Entering '"+t+"'",this);var e=(i||function(){})();this.Gt[t]=e,this.Ut=t,this.Xt()}else o.debug(this.name+": Not entering '"+t+"'; active mode is "+this.Ut,this);return this},vt:function(t,i){return this.kt(),this.Kt(t)?(o.debug(this.name+": Exiting "+t,this),(i||function(){})(this.Gt[t]),this.Wt()):o.debug(this.name+": Not exiting '"+t+"'; active mode is "+this.Ut,this),this},Ht:function(t){var i=this.Ut||"default",e=t[i];return e?(o.debug(this.name+": Found callback for active mode",i,t),e(this.Gt[this.Ut||"default"])):o.debug(this.name+": No callback for active mode",i,t),this},Qt:function(t){return!this.Ut||this.Kt(t)},Kt:function(t){return this.Ut===t},Xt:function(){this.Ft&&this.Ft.cancel()},Wt:function(){var t=function(){delete this.Gt[this.Ut],this.Ut=null}.bind(this);this.Xt(),this.timeout?this.Ft=this.m.defer(this.timeout,t):t()},kt:function(){if(this.timeout&&!this.m)throw new Error("action queue is required if a timeout is specified")}},i.t=n},{Lt:6}],8:[function(t,i,e){i.t={Yt:"#db190f",Vt:"#f76402",Jt:"#fbff14",Zt:"#28b92b",$t:"#2826b5",ti:"#2980B9",ii:"#8c28b7",ei:"#00FF00",ni:["#db190f","#f76402","#fbff14","#28b92b","#2826b5","#2980B9","#8c28b7"]}},{}],9:[function(t,i,e){function n(t){o.apply(this,arguments),this.text=t&&t.text}var o=t("../Component");n.prototype=Object.assign(new o,{className:"BlockText",Nt:function(){return this.text&&"<p>"+this.text+"</p>"}}),i.t=n},{oi:4}],10:[function(t,i,e){function n(t){o.apply(this,arguments),this.g=t&&t.g,this.ri=t&&t.ri,this.I=t&&t.I,this.width=t&&t.width,this.height=t&&t.height,this.v=t.v}var o=t("../Component");t("../utils"),new(t("../Logger"))("GraphComponent");n.prototype=Object.assign(new o,{className:"GraphComponent",_t:function(t){this.I.initialize({wt:t,width:this.width,height:this.height})},lt:function(t){var i=this.g.si(t,this.v);this.ri.hi({Ht:function(t){i.ui()&&i.id!==t.id?this.I.ai(t,i):this.ri.ci()}.bind(this),li:function(){i.ui()?this.I.fi(i):this.I.di()}.bind(this)})},ft:function(t){var i=this.g.si(t,this.v);i.ui()&&this.ri.gi(i)},reset:function(){this.I.reset(),this.ri.ci()},gt:function(){if(o.prototype.gt.call(this,arguments),!this.g)throw new Error("adapter is required");if(!this.ri)throw new Error("edit mode is required");if(!this.I)throw new Error("graph is required")}}),i.t=n},{oi:4,wi:6,pi:32}],11:[function(t,i,e){function n(t){o.apply(this,arguments),this.mi=t?t.mi:[]}var o=t("../Component");n.prototype=Object.assign(new o,{className:"ResetButton",lt:function(t){this.mi.forEach(function(t){t.reset()})}}),i.t=n},{oi:4}],12:[function(t,i,e){function n(t){o.apply(this,arguments),this.vi=t&&t.text||"",this.bi=t&&t.bi||function(){}}var o=t("../Component");n.prototype=Object.assign(new o,{className:"TextBox",Nt:function(){return'<input type="text" value="'+this.vi+'"></input>'},Ei:function(){return this.wt.getElementsByTagName("input")[0].value},dt:function(t){this.bi()}}),i.t=n},{oi:4}],13:[function(t,i,e){function n(t){this.dimensions=t||{left:0,top:0,right:0,bottom:0}}n.prototype={className:"BoundingBox",V:function(){return this.dimensions},Ci:function(t){return new n({left:this.dimensions.left-this.Ai()*t,right:this.dimensions.right+this.Ai()*t,top:this.dimensions.top-this.Ni()*t,bottom:this.dimensions.bottom+this.Ni()*t})},translate:function(t){return new n({left:this.dimensions.left+t.x,right:this.dimensions.right+t.x,top:this.dimensions.top+t.y,bottom:this.dimensions.bottom+t.y})},contains:function(t){return this.dimensions.left<=t.x&&t.x<=this.dimensions.right&&this.dimensions.top<=t.y&&t.y<=this.dimensions.bottom},_i:function(){return{x:this.dimensions.left+this.Ai()/2,y:this.dimensions.top+this.Ni()/2}},yi:function(){return{x:this.dimensions.left,y:this.dimensions.top}},Li:function(){return{x:this.dimensions.right,y:this.dimensions.top}},Mi:function(){return{x:this.dimensions.left,y:this.dimensions.bottom}},Oi:function(){return{x:this.dimensions.right,y:this.dimensions.bottom}},Ai:function(){return this.dimensions.right-this.dimensions.left},Ni:function(){return this.dimensions.bottom-this.dimensions.top}},i.t=n},{}],14:[function(t,i,e){function n(t){if(!o.Si(t))throw new Error("invalid position object "+t);Object.assign(this,t)}var o=t("../utils");n.prototype={className:"Position",V:function(){return this},Bt:function(t){if(t=Object.assign({width:0,height:0},t),this.xt)return"position: absolute; left: "+this.xt.x+"; top: "+this.xt.y+";";if(this.Ri)return"position: absolute; left: "+(this.Ri.x-t.width)+"; top: "+this.Ri.y+";";if(this.Pi)return"position: absolute; left: "+this.Pi.x+"; top: "+(this.Pi.y-t.height)+";";if(this.xi)return"position: absolute; left: "+(this.xi.x-t.width)+"; top: "+(this.xi.y-t.height)+";";throw new Error("invalid position object: "+this)}},i.t=n},{pi:32}],15:[function(t,i,e){function n(){}var o=t("../utils");n.prototype={className:"ColorChanger",V:function(){return{}},setColor:function(t){var i=o.Di(t,"adapter"),e=o.Di(t,"state"),n=o.Di(t,"node"),r=o.Di(t,"color");i.Bi(n,r),e.zi({id:n.id,color:r})}},i.t=n},{pi:32}],16:[function(t,i,e){function n(){}var o=t("../utils");n.prototype={className:"EdgeCreator",V:function(){return{}},ai:function(t){var i=o.Di(t,"adapter"),e=o.Di(t,"state"),n=o.Di(t,"source"),r=o.Di(t,"target"),s=t.Ii;i.ai({source:n,target:r,ji:s}),e.qi(n.id,r.id)}},i.t=n},{pi:32}],17:[function(t,i,e){function n(t){this.state=t&&t.state,this.g=t&&t.g,this.m=t&&t.m,this.Gi=t&&t.Gi,this.Ti=t&&t.Ti||new h,this.Ui=t&&t.Ui||new u,this.Fi=t&&t.Fi||new a,this.S=t&&t.S||r.ki(o.ni,o.ti),this.Qi=t&&t.Qi,this.Ii=t&&t.Ii,this.R=t&&t.R||[],this.D=t&&t.D||[],this.st=t}var o=t("../colors"),r=t("../utils"),s=t("../Logger"),h=t("./NodeCreator"),u=t("./EdgeCreator"),a=t("./ColorChanger"),c=new s("Graph");n.prototype={className:"Graph",V:function(){return Object.assign({R:this.state.P(),D:this.state.B()},this.st)},initialize:function(t){this.kt(),c.debug("initializing graph",this),this.g.initialize(t.wt,r.Xi({width:t.width,height:t.height,Ki:this.R.map(function(t){return r.Xi({id:t.id,color:t.color||this.S[0],label:"",size:this.Qi},{Wi:["id","label"]})}.bind(this)),Hi:this.D,Ii:this.Ii})),this.m.defer(function(){c.debug("initializing label set"),this.Gi.initialize(this.R.map(function(t){return{Yi:this.g.Vi(t.id),label:t.label}}.bind(this)))}.bind(this))},di:function(){this.Ti.di({state:this.state,g:this.g,color:this.S[0],Qi:this.Qi})},fi:function(t){var i=this.Ji(t),e=this.S[i];this.Fi.setColor({g:this.g,state:this.state,Yi:t,color:e})},ai:function(t,i){this.Ui.ai({source:t,target:i,g:this.g,state:this.state,Ii:this.Ii})},reset:function(){c.debug("resetting"),this.g.Zi(function(){this.state.P().forEach(function(t){this.g.removeNode(t)}.bind(this))}.bind(this)),this.state.reset(),this.Gi.$i()},Ji:function(t){return(this.S.indexOf(t.color)+1)%this.S.length},kt:function(){if(!this.state)throw new Error("state is required");if(!this.g)throw new Error("adapter is required");if(!this.m)throw new Error("actionQueue is required");if(!this.Gi)throw new Error("labelSet is required");if(!this.Ti)throw new Error("nodeCreator is required");if(!this.Ui)throw new Error("edgeCreator is required")}},i.t=n},{wi:6,te:8,pi:32,ie:15,ee:16,ne:22}],18:[function(t,i,e){function n(t){this.p=t&&t.p,this.oe=!1}var o=t("./graphelements"),r=t("../utils"),s=t("../geometry/BoundingBox"),h=t("../utils/Literal"),u=new(t("../Logger"))("GreulerAdapter");n.prototype={className:"GreulerAdapter",V:function(){return{p:new h("global.greuler")}},initialize:function(t,i){i=i||{},this.re=this.p(r.Xi({target:"#"+t.id,width:i.width,height:i.height,data:r.Xi({Ki:i.Ki&&i.Ki.map(this.se),links:i.Hi,he:i.Ii&&function(){return i.Ii}})})).update(),this.I=this.re.I},di:function(t){this.I.di(this.se(t));this.ue()},removeNode:function(t){this.I.removeNode(this.se(t));this.ue()},ai:function(t){this.I.ai(r.Xi({source:t.source.id,target:t.target.id,he:t.ji},{Wi:["source","target"]}));this.ue()},Bi:function(t,i){if(t.ae)t.ae.setAttribute("fill",i);else if(t.id){var e=this.I.Vi({id:t.id});this.ce(e).setAttribute("fill",i)}else u.error("Got unexpected target node",t)},si:function(t,i){return this.le(t,i)||o.NONE},Vi:function(t){return u.debug("retrieving node",t),this.fe(function(i){return i.id===t})[0]},fe:function(t){return t=t||function(){return!0},this.I.de(t).map(function(t){var i=this.ce(t);return new o.Node({id:t.id,ge:t,ae:i,color:i.getAttribute("fill"),we:this.pe.bind(this,t)})}.bind(this))},Zi:function(t){this.oe=!0,t(this),this.oe=!1,this.ue()},se:function(t){return r.Xi({id:t.id,fill:t.color,label:t.label||"",r:t.size},{Wi:["id","label"]})},ce:function(t){u.debug("retrieving dom element for node: "+t.index,this.re);var i=this.re.me[0][0].childNodes;return u.debug(i),i[t.index].getElementsByTagName("circle")[0]},le:function(t,i){i=i||0;var e={x:t.clientX,y:t.clientY},n=this.fe(function(t){return this.pe(t).Ci(i).contains(e)}.bind(this));return n&&n.length?(n.sort(function(t,i){return r.ji(t._i(),e)-r.ji(i._i(),e)}),n[0]):void 0},ue:function(){this.oe||(this.re=this.re.update())},pe:function(t){var i=this.re.root[0][0].getBoundingClientRect();return new s({left:t.bounds.x,right:t.bounds.ve,top:t.bounds.y,bottom:t.bounds.be}).translate({x:i.left,y:i.top})}},i.t=n},{wi:6,Ee:13,pi:32,Ce:33,Ae:23}],19:[function(t,i,e){function n(){}n.prototype={className:"NoOpColorChanger",V:function(){return{}},setColor:function(){}},i.t=n},{}],20:[function(t,i,e){function n(){}n.prototype={className:"NoOpEdgeCreator",V:function(){return{}},ai:function(){}},i.t=n},{}],21:[function(t,i,e){function n(){}n.prototype={className:"NoOpNodeCreator",V:function(){return{}},di:function(){}},i.t=n},{}],22:[function(t,i,e){function n(){}var o=t("../utils");n.prototype={className:"NodeCreator",V:function(){return{}},di:function(t){var i=o.Di(t,"state"),e=o.Di(t,"adapter"),n=o.Di(t,"color"),r=t.Qi,s=i.zi({color:n}),h=o.Xi({id:s,color:n,label:"",size:r},{Wi:["id","label"]});e.di(h)}},i.t=n},{pi:32}],23:[function(t,i,e){function n(t){t&&(this.id=t.id,this.ae=t.ae)}function o(t){n.apply(this,arguments),t&&(this.ge=t.ge,this.color=t.color,this.we=t.we)}function r(){n.apply(this,arguments)}function s(){n.apply(this,arguments)}n.prototype={ui:function(){return!1},Ne:function(){return!1}},o.prototype=Object.assign(new n,{ui:function(){return!0},_i:function(){return this.we()._i()},yi:function(){return this.we().yi()},Li:function(){return this.we().Li()},Mi:function(){return this.we().Mi()},Oi:function(){return this.we().Oi()}}),r.prototype=Object.assign(new n,{Ne:function(){return!0}}),s.prototype=Object.assign(new n,{}),i.t={Node:o,_e:r,NONE:new s}},{}],24:[function(t,i,e){t("./GreulerAdapter");var n=t("./ColorChanger"),o=t("./EdgeCreator"),r=t("./NodeCreator"),s=t("./NoOpColorChanger"),h=t("./NoOpEdgeCreator"),u=t("./NoOpNodeCreator"),a=t("./Graph"),c=t("../modes/DisallowedEditMode"),l=t("../modes/EditMode"),f=t("../modes/NonAnimatingEditMode"),d=t("../labels/EmptyLabelSet"),g=t("../labels/NodeLabelSet"),w=t("../components/GraphComponent"),p=t("../Animator"),m=t("../ComponentManager"),v=t("../utils"),b=new(t("../Logger"))("graphfactory");i.t={ye:function(t){return t=Object.assign({A:!1,N:!0,_:!0,L:!0,O:!0},t),b.debug("instantiating graph",t),new a({m:v.Di(t,"actionQueue"),g:v.Di(t,"adapter"),S:t.S,Fi:this.Le(t),Ui:this.Me(t),Ii:t.Ii,R:t.R,D:t.D,Gi:this.Oe(t),Ti:this.Se(t),Qi:t.Qi,state:v.Di(t,"state")})},l:function(t){t=Object.assign({A:!1,N:!0,_:!0,L:!0,O:!0,M:!0,v:.1,C:250,size:"large"},t),b.debug("instantiating graph component",t);var i=this.Re(t),e=this.Oe(t);return new w(Object.assign({I:this.ye(Object.assign({Gi:e,Qi:i.Qi,Ii:i.Ii},t)),g:v.Di(t,"adapter"),ri:this.Pe(t,e),width:i.width,height:i.height,v:t.v},this.xe(t)))},De:function(t){return new m({m:v.Di(t,"actionQueue"),St:this.xe(t),document:v.Di(t,"document")})},xe:function(t){return{m:v.Di(t,"actionQueue")}},Le:function(t){return t.A||!t.L?new s:new n},Me:function(t){return t.A||!t._?new h:new o},Se:function(t){return t.A||!t.N?new u:new r},Pe:function(t,i){return t.A||!t.M?new c:t._?new l({g:v.Di(t,"adapter"),Be:new p({m:v.Di(t,"actionQueue")}),Gi:i,C:t.C}):new f({g:v.Di(t,"adapter"),Gi:i,C:t.C})},Oe:function(t){return t.O?new g({ze:t.ze||this.De(t),state:t.state}):new d},Re:function(t){var i=t.width&&t.height;return i||"fullscreen"!=t.size?i||"large"!==t.size?i||"wide"!==t.size?i||"small"!==t.size?{width:v.Di(t,"width"),height:v.Di(t,"height"),Qi:t.Qi||10,Ii:t.Ii||100}:this.Ie(t):this.je(t):this.qe(t):this.Ge(t)},Ge:function(t){var i=v.Di(t,"window"),e=v.Di(t,"screen"),n=i.innerWidth>0?i.innerWidth:e.width,o=i.innerHeight>0?i.innerHeight:e.height;return{width:n,height:o,Qi:this.Te(n,o),Ii:this.Ue(n)}},qe:function(t){var i=v.Di(t,"window"),e=v.Di(t,"screen"),n=i.innerWidth>0?i.innerWidth:e.width,o=i.innerHeight>0?i.innerHeight:e.height,r=n>700?700:300;return{width:r,height:t.height||r,Qi:this.Te(n,o),Ii:this.Ue(n)}},je:function(t){var i=v.Di(t,"window"),e=v.Di(t,"screen"),n=i.innerWidth>0?i.innerWidth:e.width,o=i.innerHeight>0?i.innerHeight:e.height,r=n<1e3?n:1e3;return{width:r,height:t.height||r/2,Qi:this.Te(n,o),Ii:this.Ue(n)}},Ie:function(t){var i=v.Di(t,"window"),e=v.Di(t,"screen"),n=i.innerWidth>0?i.innerWidth:e.width,o=i.innerHeight>0?i.innerHeight:e.height;return{width:300,height:t.height||500,Qi:this.Te(n,o),Ii:this.Ue(n)}},Te:function(t,i){return t>700?10:Math.min(t,i)/18},Ue:function(t){return t>700?100:200}}},{Fe:3,ke:5,wi:6,Qe:10,Xe:26,Ke:27,We:28,He:29,Ye:30,pi:32,ie:15,ee:16,Ve:17,Je:18,Ze:19,$e:20,tn:21,ne:22}],25:[function(t,i,e){function n(t){t&&(this.ze=t.ze,this.text=t.text,this.Dt=t.Dt,this.in=new o({name:"EditableLabel({ text: '"+this.text+"'})"}),this.en=t.en||function(){})}var o=t("../ModeSwitch"),r=t("../components/BlockText"),s=t("../components/TextBox"),h=new(t("../Logger"))("EditableLabel");n.prototype={className:"EditableLabel",V:function(){return{ze:this.ze,text:this.text,Dt:this.Dt,en:this.en}},display:function(){return h.debug("displaying text",this.text),this.kt(),this.in.vt("edit",function(t){this.text=t.nn.Ei(),t.nn.remove(),h.debug("got text from input component",this.text)}.bind(this)).vt("display",function(t){t.nn.remove()}),this.text&&this.in.Ct("display",function(){var t=this.ze.Rt({Pt:r,st:{text:this.text},Dt:this.Dt});return this.en(this.text),h.debug("EditableLabel: displaying component with text",this.text),{nn:t}}.bind(this)),this},on:function(){return h.debug("editing text",this.text),this.kt(),this.in.vt("display",function(t){t.nn.remove(),h.debug("closed display component")}.bind(this)).vt("edit",function(t){t.nn.remove()}),this.in.Ct("edit",function(){var t=this.ze.Rt({Pt:s,st:{text:this.text,bi:this.display.bind(this)},Dt:this.Dt});return h.debug("opened edit component"),{nn:t}}.bind(this)),this},kt:function(){if(!this.ze)throw new Error("componentManager is required");if(!this.in)throw new Error("modeSwitch is required")},remove:function(){return h.debug("removing",this),this.in.vt("display",function(t){t.nn.remove(),h.debug("closed display component")}).vt("edit",function(t){t.nn.remove(),h.debug("closed edit component")}),this},rn:function(t){t.nn.remove()}},n.sn={create:function(t){return new n(t)}},i.t=n},{wi:6,hn:7,un:9,an:12}],26:[function(t,i,e){function n(){}n.prototype={className:"EmptyLabelSet",V:function(){return{}},initialize:function(){},on:function(){},display:function(){},$i:function(){}},i.t=n},{}],27:[function(t,i,e){function n(t){this.ze=t&&t.ze,this.state=t&&t.state,this.cn=t&&t.cn||r.sn,this.labels={}}var o=t("../geometry/Position"),r=t("./EditableLabel"),s=new(t("../Logger"))("NodeLabelSet");n.prototype={className:"NodeLabelSet",V:function(){return{ze:this.ze,state:this.state}},initialize:function(t){s.debug("initializing",t),t.filter(function(t){return!!t.label}).forEach(function(t){var i=this.ln(t.Yi,t.label);this.labels[t.Yi.id]=i,i.display()}.bind(this))},on:function(t){s.debug("editing label for node "+t.id),this.fn(t).on()},display:function(t){s.debug("displaying label for node "+t.id),this.fn(t).display()},$i:function(){s.debug("closing all labels",this.labels),Object.values(this.labels).forEach(function(t){t.remove()}),this.labels={}},fn:function(t){var i;return this.labels[t.id]?(i=this.labels[t.id],s.info("reusing existing label for node "+t.id,i)):(i=this.ln(t),this.labels[t.id]=i,s.info("created new label for node "+t.id,i)),i},ln:function(t,i){return s.debug("Creating label",t),this.cn.create({text:i,ze:this.ze,Dt:function(){return new o({xi:t.we().yi()})},en:function(i){s.debug("saving label",t,i),this.state.zi({id:t.id,label:i})}.bind(this)})},kt:function(){if(!this.ze)throw new Error("componentManager is required");if(!this.state)throw new Error("state is required")}},i.t=n},{wi:6,dn:14,gn:25}],28:[function(t,i,e){function n(){o.apply(this,arguments)}var o=t("./EditMode");n.prototype=Object.assign(new o,{className:"DisallowedEditMode",gi:function(){},kt:function(){}}),i.t=n},{wn:29}],29:[function(t,i,e){function n(t){this.g=t&&t.g,this.Be=t&&t.Be,this.C=t&&t.C||250,this.Gi=t&&t.Gi,this.in=t&&t.in||new o({name:"editMode"}),this.in.Ct("display")}var o=t("../ModeSwitch"),r=t("../colors"),s=new(t("../Logger"))("EditMode");n.prototype={className:"EditMode",V:function(){return{g:this.g,Be:this.Be,C:this.C,Gi:this.Gi,in:this.in}},gi:function(t){s.info("activating"),this.kt(),this.in.vt("display").vt("edit",this.pn.bind(this)).Ct("edit",function(){var i=this.g.fe(function(i){return i.id!==t.id}),e=i.reduce(function(t,i){return t[i.id]=i.color,t},{}),n=this.mn(i,e);this.Gi.on(t);var o={Yi:t,animation:n,vn:i,bn:e};return s.debug("activated",o),o}.bind(this))},ci:function(){s.debug("deactvating"),this.kt(),this.in.vt("edit",this.pn.bind(this)).Ct("display",function(){s.debug("deactvated")})},hi:function(t){t=Object.assign({Ht:function(){},li:function(){}},t),this.kt(),this.in.Ht({on:function(i){t.Ht(i.Yi)},display:t.li})},En:function(t){t.forEach(function(t){this.g.Bi(t,r.ei)}.bind(this))},Cn:function(t,i){t.forEach(function(t){this.g.Bi(t,i[t.id])}.bind(this))},pn:function(t){s.debug("cleaning up edit mode state",t),t.animation.stop(),this.Gi.display(t.Yi),this.Cn(t.vn,t.bn)},mn:function(t,i){return this.Be.it(this.En.bind(this,t),this.Cn.bind(this,t,i)).every(this.C).play()},kt:function(){if(!this.g)throw new Error("adapter is required");if(!this.Be)throw new Error("animator is required");if(!this.in)throw new Error("modeSwitch is required")}},i.t=n},{wi:6,hn:7,te:8}],30:[function(t,i,e){function n(){o.apply(this,arguments)}var o=t("./EditMode"),r=new(t("../Logger"))("NonAnimatingEditMode");n.prototype=Object.assign(new o,{className:"NonAnimatingEditMode",mn:function(){return r.debug("not animating for edit mode"),{stop:function(){}}},kt:function(){if(!this.g)throw new Error("adapter is required");if(!this.in)throw new Error("modeSwitch is required")}}),i.t=n},{wi:6,wn:29}],31:[function(t,i,e){function n(t){this.o=t&&t.o,this.s=t&&t.s,this.h=t&&t.h}var o=t("../utils"),r=t("../utils/Literal"),s=new(t("../Logger"))("UrlState");NUM_NODES_PARAM="n",COLOR_PARAM_PREFIX="c_",EDGE_PARAM_PREFIX="e_",LABEL_PARAM_PREFIX="l_",n.prototype={className:"UrlState",V:function(){return{o:this.o,s:new r("window.history.replaceState.bind(window.history, {}, '')"),h:new r("new URLSearchParams(window.location.search)")}},zi:function(t){var i;return(t=t||{}).hasOwnProperty("id")&&null!==t.id&&void 0!==t.id?i=t.id:(i=this.An(),this.h.set(NUM_NODES_PARAM,i+1)),t.color&&this.Nn(i,t.color),t.label&&this._n(i,t.label),this.yn(),i},Ln:function(t){var i=this.Mn(t),e=this.On().find(function(t){return this.Sn({Rn:i,Pn:t})}.bind(this)),n=this.h.get(LABEL_PARAM_PREFIX+t);return o.Xi({id:t,color:e&&e.replace(COLOR_PARAM_PREFIX,"#"),label:n&&decodeURIComponent(n)},{Wi:"id"})},qi:function(t,i){var e,n=EDGE_PARAM_PREFIX+t;e=this.h.has(n)?this.xn(n)|this.Mn(i):this.Mn(i),this.Dn(n,e),this.yn()},P:function(){var t=[];if(this.h.has(NUM_NODES_PARAM))for(var i=0;i<this.h.get(NUM_NODES_PARAM);i++)t.push(this.Ln(i));return t},B:function(){return this.Bn().map(function(t){for(var i=parseInt(t.replace(EDGE_PARAM_PREFIX,"")),e=[],n=this.xn(t),o=n.toString(2).length,r=0;r<o;r++){var s=this.Mn(r);(n&s)===s&&e.push({source:i,target:r})}return e}.bind(this)).reduce(function(t,i){return t.concat(i)},[])},_n:function(t,i){this.h.set(LABEL_PARAM_PREFIX+t,encodeURIComponent(i))},zn:function(){return this.o+"?"+this.h.toString()},reset:function(){s.debug("resetting"),this.In().forEach(function(t){this.h.delete(t)}.bind(this)),this.yn()},Sn:function(t){return t=this.jn(t),!!this.h.has(t.Pn)&&(this.xn(t.Pn)&t.Rn)===t.Rn},qn:function(t){t=this.jn(t);var i;i=this.h.has(t.Pn)?this.xn(t.Pn)|t.Rn:t.Rn,this.Dn(t.Pn,i)},Gn:function(t){if(t=this.jn(t),!this.h.has(t.Pn))throw Error("Attempted to remove color "+t.Pn);var i=this.xn(t.Pn)&~t.Rn;0===i?this.h.delete(t.Pn):this.Dn(t.Pn,i)},xn:function(t){return parseInt(this.h.get(t),16)},Dn:function(t,i){this.h.set(t,i.toString(16))},Mn:function(t){return t<=30?1<<t:Math.pow(2,t)},jn:function(t){if(!t.hasOwnProperty("bit")&&!t.hasOwnProperty("nodeId"))throw Error("bit or nodeId is required");if(!t.hasOwnProperty("color")&&!t.hasOwnProperty("colorKey"))throw Error("color or colorKey is required");return{Rn:t.hasOwnProperty("bit")?t.Rn:this.Mn(t.Tn),Pn:t.hasOwnProperty("colorKey")?t.Pn:t.color.replace("#",COLOR_PARAM_PREFIX)}},On:function(){return this.In(function(t){return t.startsWith(COLOR_PARAM_PREFIX)})},Bn:function(){return this.In(function(t){return t.startsWith(EDGE_PARAM_PREFIX)})},In:function(t){t=t||function(){return!0};for(var i=[],e=this.h.keys(),n=e.next();!n.done;)t(n.value)&&i.push(n.value),n=e.next();return i},An:function(){return this.h.has(NUM_NODES_PARAM)?parseInt(this.h.get(NUM_NODES_PARAM)):0},Nn:function(t,i){var e=this.Mn(t);this.On().forEach(function(t){this.Sn({Rn:e,Pn:t})&&this.Gn({Rn:e,Pn:t})}.bind(this)),this.qn({Rn:e,color:i})},yn:function(){this.s(this.zn())}},i.t=n},{wi:6,pi:32,Ce:33}],32:[function(t,i,e){function n(t,i){function e(t){return" ".repeat(i)+t}function s(t){return" ".repeat(i+2)+t}return i=i||0,t instanceof r?t.value:Array.isArray(t)?"[\n"+t.map(function(t){return n(t,i+2)+","}).map(s).join("\n")+"\n"+e("]"):t&&t.className&&t.V?"new "+t.className+"({\n"+Object.keys(t.V()).map(function(e){return e+": "+n(t.V()[e],i+2)+","}).map(s).join("\n")+"\n"+e("})"):t&&"object"==typeof t?"{\n"+Object.keys(t).map(function(e){return e+": "+n(t[e],i+2)+","}).map(s).join("\n")+"\n"+e("}"):t&&"string"==typeof t?"'"+o(t,"'","\\'")+"'":t||0===t?t.toString():"null"}function o(t,i,e){return t.split(i).join(e)}var r=t("./utils/Literal");i.t={ji:function(t,i){var e=t.x-i.x,n=t.y-i.y;return Math.sqrt(e*e+n*n)},Xi:function(t,i){var e={};return Object.keys(t).forEach(function(i){t[i]&&(e[i]=t[i])}),i&&i.Wi&&(i.Wi.constructor===Array?i.Wi.forEach(function(i){e[i]=t[i]}):e[i.Wi]=t[i.Wi]),e},pt:function(t){return t&&t.touches&&t.touches.length?Object.assign(t,{clientX:t.touches[0].clientX,clientY:t.touches[0].clientY,screenX:t.touches[0].screenX,screenY:t.touches[0].screenY}):t},Si:function(t){return!(!t||"object"!=typeof t||Array.isArray(t))&&1===Object.keys(t).filter(function(i){return!!t[i]}).length},ki:function(t,i){var e=t.indexOf(i);if(e>=0){for(var n=[],o=e;o<t.length;o++)n.push(t[o]);for(o=0;o<e;o++)n.push(t[o]);return n}return t},Un:n,Fn:o,Di:function(t,i){if(!t[i])throw new Error("missing required property "+i);return t[i]}}},{J:33}],33:[function(t,i,e){i.t=function(t){this.value=t}},{}]},{},[1]);