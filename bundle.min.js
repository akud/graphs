!function t(i,e,n){function o(s,h){if(!e[s]){if(!i[s]){var u="function"==typeof require&&require;if(!h&&u)return u(s,!0);if(r)return r(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var a=e[s]={t:{}};i[s][0].call(a.t,function(t){var e=i[s][1][t];return o(e||t)},a,a.t,t,i,e,n)}return e[s].t}for(var r="function"==typeof require&&require,s=0;s<n.length;s++)o(n[s]);return o}({1:[function(t,i,e){(function(i){var e=t("./src/graphs/GreulerAdapter"),n=t("./src/state/UrlState"),o=t("./src/ActionQueue"),r=(t("./src/components/ResetButton"),t("./src/graphs/graphfactory"));t("./src/Logger").level=i.i;var s=new o,h=new URLSearchParams(window.location.search),u=new n({o:window.location.protocol+"//"+window.location.host+window.location.pathname,s:window.history.replaceState.bind(window.history,{},""),h:h}),c="true"===h.get("immutable"),a="false"!==h.get("allowAddNodes"),l="false"!==h.get("allowAddEdges"),d="false"!==h.get("allowEdit"),f="false"!==h.get("allowChangeColors"),g="false"!==h.get("allowLabels"),w="true"===h.get("directed");i.u=r.l({document:i.document,screen:i.screen,window:window,size:"fullscreen",g:new e({p:i.p}),m:s,state:u,v:.1,A:250,C:c,N:a,_:l,L:f,M:d,O:g,R:h.has("colorChoices")&&h.getAll("colorChoices").map(function(t){return 0===t.indexOf("#")?t:"#"+t}),S:w,P:u.I(),D:u.B()}),i.k=i.u.k,i.u.F(document.getElementById("main-graph"))}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{j:2,G:6,q:12,T:19,U:25,X:32}],2:[function(t,i,e){(function(e){function n(t){this.setTimeout=t&&t.setTimeout||e.setTimeout.bind(e),this.clearTimeout=t&&t.clearTimeout||e.clearTimeout.bind(e),this.K=t&&t.K||10,this.W=[],this.H=!1}var o=t("./utils/Literal");n.prototype={className:"ActionQueue",defer:function(t,i){1==arguments.length&&(i=t,t=1);var e=this.setTimeout(i,t);return{cancel:function(){this.clearTimeout(e)}.bind(this)}},Y:function(t){var i=this.W;return i.push(t),this.H||this.V(),{cancel:function(){i.splice(i.indexOf(t),1)}}},V:function(){var t=function(){this.W.forEach(function(t){t()}),this.setTimeout(t,this.K)}.bind(this);t(),this.H=!0},J:function(){return{setTimeout:new o("global.setTimeout.bind(global)"),clearTimeout:new o("global.clearTimeout.bind(global)"),K:this.K}}},i.t=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{Z:34}],3:[function(t,i,e){function n(t){this.m=t&&t.m}function o(t,i){this.m=t,this.$=i,this.tt=0,this.interval=100,this.it=function(){return!0}}n.prototype={className:"Animator",et:function(){return this.nt(),new o(this.m,Array.prototype.slice.call(arguments))},J:function(){return{m:this.m}},nt:function(){if(!this.m)throw Error("ActionQueue is required")}},o.prototype={every:function(t){return this.interval=t,this},ot:function(t){return this.it=t,this},play:function(){var t=function(){this.it()&&(this.$[this.tt](),this.tt=(this.tt+1)%this.$.length,this.m.defer(this.interval,t))}.bind(this);return t(),this},stop:function(){return this.ot(function(){return!1})}},i.t=n},{}],4:[function(t,i,e){function n(t){t&&(this.m=t.m,this.rt=t.rt||250,this.st=new r({m:this.m,timeout:500,name:"mouseTouchSwitch"}),this.ht=t),this.ut=0,this.ct=0,this.at=!1,this.lt=[]}var o=t("./utils"),r=t("./ModeSwitch"),s=new(t("./Logger"))("Component");n.prototype={dt:function(){},ft:function(){},gt:function(){},className:"",J:function(){return this.ht},F:function(t){this.wt(),this.pt=t,t.addEventListener("mouseup",function(t){s.debug("mouseup",o.Et(t)),this.st.vt("mouse",function(t){this.bt(t.At)}.bind(this))}.bind(this)),t.addEventListener("touchend",function(t){s.debug("touchend",o.Et(t)),this.st.vt("touch",function(t){this.bt(t.At)}.bind(this))}.bind(this)),t.addEventListener("mousedown",function(t){t=o.Et(t),s.debug("mousedown",t),this.st.Ct("mouse",function(){return this.Nt(t),{At:t}}.bind(this))}.bind(this)),t.addEventListener("touchstart",function(t){t=o.Et(t),s.debug("touchstart",t),this.st.Ct("touch",function(){return this.Nt(t),{At:t}}.bind(this))}.bind(this)),t.addEventListener("keyup",function(t){t=o.Et(t),s.debug("keyup",t),13===t.keyCode&&this.gt(t)}.bind(this)),this._t()&&(t.innerHTML=this._t()),this.Lt(t)},_t:function(){return null},Lt:function(t){},yt:function(t){return this.lt.push(t),this},remove:function(){this.lt.forEach(function(t){t(this)}.bind(this)),this.pt.remove(),s.debug("closed component",this)},wt:function(){if(!this.m)throw Error("actionQueue is required");if(!this.className)throw new Error("Must override className")},bt:function(t){this.ct++,this.at?this.at=!1:this.dt(t)},Nt:function(t){var i=++this.ut;this.m.defer(this.rt,function(){this.ut===i&&this.ct===this.ut-1&&(this.at=!0,this.ft(t))}.bind(this))}},i.t=n},{Mt:6,Ot:7,Rt:33}],5:[function(t,i,e){function n(t){this.document=t&&t.document,this.m=t&&t.m,this.St=t&&t.St}t("./utils");var o=t("./geometry/Position"),r=t("./Component"),s=t("./utils/Literal");n.prototype={className:"ComponentManager",J:function(){return{document:new s("global.document"),m:this.m,St:this.St}},Pt:function(t){var i=new((t=Object.assign({position:new o({It:{x:0,y:0}}),Dt:void 0,xt:r,ht:void 0},t)).xt)(Object.assign({},this.St,t.ht)),e=this.document.createElement("div");if(t.position&&this.zt(t.position,e),"function"==typeof t.Dt){var n=this.m.Y(function(){this.zt(t.Dt(),e)}.bind(this));i.yt(n.cancel.bind(n))}return this.document.body.insertBefore(e,this.document.body.firstChild),i.F(e),i},zt:function(t,i){var e=t.Bt({width:i.offsetWidth,height:i.offsetHeight});i.style.position="fixed",i.style.top=e.top+"px",i.style.left=e.left+"px"}},i.t=n},{kt:4,Ft:15,Rt:33,Z:34}],6:[function(t,i,e){(function(t){function e(t){this.name=t||"Logger"}var n=["DEBUG","INFO","WARN","ERROR"];e.level="WARN",e.jt={},e.prototype={debug:function(t,i){this.Gt.apply(this,[(new Date).getTime(),"DEBUG",this.name].concat(Array.prototype.splice.call(arguments,0)))},info:function(t,i){this.Gt.apply(this,[(new Date).getTime(),"INFO",this.name].concat(Array.prototype.splice.call(arguments,0)))},warn:function(t,i){this.Gt.apply(this,[(new Date).getTime(),"WARN",this.name].concat(Array.prototype.splice.call(arguments,0)))},error:function(t,i){this.Gt.apply(this,[(new Date).getTime(),"ERROR",this.name].concat(Array.prototype.splice.call(arguments,0)))},Gt:function(){var i=arguments[1],o=e.jt[this.name]||e.level;n.indexOf(i)>=n.indexOf(o)&&t.console.log.apply(t.console.log,arguments)}},i.t=e}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],7:[function(t,i,e){function n(t){this.m=t&&t.m,this.timeout=t&&t.timeout||0,this.qt=t&&t.Tt||{},this.name=t&&t.name||"ModeSwitch",this.Ut=null,this.Qt=null,o.debug("Initialized "+this.name,this)}var o=new(t("./Logger"))("ModeSwitch");n.prototype={className:"ModeSwitch",J:function(){return{m:this.m,timeout:this.timeout,Tt:this.qt,name:this.name}},Ct:function(t,i){if(this.Xt(),this.Kt(t)){o.debug(this.name+": Entering '"+t+"'",this);var e=(i||function(){})();this.qt[t]=e,this.Ut=t,this.Wt()}else o.debug(this.name+": Not entering '"+t+"'; active mode is "+this.Ut,this);return this},vt:function(t,i){return this.Xt(),this.Ht(t)?(o.debug(this.name+": Exiting "+t,this),(i||function(){})(this.qt[t]),this.Yt()):o.debug(this.name+": Not exiting '"+t+"'; active mode is "+this.Ut,this),this},Vt:function(t){var i=this.Ut||"default",e=t[i];return e?(o.debug(this.name+": Found callback for active mode",i,t),e(this.qt[this.Ut||"default"])):o.debug(this.name+": No callback for active mode",i,t),this},Kt:function(t){return!this.Ut||this.Ht(t)},Ht:function(t){return this.Ut===t},Wt:function(){this.Qt&&this.Qt.cancel()},Yt:function(){var t=function(){delete this.qt[this.Ut],this.Ut=null}.bind(this);this.Wt(),this.timeout?this.Qt=this.m.defer(this.timeout,t):t()},Xt:function(){if(this.timeout&&!this.m)throw new Error("action queue is required if a timeout is specified")}},i.t=n},{Mt:6}],8:[function(t,i,e){i.t={Jt:"#db190f",Zt:"#f76402",$t:"#fbff14",ti:"#28b92b",ii:"#2826b5",ei:"#2980B9",ni:"#8c28b7",oi:"#00FF00",ri:["#db190f","#f76402","#fbff14","#28b92b","#2826b5","#2980B9","#8c28b7"]}},{}],9:[function(t,i,e){function n(t){o.apply(this,arguments),this.text=t&&t.text}var o=t("../Component");n.prototype=Object.assign(new o,{className:"BlockText",_t:function(){return this.text&&"<p>"+this.text+"</p>"}}),i.t=n},{si:4}],10:[function(t,i,e){function n(t){o.apply(this,arguments),this.hi=t&&t.hi,this.k=t&&t.k,this.width=t&&t.width,this.height=t&&t.height}var o=t("../Component");t("../utils"),new(t("../Logger"))("GraphComponent");n.prototype=Object.assign(new o,{className:"GraphComponent",Lt:function(t){this.k.initialize({pt:t,width:this.width,height:this.height})},dt:function(t){var i=this.k.ui({x:t.clientX,y:t.clientY});this.hi.ci({Vt:function(t){i.ai()&&i.id!==t.id?this.k.li(t,i):this.hi.di()}.bind(this),fi:function(){i.ai()?this.k.gi(i):this.k.wi()}.bind(this)})},ft:function(t){var i=this.k.ui({x:t.clientX,y:t.clientY});i.ai()&&this.hi.pi(i)},reset:function(){this.k.reset(),this.hi.di()},wt:function(){if(o.prototype.wt.call(this,arguments),!this.hi)throw new Error("edit mode is required");if(!this.k)throw new Error("graph is required")}}),i.t=n},{si:4,mi:6,Ei:33}],11:[function(t,i,e){function n(t){o.apply(this,arguments),this.text=t&&t.text,this.link=t&&t.link}var o=t("../Component");n.prototype=Object.assign(new o,{className:"Link",_t:function(){return this.text&&this.link?'<a href="'+this.link+'">'+this.text+"</a>":null}}),i.t=n},{si:4}],12:[function(t,i,e){function n(t){o.apply(this,arguments),this.vi=t?t.vi:[]}var o=t("../Component");n.prototype=Object.assign(new o,{className:"ResetButton",dt:function(t){this.vi.forEach(function(t){t.reset()})}}),i.t=n},{si:4}],13:[function(t,i,e){function n(t){o.apply(this,arguments),this.bi=t&&t.text||"",this.Ai=t&&t.Ai||function(){}}var o=t("../Component");n.prototype=Object.assign(new o,{className:"TextBox",_t:function(){return'<input type="text" value="'+this.bi+'"></input>'},Ci:function(){return this.pt.getElementsByTagName("input")[0].value},gt:function(t){this.Ai()}}),i.t=n},{si:4}],14:[function(t,i,e){function n(t){this.dimensions=t||{left:0,top:0,right:0,bottom:0}}n.prototype={className:"BoundingBox",J:function(){return this.dimensions},Ni:function(t){return new n({left:this.dimensions.left-this._i()*t,right:this.dimensions.right+this._i()*t,top:this.dimensions.top-this.Li()*t,bottom:this.dimensions.bottom+this.Li()*t})},translate:function(t){return new n({left:this.dimensions.left+t.x,right:this.dimensions.right+t.x,top:this.dimensions.top+t.y,bottom:this.dimensions.bottom+t.y})},contains:function(t){return this.dimensions.left<=t.x&&t.x<=this.dimensions.right&&this.dimensions.top<=t.y&&t.y<=this.dimensions.bottom},yi:function(){return{x:this.dimensions.left+this._i()/2,y:this.dimensions.top+this.Li()/2}},Mi:function(){return{x:this.dimensions.left,y:this.dimensions.top}},Oi:function(){return{x:this.dimensions.right,y:this.dimensions.top}},Ri:function(){return{x:this.dimensions.left,y:this.dimensions.bottom}},Si:function(){return{x:this.dimensions.right,y:this.dimensions.bottom}},_i:function(){return this.dimensions.right-this.dimensions.left},Li:function(){return this.dimensions.bottom-this.dimensions.top}},i.t=n},{}],15:[function(t,i,e){function n(t){if(!o.Pi(t))throw new Error("invalid position object "+t);Object.assign(this,t)}var o=t("../utils");n.prototype={className:"Position",J:function(){return this},Bt:function(t){if(t=Object.assign({width:0,height:0},t),this.It)return{left:this.It.x,top:this.It.y};if(this.xi)return{left:this.xi.x-t.width,top:this.xi.y};if(this.Ii)return{left:this.Ii.x,top:this.Ii.y-t.height};if(this.Di)return{left:this.Di.x-t.width,top:this.Di.y-t.height};throw new Error("invalid position object: "+this)}},i.t=n},{Ei:33}],16:[function(t,i,e){function n(){}var o=t("../utils");n.prototype={className:"ColorChanger",J:function(){return{}},setColor:function(t){var i=o.zi(t,"adapter"),e=o.zi(t,"state"),n=o.zi(t,"node"),r=o.zi(t,"color");i.Bi(n,r),e.ki({id:n.id,color:r})}},i.t=n},{Ei:33}],17:[function(t,i,e){function n(){}var o=t("../utils");n.prototype={className:"EdgeCreator",J:function(){return{}},li:function(t){var i=o.zi(t,"adapter"),e=o.zi(t,"state"),n=o.zi(t,"source"),r=o.zi(t,"target"),s=t.Fi,h=t.S;i.li({source:n,target:r,ji:s,S:h}),e.Gi(n.id,r.id)}},i.t=n},{Ei:33}],18:[function(t,i,e){function n(t){this.state=t&&t.state,this.g=t&&t.g,this.m=t&&t.m,this.qi=t&&t.qi,this.Ti=t&&t.Ti||new h,this.Ui=t&&t.Ui||new u,this.Qi=t&&t.Qi||new c,this.R=t&&t.R||r.Xi(o.ri,o.ei),this.Ki=t&&t.Ki,this.Fi=t&&t.Fi,this.P=t&&t.P||[],this.D=t&&t.D||[],this.v=t&&t.v||0,this.S=!(!t||!t.S),this.ht=t}var o=t("../colors"),r=t("../utils"),s=t("../Logger"),h=t("./NodeCreator"),u=t("./EdgeCreator"),c=t("./ColorChanger"),a=new s("Graph");n.prototype={className:"Graph",J:function(){return Object.assign({P:this.state.I(),D:this.state.B()},this.ht)},initialize:function(t){this.Xt(),a.debug("initializing graph",this),this.g.initialize(t.pt,r.Wi({width:t.width,height:t.height,Hi:this.P.map(function(t){return r.Wi({id:t.id,color:t.color||this.R[0],label:"",size:this.Ki},{Yi:["id","label"]})}.bind(this)),Vi:this.D.map(function(t){return Object.assign({S:this.S},t)}.bind(this)),Fi:this.Fi})),this.m.defer(function(){a.debug("initializing label set"),this.qi.initialize(this.P.map(function(t){return{Ji:this.g.Zi(t.id),label:t.label,link:t.link}}.bind(this)))}.bind(this))},wi:function(){this.Ti.wi({state:this.state,g:this.g,color:this.R[0],Ki:this.Ki})},gi:function(t){var i=this.$i(t),e=this.R[i];this.Qi.setColor({g:this.g,state:this.state,Ji:t,color:e})},li:function(t,i){this.Ui.li({source:t,target:i,g:this.g,state:this.state,Fi:this.Fi,S:this.S})},ui:function(t){return r.zi(t,"x"),r.zi(t,"y"),this.g.ui({te:t,v:this.v})},reset:function(){a.debug("resetting"),this.g.ie(function(){this.state.I().forEach(function(t){this.g.removeNode(t)}.bind(this))}.bind(this)),this.state.reset(),this.qi.ee()},$i:function(t){return(this.R.indexOf(t.color)+1)%this.R.length},Xt:function(){if(!this.state)throw new Error("state is required");if(!this.g)throw new Error("adapter is required");if(!this.m)throw new Error("actionQueue is required");if(!this.qi)throw new Error("labelSet is required");if(!this.Ti)throw new Error("nodeCreator is required");if(!this.Ui)throw new Error("edgeCreator is required")}},i.t=n},{mi:6,ne:8,Ei:33,oe:16,re:17,se:23}],19:[function(t,i,e){function n(t){this.p=t&&t.p,this.he=!1}var o=t("./graphelements"),r=t("../utils"),s=t("../geometry/BoundingBox"),h=t("../utils/Literal"),u=new(t("../Logger"))("GreulerAdapter");n.prototype={className:"GreulerAdapter",J:function(){return{p:new h("global.greuler")}},initialize:function(t,i){i=i||{},this.ue=this.p(r.Wi({target:"#"+t.id,width:i.width,height:i.height,data:r.Wi({Hi:i.Hi&&i.Hi.map(this.ce),links:i.Vi,ae:i.Fi&&function(){return i.Fi}})})).update(),this.k=this.ue.k},wi:function(t){this.k.wi(this.ce(t));this.le()},removeNode:function(t){this.k.removeNode(this.ce(t));this.le()},li:function(t){this.k.li(r.Wi({source:t.source.id,target:t.target.id,ae:t.ji,S:!!t.S},{Yi:["source","target","directed"]}));this.le()},Bi:function(t,i){if(t.de)t.de.setAttribute("fill",i);else if(t.id){var e=this.k.Zi({id:t.id});this.fe(e).setAttribute("fill",i)}else u.error("Got unexpected target node",t)},ui:function(t){var i=r.zi(t,"point"),e=t.v||0;return this.ge(i,e)||o.NONE},Zi:function(t){return u.debug("retrieving node",t),this.we(function(i){return i.id===t})[0]},we:function(t){return t=t||function(){return!0},this.k.pe(t).map(function(t){var i=this.fe(t);return new o.Node({id:t.id,me:t,de:i,color:i.getAttribute("fill"),Ee:this.ve.bind(this,t)})}.bind(this))},ie:function(t){this.he=!0,t(this),this.he=!1,this.le()},ce:function(t){return r.Wi({id:t.id,fill:t.color,label:t.label||"",r:t.size},{Yi:["id","label"]})},fe:function(t){u.debug("retrieving dom element for node: "+t.index,this.ue);var i=this.ue.be[0][0].childNodes;return u.debug(i),i[t.index].getElementsByTagName("circle")[0]},ge:function(t,i){var e=this.we(function(e){return this.ve(e).Ni(i).contains(t)}.bind(this));return e&&e.length?(e.sort(function(i,e){return r.ji(i.yi(),t)-r.ji(e.yi(),t)}),e[0]):void 0},le:function(){this.he||(this.ue=this.ue.update())},ve:function(t){var i=this.ue.root[0][0].getBoundingClientRect();return new s({left:t.bounds.x,right:t.bounds.Ae,top:t.bounds.y,bottom:t.bounds.Ce}).translate({x:i.left,y:i.top})}},i.t=n},{mi:6,Ne:14,Ei:33,_e:34,Le:24}],20:[function(t,i,e){function n(){}n.prototype={className:"NoOpColorChanger",J:function(){return{}},setColor:function(){}},i.t=n},{}],21:[function(t,i,e){function n(){}n.prototype={className:"NoOpEdgeCreator",J:function(){return{}},li:function(){}},i.t=n},{}],22:[function(t,i,e){function n(){}n.prototype={className:"NoOpNodeCreator",J:function(){return{}},wi:function(){}},i.t=n},{}],23:[function(t,i,e){function n(){}var o=t("../utils");n.prototype={className:"NodeCreator",J:function(){return{}},wi:function(t){var i=o.zi(t,"state"),e=o.zi(t,"adapter"),n=o.zi(t,"color"),r=t.Ki,s=i.ki({color:n}),h=o.Wi({id:s,color:n,label:"",size:r},{Yi:["id","label"]});e.wi(h)}},i.t=n},{Ei:33}],24:[function(t,i,e){function n(t){t&&(this.id=t.id,this.de=t.de)}function o(t){n.apply(this,arguments),t&&(this.me=t.me,this.color=t.color,this.Ee=t.Ee)}function r(){n.apply(this,arguments)}function s(){n.apply(this,arguments)}n.prototype={ai:function(){return!1},ye:function(){return!1}},o.prototype=Object.assign(new n,{ai:function(){return!0},yi:function(){return this.Ee().yi()},Mi:function(){return this.Ee().Mi()},Oi:function(){return this.Ee().Oi()},Ri:function(){return this.Ee().Ri()},Si:function(){return this.Ee().Si()}}),r.prototype=Object.assign(new n,{ye:function(){return!0}}),s.prototype=Object.assign(new n,{}),i.t={Node:o,Me:r,NONE:new s}},{}],25:[function(t,i,e){t("./GreulerAdapter");var n=t("./ColorChanger"),o=t("./EdgeCreator"),r=t("./NodeCreator"),s=t("./NoOpColorChanger"),h=t("./NoOpEdgeCreator"),u=t("./NoOpNodeCreator"),c=t("./Graph"),a=t("../modes/DisallowedEditMode"),l=t("../modes/EditMode"),d=t("../modes/NonAnimatingEditMode"),f=t("../labels/EmptyLabelSet"),g=t("../labels/NodeLabelSet"),w=t("../components/GraphComponent"),p=t("../Animator"),m=t("../ComponentManager"),E=t("../utils"),v=new(t("../Logger"))("graphfactory");i.t={Oe:function(t){return t=Object.assign({C:!1,N:!0,_:!0,L:!0,O:!0,S:!1,v:.1},t),v.debug("instantiating graph",t),new c({m:E.zi(t,"actionQueue"),g:E.zi(t,"adapter"),R:t.R,Qi:this.Re(t),Ui:this.Se(t),Fi:t.Fi,P:t.P,D:t.D,qi:this.Pe(t),v:t.v,Ti:this.xe(t),Ki:t.Ki,state:E.zi(t,"state"),S:t.S})},l:function(t){t=Object.assign({C:!1,N:!0,_:!0,L:!0,O:!0,M:!0,v:.1,A:250,size:"large",S:!1},t),v.debug("instantiating graph component",t);var i=this.Ie(t),e=this.Pe(t);return new w(Object.assign({k:this.Oe(Object.assign({qi:e,Ki:i.Ki,Fi:i.Fi},t)),hi:this.De(t,e),width:i.width,height:i.height},this.ze(t)))},Be:function(t){return new m({m:E.zi(t,"actionQueue"),St:this.ze(t),document:E.zi(t,"document")})},ze:function(t){return{m:E.zi(t,"actionQueue")}},Re:function(t){return t.C||!t.L?new s:new n},Se:function(t){return t.C||!t._?new h:new o},xe:function(t){return t.C||!t.N?new u:new r},De:function(t,i){return t.C||!t.M?new a:t._?new l({g:E.zi(t,"adapter"),ke:new p({m:E.zi(t,"actionQueue")}),qi:i,A:t.A}):new d({g:E.zi(t,"adapter"),qi:i,A:t.A})},Pe:function(t){return t.O?new g({Fe:t.Fe||this.Be(t),state:t.state}):new f},Ie:function(t){var i=t.width&&t.height;return i||"fullscreen"!=t.size?i||"large"!==t.size?i||"wide"!==t.size?i||"small"!==t.size?{width:E.zi(t,"width"),height:E.zi(t,"height"),Ki:t.Ki||10,Fi:t.Fi||100}:this.je(t):this.Ge(t):this.qe(t):this.Te(t)},Te:function(t){var i=E.zi(t,"window"),e=E.zi(t,"screen"),n=i.innerWidth>0?i.innerWidth:e.width,o=i.innerHeight>0?i.innerHeight:e.height;return{width:n-10,height:o-10,Ki:this.Ue(n,o),Fi:this.Qe(n)}},qe:function(t){var i=E.zi(t,"window"),e=E.zi(t,"screen"),n=i.innerWidth>0?i.innerWidth:e.width,o=i.innerHeight>0?i.innerHeight:e.height,r=n>1e3?700:300;return{width:r,height:t.height||r,Ki:this.Ue(n,o),Fi:this.Qe(n)}},Ge:function(t){var i=E.zi(t,"window"),e=E.zi(t,"screen"),n=i.innerWidth>0?i.innerWidth:e.width,o=i.innerHeight>0?i.innerHeight:e.height,r=n<1200?n:1200;return{width:r,height:t.height||r/2,Ki:this.Ue(n,o),Fi:this.Qe(n)}},je:function(t){var i=E.zi(t,"window"),e=E.zi(t,"screen"),n=i.innerWidth>0?i.innerWidth:e.width,o=i.innerHeight>0?i.innerHeight:e.height;return{width:300,height:t.height||500,Ki:this.Ue(n,o),Fi:this.Qe(n)}},Ue:function(t,i){return t>1e3?10:Math.min(t,i)/20},Qe:function(t){return t>1e3?100:250}}},{Xe:3,Ke:5,mi:6,We:10,He:27,Ye:28,Ve:29,Je:30,Ze:31,Ei:33,oe:16,re:17,$e:18,tn:19,in:20,en:21,nn:22,se:23}],26:[function(t,i,e){function n(t){t&&(this.Fe=t.Fe,this.text=t.text,this.Dt=t.Dt,this.on=new o({name:"EditableLabel({ text: '"+this.text+"'})"}),this.rn=t.rn||function(){},this.link=t.link)}var o=t("../ModeSwitch"),r=t("../components/BlockText"),s=t("../components/Link"),h=t("../components/TextBox"),u=t("../utils"),c=new(t("../Logger"))("EditableLabel");n.prototype={className:"EditableLabel",J:function(){return{Fe:this.Fe,text:this.text,Dt:this.Dt,rn:this.rn,link:this.link}},display:function(){return c.debug("displaying text",this.text),this.Xt(),this.on.vt("edit",function(t){this.sn(t.hn.Ci()),t.hn.remove(),c.debug("got text from input component",this.text)}.bind(this)).vt("display",function(t){t.hn.remove()}),this.text&&this.on.Ct("display",function(){var t=this.Fe.Pt({xt:this.link?s:r,ht:u.Wi({text:this.text,link:this.link}),Dt:this.Dt});return this.rn({text:this.text,link:this.link}),c.debug("displaying component text='"+this.text+"'"+(this.link?", link='"+this.link+"'":"")),{hn:t}}.bind(this)),this},un:function(){return c.debug("editing text",this.text),this.Xt(),this.on.vt("display",function(t){t.hn.remove(),c.debug("closed display component")}.bind(this)).vt("edit",function(t){t.hn.remove()}),this.on.Ct("edit",function(){var t=this.Fe.Pt({xt:h,ht:{text:this.cn(),Ai:this.display.bind(this)},Dt:this.Dt});return c.debug("opened edit component"),{hn:t}}.bind(this)),this},Xt:function(){if(!this.Fe)throw new Error("componentManager is required");if(!this.on)throw new Error("modeSwitch is required")},remove:function(){return c.debug("removing",this),this.on.vt("display",function(t){t.hn.remove(),c.debug("closed display component")}).vt("edit",function(t){t.hn.remove(),c.debug("closed edit component")}),this},an:function(t){t.hn.remove()},sn:function(t){var i;t&&(i=/\[(.*)\]\((.*)\)/.exec(t))?(this.text=i[1],this.link=i[2]):(this.text=t,this.link=null)},cn:function(){return this.text&&this.link?"["+this.text+"]("+this.link+")":this.text}},n.ln={create:function(t){return new n(t)}},i.t=n},{mi:6,dn:7,fn:9,gn:11,wn:13,Ei:33}],27:[function(t,i,e){function n(){}n.prototype={className:"EmptyLabelSet",J:function(){return{}},initialize:function(){},un:function(){},display:function(){},ee:function(){}},i.t=n},{}],28:[function(t,i,e){function n(t){this.Fe=t&&t.Fe,this.state=t&&t.state,this.pn=t&&t.pn||r.ln,this.labels={}}var o=t("../geometry/Position"),r=t("./EditableLabel"),s=t("../utils"),h=new(t("../Logger"))("NodeLabelSet");n.prototype={className:"NodeLabelSet",J:function(){return{Fe:this.Fe,state:this.state}},initialize:function(t){h.debug("initializing",t),t.filter(function(t){return!!t.label}).forEach(function(t){var i=this.mn(t);this.labels[t.Ji.id]=i,i.display()}.bind(this))},un:function(t){h.debug("editing label for node "+t.id),this.En(t).un()},display:function(t){h.debug("displaying label for node "+t.id),this.En(t).display()},ee:function(){h.debug("closing all labels",this.labels),Object.values(this.labels).forEach(function(t){t.remove()}),this.labels={}},En:function(t){var i;return this.labels[t.id]?(i=this.labels[t.id],h.info("reusing existing label for node "+t.id,i)):(i=this.mn({Ji:t}),this.labels[t.id]=i,h.info("created new label for node "+t.id,i)),i},mn:function(t){var i=s.zi(t,"node"),e=t.label,n=t.link;return h.debug("Creating label",i),this.pn.create({text:e,Fe:this.Fe,Dt:function(){return new o({Di:i.Ee().Mi()})},rn:function(t){h.debug("saving label",i,t),this.state.ki({id:i.id,label:t.text,link:t.link})}.bind(this),link:n})},Xt:function(){if(!this.Fe)throw new Error("componentManager is required");if(!this.state)throw new Error("state is required")}},i.t=n},{mi:6,vn:15,Ei:33,bn:26}],29:[function(t,i,e){function n(){o.apply(this,arguments)}var o=t("./EditMode");n.prototype=Object.assign(new o,{className:"DisallowedEditMode",pi:function(){},Xt:function(){}}),i.t=n},{An:30}],30:[function(t,i,e){function n(t){this.g=t&&t.g,this.ke=t&&t.ke,this.A=t&&t.A||250,this.qi=t&&t.qi,this.on=t&&t.on||new o({name:"editMode"}),this.on.Ct("display")}var o=t("../ModeSwitch"),r=t("../colors"),s=new(t("../Logger"))("EditMode");n.prototype={className:"EditMode",J:function(){return{g:this.g,ke:this.ke,A:this.A,qi:this.qi,on:this.on}},pi:function(t){s.info("activating"),this.Xt(),this.on.vt("display").vt("edit",this.Cn.bind(this)).Ct("edit",function(){var i=this.g.we(function(i){return i.id!==t.id}),e=i.reduce(function(t,i){return t[i.id]=i.color,t},{}),n=this.Nn(i,e);this.qi.un(t);var o={Ji:t,animation:n,_n:i,Ln:e};return s.debug("activated",o),o}.bind(this))},di:function(){s.debug("deactvating"),this.Xt(),this.on.vt("edit",this.Cn.bind(this)).Ct("display",function(){s.debug("deactvated")})},ci:function(t){t=Object.assign({Vt:function(){},fi:function(){}},t),this.Xt(),this.on.Vt({un:function(i){t.Vt(i.Ji)},display:t.fi})},yn:function(t){t.forEach(function(t){this.g.Bi(t,r.oi)}.bind(this))},Mn:function(t,i){t.forEach(function(t){this.g.Bi(t,i[t.id])}.bind(this))},Cn:function(t){s.debug("cleaning up edit mode state",t),t.animation.stop(),this.qi.display(t.Ji),this.Mn(t._n,t.Ln)},Nn:function(t,i){return this.ke.et(this.yn.bind(this,t),this.Mn.bind(this,t,i)).every(this.A).play()},Xt:function(){if(!this.g)throw new Error("adapter is required");if(!this.ke)throw new Error("animator is required");if(!this.on)throw new Error("modeSwitch is required")}},i.t=n},{mi:6,dn:7,ne:8}],31:[function(t,i,e){function n(){o.apply(this,arguments)}var o=t("./EditMode"),r=new(t("../Logger"))("NonAnimatingEditMode");n.prototype=Object.assign(new o,{className:"NonAnimatingEditMode",Nn:function(){return r.debug("not animating for edit mode"),{stop:function(){}}},Xt:function(){if(!this.g)throw new Error("adapter is required");if(!this.on)throw new Error("modeSwitch is required")}}),i.t=n},{mi:6,An:30}],32:[function(t,i,e){function n(t){this.o=t&&t.o,this.s=t&&t.s,this.h=t&&t.h}var o=t("../utils"),r=t("../utils/Literal"),s=new(t("../Logger"))("UrlState");NUM_NODES_PARAM="n",COLOR_PARAM_PREFIX="c_",EDGE_PARAM_PREFIX="e_",LABEL_PARAM_PREFIX="l_",LINK_PARAM_PREFIX="li_",n.prototype={className:"UrlState",J:function(){return{o:this.o,s:new r("window.history.replaceState.bind(window.history, {}, '')"),h:new r("new URLSearchParams(window.location.search)")}},ki:function(t){var i;return(t=t||{}).hasOwnProperty("id")&&null!==t.id&&void 0!==t.id?i=t.id:(i=this.On(),this.h.set(NUM_NODES_PARAM,i+1)),t.hasOwnProperty("color")&&this.Rn(i,t.color),t.hasOwnProperty("label")&&this.Sn(i,t.label),t.hasOwnProperty("link")&&this.Pn(i,t.link),this.xn(),i},In:function(t){var i=this.Dn(t),e=this.zn().find(function(t){return this.Bn({kn:i,Fn:t})}.bind(this)),n=this.h.get(LABEL_PARAM_PREFIX+t),r=this.h.get(LINK_PARAM_PREFIX+t);return o.Wi({id:t,color:e&&e.replace(COLOR_PARAM_PREFIX,"#"),label:n&&decodeURIComponent(n),link:r&&decodeURIComponent(r)},{Yi:"id"})},Gi:function(t,i){var e,n=EDGE_PARAM_PREFIX+t;e=this.h.has(n)?this.jn(n)|this.Dn(i):this.Dn(i),this.Gn(n,e),this.xn()},I:function(){var t=[];if(this.h.has(NUM_NODES_PARAM))for(var i=0;i<this.h.get(NUM_NODES_PARAM);i++)t.push(this.In(i));return t},B:function(){return this.qn().map(function(t){for(var i=parseInt(t.replace(EDGE_PARAM_PREFIX,"")),e=[],n=this.jn(t),o=n.toString(2).length,r=0;r<o;r++){var s=this.Dn(r);(n&s)===s&&e.push({source:i,target:r})}return e}.bind(this)).reduce(function(t,i){return t.concat(i)},[])},Sn:function(t,i){i?this.h.set(LABEL_PARAM_PREFIX+t,encodeURIComponent(i)):this.h.delete(LABEL_PARAM_PREFIX+t)},Pn:function(t,i){i?this.h.set(LINK_PARAM_PREFIX+t,encodeURIComponent(i)):this.h.delete(LINK_PARAM_PREFIX+t)},Tn:function(){return this.o+"?"+this.h.toString()},reset:function(){s.debug("resetting"),this.Un().forEach(function(t){this.h.delete(t)}.bind(this)),this.xn()},Bn:function(t){return t=this.Qn(t),!!this.h.has(t.Fn)&&(this.jn(t.Fn)&t.kn)===t.kn},Xn:function(t){t=this.Qn(t);var i;i=this.h.has(t.Fn)?this.jn(t.Fn)|t.kn:t.kn,this.Gn(t.Fn,i)},Kn:function(t){if(t=this.Qn(t),!this.h.has(t.Fn))throw Error("Attempted to remove color "+t.Fn);var i=this.jn(t.Fn)&~t.kn;0===i?this.h.delete(t.Fn):this.Gn(t.Fn,i)},jn:function(t){return parseInt(this.h.get(t),16)},Gn:function(t,i){this.h.set(t,i.toString(16))},Dn:function(t){return t<=30?1<<t:Math.pow(2,t)},Qn:function(t){if(!t.hasOwnProperty("bit")&&!t.hasOwnProperty("nodeId"))throw Error("bit or nodeId is required");if(!t.hasOwnProperty("color")&&!t.hasOwnProperty("colorKey"))throw Error("color or colorKey is required");return{kn:t.hasOwnProperty("bit")?t.kn:this.Dn(t.Wn),Fn:t.hasOwnProperty("colorKey")?t.Fn:t.color.replace("#",COLOR_PARAM_PREFIX)}},zn:function(){return this.Un(function(t){return t.startsWith(COLOR_PARAM_PREFIX)})},qn:function(){return this.Un(function(t){return t.startsWith(EDGE_PARAM_PREFIX)})},Un:function(t){t=t||function(){return!0};for(var i=[],e=this.h.keys(),n=e.next();!n.done;)t(n.value)&&i.push(n.value),n=e.next();return i},On:function(){return this.h.has(NUM_NODES_PARAM)?parseInt(this.h.get(NUM_NODES_PARAM)):0},Rn:function(t,i){var e=this.Dn(t);this.zn().forEach(function(t){this.Bn({kn:e,Fn:t})&&this.Kn({kn:e,Fn:t})}.bind(this)),i&&this.Xn({kn:e,color:i})},xn:function(){this.s(this.Tn())}},i.t=n},{mi:6,Ei:33,_e:34}],33:[function(t,i,e){function n(t,i){function e(t){return" ".repeat(i)+t}function s(t){return" ".repeat(i+2)+t}return i=i||0,t instanceof r?t.value:Array.isArray(t)?"[\n"+t.map(function(t){return n(t,i+2)+","}).map(s).join("\n")+"\n"+e("]"):t&&t.className&&t.J?"new "+t.className+"({\n"+Object.keys(t.J()).map(function(e){return e+": "+n(t.J()[e],i+2)+","}).map(s).join("\n")+"\n"+e("})"):t&&"object"==typeof t?"{\n"+Object.keys(t).map(function(e){return e+": "+n(t[e],i+2)+","}).map(s).join("\n")+"\n"+e("}"):t&&"string"==typeof t?"'"+o(t,"'","\\'")+"'":t||0===t?t.toString():"null"}function o(t,i,e){return t.split(i).join(e)}var r=t("./utils/Literal");i.t={ji:function(t,i){var e=t.x-i.x,n=t.y-i.y;return Math.sqrt(e*e+n*n)},Wi:function(t,i){var e={};return Object.keys(t).forEach(function(i){t[i]&&(e[i]=t[i])}),i&&i.Yi&&(i.Yi.constructor===Array?i.Yi.forEach(function(i){e[i]=t[i]}):e[i.Yi]=t[i.Yi]),e},Et:function(t){return t&&t.touches&&t.touches.length?Object.assign(t,{clientX:t.touches[0].clientX,clientY:t.touches[0].clientY,screenX:t.touches[0].screenX,screenY:t.touches[0].screenY}):t},Pi:function(t){return!(!t||"object"!=typeof t||Array.isArray(t))&&1===Object.keys(t).filter(function(i){return!!t[i]}).length},Xi:function(t,i){var e=t.indexOf(i);if(e>=0){for(var n=[],o=e;o<t.length;o++)n.push(t[o]);for(o=0;o<e;o++)n.push(t[o]);return n}return t},Hn:n,Yn:o,zi:function(t,i){if(!t[i])throw new Error("missing required property "+i);return t[i]}}},{Z:34}],34:[function(t,i,e){i.t=function(t){this.value=t}},{}]},{},[1]);