!function t(i,e,n){function o(s,h){if(!e[s]){if(!i[s]){var c="function"==typeof require&&require;if(!h&&c)return c(s,!0);if(r)return r(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var a=e[s]={t:{}};i[s][0].call(a.t,function(t){var e=i[s][1][t];return o(e||t)},a,a.t,t,i,e,n)}return e[s].t}for(var r="function"==typeof require&&require,s=0;s<n.length;s++)o(n[s]);return o}({1:[function(t,i,e){(function(i){var e=t("./src/graphs/GreulerAdapter"),n=t("./src/state/UrlState"),o=t("./src/ActionQueue"),r=(t("./src/components/ResetButton"),t("./src/graphs/graphfactory"));t("./src/Logger").level=i.i;var s=new o,h=new URLSearchParams(window.location.search),c=new n({o:window.location.protocol+"//"+window.location.host+window.location.pathname,s:window.history.replaceState.bind(window.history,{},""),h:h}),u="true"===h.get("immutable"),a="false"!==h.get("allowAddNodes"),d="false"!==h.get("allowAddEdges"),l="false"!==h.get("allowEdit"),f="false"!==h.get("allowChangeColors"),g="false"!==h.get("allowLabels"),w="true"===h.get("directed");i.u=r.l({document:i.document,screen:i.screen,window:window,size:"fullscreen",g:new e({p:i.p}),m:s,state:c,v:.1,A:250,C:u,N:a,O:d,_:f,L:l,j:g,M:h.has("colorChoices")&&h.getAll("colorChoices").map(function(t){return 0===t.indexOf("#")?t:"#"+t}),k:w,R:c.S(),T:c.P()}),i.I=i.u.I,i.u.D(document.getElementById("main-graph"))}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{B:2,F:6,G:13,q:20,U:26,X:33}],2:[function(t,i,e){(function(e){function n(t){r.apply(this),this.setTimeout=t&&t.setTimeout||e.setTimeout.bind(e),this.clearTimeout=t&&t.clearTimeout||e.clearTimeout.bind(e),this.K=t&&t.K||10,this.W=[],this.H=!1}var o=t("./utils/Literal"),r=t("./TrackedObject");n.prototype=Object.assign(new r,{className:"ActionQueue",defer:function(t,i){1==arguments.length&&(i=t,t=1);var e=this.setTimeout(i,t);return{cancel:function(){this.clearTimeout(e)}.bind(this)}},Y:function(t){var i=this.W;return i.push(t),this.H||this.V(),{cancel:function(){i.splice(i.indexOf(t),1)}}},V:function(){var t=function(){this.W.forEach(function(t){t()}),this.setTimeout(t,this.K)}.bind(this);t(),this.H=!0},J:function(){return{setTimeout:new o("global.setTimeout.bind(global)"),clearTimeout:new o("global.clearTimeout.bind(global)"),K:this.K}}}),i.t=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{Z:8,$:35}],3:[function(t,i,e){function n(t){r.apply(this),this.m=t&&t.m}function o(t,i){this.m=t,this.tt=i,this.it=0,this.interval=100,this.et=function(){return!0}}var r=t("./TrackedObject");n.prototype=Object.assign(new r,{className:"Animator",nt:function(){return this.ot(),new o(this.m,Array.prototype.slice.call(arguments))},J:function(){return{m:this.m}},ot:function(){if(!this.m)throw Error("ActionQueue is required")}}),o.prototype={every:function(t){return this.interval=t,this},rt:function(t){return this.et=t,this},play:function(){var t=function(){this.et()&&(this.tt[this.it](),this.it=(this.it+1)%this.tt.length,this.m.defer(this.interval,t))}.bind(this);return t(),this},stop:function(){return this.rt(function(){return!1})}},i.t=n},{Z:8}],4:[function(t,i,e){function n(t){s.apply(this),t&&(this.m=t.m,this.st=t.st||250,this.ht=new r({m:this.m,timeout:500,name:"mouseTouchSwitch"}),this.ct=t),this.ut=0,this.at=0,this.dt=!1,this.lt=[]}var o=t("./utils"),r=t("./ModeSwitch"),s=t("./TrackedObject"),h=new(t("./Logger"))("Component");n.prototype=Object.assign(new s,{ft:function(){},gt:function(){},wt:function(){},className:"",J:function(){return this.ct},D:function(t){this.pt(),this.bt=t,t.addEventListener("mouseup",function(t){h.debug("mouseup",o.vt(t)),this.ht.Et("mouse",function(t){this.At(t.Ct)}.bind(this))}.bind(this)),t.addEventListener("touchend",function(t){h.debug("touchend",o.vt(t)),this.ht.Et("touch",function(t){this.At(t.Ct)}.bind(this))}.bind(this)),t.addEventListener("mousedown",function(t){t=o.vt(t),h.debug("mousedown",t),this.ht.Nt("mouse",function(){return this.Ot(t),{Ct:t}}.bind(this))}.bind(this)),t.addEventListener("touchstart",function(t){t=o.vt(t),h.debug("touchstart",t),this.ht.Nt("touch",function(){return this.Ot(t),{Ct:t}}.bind(this))}.bind(this)),t.addEventListener("keyup",function(t){t=o.vt(t),h.debug("keyup",t),13===t.keyCode&&this.wt(t)}.bind(this)),this._t()&&(t.innerHTML=this._t()),this.Lt(t)},_t:function(){return null},Lt:function(t){},jt:function(t){return this.lt.push(t),this},remove:function(){this.lt.forEach(function(t){t(this)}.bind(this)),this.bt.remove(),h.debug("closed component",this)},pt:function(){if(!this.m)throw Error("actionQueue is required");if(!this.className)throw new Error("Must override className")},At:function(t){this.at++,this.dt?this.dt=!1:this.ft(t)},Ot:function(t){var i=++this.ut;this.m.defer(this.st,function(){this.ut===i&&this.at===this.ut-1&&(this.dt=!0,this.gt(t))}.bind(this))}}),i.t=n},{yt:6,Mt:7,Z:8,kt:34}],5:[function(t,i,e){function n(t){h.apply(this),this.document=t&&t.document,this.m=t&&t.m,this.Rt=t&&t.Rt}t("./utils");var o=t("./geometry/Position"),r=t("./Component"),s=t("./utils/Literal"),h=t("./TrackedObject");n.prototype=Object.assign(new h,{className:"ComponentManager",J:function(){return{document:new s("global.document"),m:this.m,Rt:this.Rt}},St:function(t){var i=new((t=Object.assign({position:new o({Pt:{x:0,y:0}}),xt:void 0,Tt:r,ct:void 0},t)).Tt)(Object.assign({},this.Rt,t.ct)),e=this.document.createElement("div");if(t.position&&this.It(t.position,e),"function"==typeof t.xt){var n=this.m.Y(function(){this.It(t.xt(),e)}.bind(this));i.jt(n.cancel.bind(n))}return this.document.body.insertBefore(e,this.document.body.firstChild),i.D(e),i},It:function(t,i){var e=t.Dt({width:i.offsetWidth,height:i.offsetHeight});i.style.position="fixed",i.style.top=e.top+"px",i.style.left=e.left+"px"}}),i.t=n},{zt:4,Z:8,Bt:16,kt:34,$:35}],6:[function(t,i,e){(function(t){function e(t){this.name=t||"Logger"}var n=["DEBUG","INFO","WARN","ERROR"];e.level="WARN",e.Ft={},e.prototype={debug:function(t,i){this.Gt.apply(this,[(new Date).getTime(),"DEBUG",this.name].concat(Array.prototype.splice.call(arguments,0)))},info:function(t,i){this.Gt.apply(this,[(new Date).getTime(),"INFO",this.name].concat(Array.prototype.splice.call(arguments,0)))},warn:function(t,i){this.Gt.apply(this,[(new Date).getTime(),"WARN",this.name].concat(Array.prototype.splice.call(arguments,0)))},error:function(t,i){this.Gt.apply(this,[(new Date).getTime(),"ERROR",this.name].concat(Array.prototype.splice.call(arguments,0)))},Gt:function(){var i=arguments[1],o=e.Ft[this.name]||e.level;n.indexOf(i)>=n.indexOf(o)&&t.console.log.apply(t.console.log,arguments)}},i.t=e}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],7:[function(t,i,e){function n(t){r.apply(this),this.m=t&&t.m,this.timeout=t&&t.timeout||0,this.qt=t&&t.Ut||{},this.name=t&&t.name||"ModeSwitch",this.Qt=null,this.Xt=null,s.debug("Initialized "+this.name,this)}var o=t("./Logger"),r=t("./TrackedObject"),s=new o("ModeSwitch");n.prototype=Object.assign(new r,{className:"ModeSwitch",J:function(){return{m:this.m,timeout:this.timeout,Ut:this.qt,name:this.name}},Nt:function(t,i){if(this.Kt(),this.Wt(t)){s.debug(this.name+": Entering '"+t+"'",this);var e=(i||function(){})();this.qt[t]=e,this.Qt=t,this.Ht()}else s.debug(this.name+": Not entering '"+t+"'; active mode is "+this.Qt,this);return this},Et:function(t,i){return this.Kt(),this.Yt(t)?(s.debug(this.name+": Exiting "+t,this),(i||function(){})(this.qt[t]),this.Vt()):s.debug(this.name+": Not exiting '"+t+"'; active mode is "+this.Qt,this),this},Jt:function(t){var i=this.Qt||"default",e=t[i];return e?(s.debug(this.name+": Found callback for active mode",i,t),e(this.qt[this.Qt||"default"])):s.debug(this.name+": No callback for active mode",i,t),this},Wt:function(t){return!this.Qt||this.Yt(t)},Yt:function(t){return this.Qt===t},Ht:function(){this.Xt&&this.Xt.cancel()},Vt:function(){var t=function(){delete this.qt[this.Qt],this.Qt=null}.bind(this);this.Ht(),this.timeout?this.Xt=this.m.defer(this.timeout,t):t()},Kt:function(){if(this.timeout&&!this.m)throw new Error("action queue is required if a timeout is specified")}}),i.t=n},{yt:6,Z:8}],8:[function(t,i,e){var n=0;i.t=function(){this.id=n++}},{}],9:[function(t,i,e){i.t={Zt:"#db190f",$t:"#f76402",ti:"#fbff14",ii:"#28b92b",ei:"#2826b5",ni:"#2980B9",oi:"#8c28b7",ri:"#00FF00",si:["#db190f","#f76402","#fbff14","#28b92b","#2826b5","#2980B9","#8c28b7"]}},{}],10:[function(t,i,e){function n(t){o.apply(this,arguments),this.text=t&&t.text}var o=t("../Component");n.prototype=Object.assign(new o,{className:"BlockText",_t:function(){return this.text&&"<p>"+this.text+"</p>"}}),i.t=n},{hi:4}],11:[function(t,i,e){function n(t){o.apply(this,arguments),this.ci=t&&t.ci,this.I=t&&t.I,this.width=t&&t.width,this.height=t&&t.height}var o=t("../Component");t("../utils"),new(t("../Logger"))("GraphComponent");n.prototype=Object.assign(new o,{className:"GraphComponent",Lt:function(t){this.I.initialize({bt:t,width:this.width,height:this.height})},ft:function(t){var i=this.I.ui({x:t.clientX,y:t.clientY});this.ci.ai({Jt:function(t){i.di()&&i.id!==t.id?this.I.li(t,i):this.ci.fi()}.bind(this),gi:function(){i.di()?this.I.wi(i):this.I.pi()}.bind(this)})},gt:function(t){var i=this.I.ui({x:t.clientX,y:t.clientY});i.di()&&this.ci.mi(i)},reset:function(){this.I.reset(),this.ci.fi()},pt:function(){if(o.prototype.pt.call(this,arguments),!this.ci)throw new Error("edit mode is required");if(!this.I)throw new Error("graph is required")}}),i.t=n},{hi:4,bi:6,vi:34}],12:[function(t,i,e){function n(t){o.apply(this,arguments),this.text=t&&t.text,this.link=t&&t.link}var o=t("../Component");n.prototype=Object.assign(new o,{className:"Link",_t:function(){return this.text&&this.link?'<a href="'+this.link+'">'+this.text+"</a>":null}}),i.t=n},{hi:4}],13:[function(t,i,e){function n(t){o.apply(this,arguments),this.Ei=t?t.Ei:[]}var o=t("../Component");n.prototype=Object.assign(new o,{className:"ResetButton",ft:function(t){this.Ei.forEach(function(t){t.reset()})}}),i.t=n},{hi:4}],14:[function(t,i,e){function n(t){o.apply(this,arguments),this.Ai=t&&t.text||"",this.Ci=t&&t.Ci||function(){}}var o=t("../Component");n.prototype=Object.assign(new o,{className:"TextBox",_t:function(){return'<input type="text" value="'+this.Ai+'"></input>'},Ni:function(){return this.bt.getElementsByTagName("input")[0].value},wt:function(t){this.Ci()}}),i.t=n},{hi:4}],15:[function(t,i,e){function n(t){this.dimensions=t||{left:0,top:0,right:0,bottom:0}}n.prototype={className:"BoundingBox",J:function(){return this.dimensions},Oi:function(t){return new n({left:this.dimensions.left-this._i()*t,right:this.dimensions.right+this._i()*t,top:this.dimensions.top-this.Li()*t,bottom:this.dimensions.bottom+this.Li()*t})},translate:function(t){return new n({left:this.dimensions.left+t.x,right:this.dimensions.right+t.x,top:this.dimensions.top+t.y,bottom:this.dimensions.bottom+t.y})},contains:function(t){return this.dimensions.left<=t.x&&t.x<=this.dimensions.right&&this.dimensions.top<=t.y&&t.y<=this.dimensions.bottom},ji:function(){return{x:this.dimensions.left+this._i()/2,y:this.dimensions.top+this.Li()/2}},yi:function(){return{x:this.dimensions.left,y:this.dimensions.top}},Mi:function(){return{x:this.dimensions.right,y:this.dimensions.top}},ki:function(){return{x:this.dimensions.left,y:this.dimensions.bottom}},Ri:function(){return{x:this.dimensions.right,y:this.dimensions.bottom}},_i:function(){return this.dimensions.right-this.dimensions.left},Li:function(){return this.dimensions.bottom-this.dimensions.top}},i.t=n},{}],16:[function(t,i,e){function n(t){if(!o.Si(t))throw new Error("invalid position object "+t);Object.assign(this,t)}var o=t("../utils");n.prototype={className:"Position",J:function(){return this},Dt:function(t){if(t=Object.assign({width:0,height:0},t),this.Pt)return{left:this.Pt.x,top:this.Pt.y};if(this.Ti)return{left:this.Ti.x-t.width,top:this.Ti.y};if(this.Pi)return{left:this.Pi.x,top:this.Pi.y-t.height};if(this.xi)return{left:this.xi.x-t.width,top:this.xi.y-t.height};throw new Error("invalid position object: "+this)}},i.t=n},{vi:34}],17:[function(t,i,e){function n(){o.apply(this)}var o=t("../TrackedObject"),r=t("../utils");n.prototype=Object.assign(new o,{className:"ColorChanger",J:function(){return{}},setColor:function(t){var i=r.Ii(t,"adapter"),e=r.Ii(t,"state"),n=r.Ii(t,"node"),o=r.Ii(t,"color");i.Di(n,o),e.zi({id:n.id,color:o})}}),i.t=n},{Bi:8,vi:34}],18:[function(t,i,e){function n(){o.apply(this)}var o=t("../TrackedObject"),r=t("../utils");n.prototype=Object.assign(new o,{className:"EdgeCreator",J:function(){return{}},li:function(t){var i=r.Ii(t,"adapter"),e=r.Ii(t,"state"),n=r.Ii(t,"source"),o=r.Ii(t,"target"),s=t.Fi,h=t.k;i.li({source:n,target:o,Gi:s,k:h}),e.qi(n.id,o.id)}}),i.t=n},{Bi:8,vi:34}],19:[function(t,i,e){function n(t){a.apply(this),this.state=t&&t.state,this.g=t&&t.g,this.m=t&&t.m,this.Ui=t&&t.Ui,this.Qi=t&&t.Qi||new h,this.Xi=t&&t.Xi||new c,this.Ki=t&&t.Ki||new u,this.M=t&&t.M||r.Wi(o.si,o.ni),this.Hi=t&&t.Hi,this.Fi=t&&t.Fi,this.R=t&&t.R||[],this.T=t&&t.T||[],this.v=t&&t.v||0,this.k=!(!t||!t.k),this.ct=t}var o=t("../colors"),r=t("../utils"),s=t("../Logger"),h=t("./NodeCreator"),c=t("./EdgeCreator"),u=t("./ColorChanger"),a=t("../TrackedObject"),d=new s("Graph");n.prototype=Object.assign(new a,{className:"Graph",J:function(){return Object.assign({R:this.state.S(),T:this.state.P()},this.ct)},initialize:function(t){this.Kt(),d.debug("initializing graph",this),this.g.initialize(t.bt,r.Yi({width:t.width,height:t.height,Vi:this.R.map(function(t){return r.Yi({id:t.id,color:t.color||this.M[0],label:"",size:this.Hi},{Ji:["id","label"]})}.bind(this)),Zi:this.T.map(function(t){return Object.assign({k:this.k},t)}.bind(this)),Fi:this.Fi})),this.m.defer(function(){d.debug("initializing label set"),this.Ui.initialize(this.R.map(function(t){return{$i:this.g.te(t.id),label:t.label,link:t.link}}.bind(this)))}.bind(this))},pi:function(){this.Qi.pi({state:this.state,g:this.g,color:this.M[0],Hi:this.Hi})},wi:function(t){var i=this.ie(t),e=this.M[i];this.Ki.setColor({g:this.g,state:this.state,$i:t,color:e})},li:function(t,i){this.Xi.li({source:t,target:i,g:this.g,state:this.state,Fi:this.Fi,k:this.k})},ui:function(t){return r.Ii(t,"x"),r.Ii(t,"y"),this.g.ui({ee:t,v:this.v})},reset:function(){d.debug("resetting"),this.g.ne(function(){this.state.S().forEach(function(t){this.g.removeNode(t)}.bind(this))}.bind(this)),this.state.reset(),this.Ui.oe()},ie:function(t){return(this.M.indexOf(t.color)+1)%this.M.length},Kt:function(){if(!this.state)throw new Error("state is required");if(!this.g)throw new Error("adapter is required");if(!this.m)throw new Error("actionQueue is required");if(!this.Ui)throw new Error("labelSet is required");if(!this.Qi)throw new Error("nodeCreator is required");if(!this.Xi)throw new Error("edgeCreator is required")}}),i.t=n},{bi:6,Bi:8,re:9,vi:34,se:17,he:18,ce:24}],20:[function(t,i,e){function n(t){u.apply(this),this.p=t&&t.p,this.ue=!1}var o=t("./graphelements"),r=t("../utils"),s=t("../geometry/BoundingBox"),h=t("../utils/Literal"),c=t("../Logger"),u=t("../TrackedObject"),a=new c("GreulerAdapter");n.prototype=Object.assign(new u,{className:"GreulerAdapter",J:function(){return{p:new h("global.greuler")}},initialize:function(t,i){i=i||{},this.ae=this.p(r.Yi({target:"#"+t.id,width:i.width,height:i.height,data:r.Yi({Vi:i.Vi&&i.Vi.map(this.de),links:i.Zi,le:i.Fi&&function(){return i.Fi}})})).update(),this.I=this.ae.I},pi:function(t){this.I.pi(this.de(t));this.fe()},removeNode:function(t){this.I.removeNode(this.de(t));this.fe()},li:function(t){this.I.li(r.Yi({source:t.source.id,target:t.target.id,le:t.Gi,k:!!t.k},{Ji:["source","target","directed"]}));this.fe()},Di:function(t,i){if(t.ge)t.ge.setAttribute("fill",i);else if(t.id){var e=this.I.te({id:t.id});this.we(e).setAttribute("fill",i)}else a.error("Got unexpected target node",t)},ui:function(t){var i=r.Ii(t,"point"),e=t.v||0;return this.pe(i,e)||o.NONE},te:function(t){return a.debug("retrieving node",t),this.me(function(i){return i.id===t})[0]},me:function(t){return t=t||function(){return!0},this.I.be(t).map(function(t){var i=this.we(t);return new o.Node({id:t.id,ve:t,ge:i,color:i.getAttribute("fill"),Ee:this.Ae.bind(this,t)})}.bind(this))},ne:function(t){this.ue=!0,t(this),this.ue=!1,this.fe()},de:function(t){return r.Yi({id:t.id,fill:t.color,label:t.label||"",r:t.size},{Ji:["id","label"]})},we:function(t){a.debug("retrieving dom element for node: "+t.index,this.ae);var i=this.ae.Ce[0][0].childNodes;return a.debug(i),i[t.index].getElementsByTagName("circle")[0]},pe:function(t,i){var e=this.me(function(e){return this.Ae(e).Oi(i).contains(t)}.bind(this));return e&&e.length?(e.sort(function(i,e){return r.Gi(i.ji(),t)-r.Gi(e.ji(),t)}),e[0]):void 0},fe:function(){this.ue||(this.ae=this.ae.update())},Ae:function(t){var i=this.ae.root[0][0].getBoundingClientRect();return new s({left:t.bounds.x,right:t.bounds.Ne,top:t.bounds.y,bottom:t.bounds.Oe}).translate({x:i.left,y:i.top})}}),i.t=n},{bi:6,Bi:8,_e:15,vi:34,Le:35,je:25}],21:[function(t,i,e){function n(){o.apply(this)}var o=t("../TrackedObject");n.prototype=Object.assign(new o,{className:"NoOpColorChanger",J:function(){return{}},setColor:function(){}}),i.t=n},{Bi:8}],22:[function(t,i,e){function n(){o.apply(this)}var o=t("../TrackedObject");n.prototype=Object.assign(new o,{className:"NoOpEdgeCreator",J:function(){return{}},li:function(){}}),i.t=n},{Bi:8}],23:[function(t,i,e){function n(){o.apply(this)}var o=t("../TrackedObject");n.prototype=Object.assign(new o,{className:"NoOpNodeCreator",J:function(){return{}},pi:function(){}}),i.t=n},{Bi:8}],24:[function(t,i,e){function n(){o.apply(this)}var o=t("../TrackedObject"),r=t("../utils");n.prototype=Object.assign(new o,{className:"NodeCreator",J:function(){return{}},pi:function(t){var i=r.Ii(t,"state"),e=r.Ii(t,"adapter"),n=r.Ii(t,"color"),o=t.Hi,s=i.zi({color:n}),h=r.Yi({id:s,color:n,label:"",size:o},{Ji:["id","label"]});e.pi(h)}}),i.t=n},{Bi:8,vi:34}],25:[function(t,i,e){function n(t){t&&(this.id=t.id,this.ge=t.ge)}function o(t){n.apply(this,arguments),t&&(this.ve=t.ve,this.color=t.color,this.Ee=t.Ee)}function r(){n.apply(this,arguments)}function s(){n.apply(this,arguments)}n.prototype={di:function(){return!1},ye:function(){return!1}},o.prototype=Object.assign(new n,{di:function(){return!0},ji:function(){return this.Ee().ji()},yi:function(){return this.Ee().yi()},Mi:function(){return this.Ee().Mi()},ki:function(){return this.Ee().ki()},Ri:function(){return this.Ee().Ri()}}),r.prototype=Object.assign(new n,{ye:function(){return!0}}),s.prototype=Object.assign(new n,{}),i.t={Node:o,Me:r,NONE:new s}},{}],26:[function(t,i,e){t("./GreulerAdapter");var n=t("./ColorChanger"),o=t("./EdgeCreator"),r=t("./NodeCreator"),s=t("./NoOpColorChanger"),h=t("./NoOpEdgeCreator"),c=t("./NoOpNodeCreator"),u=t("./Graph"),a=t("../modes/DisallowedEditMode"),d=t("../modes/EditMode"),l=t("../modes/NonAnimatingEditMode"),f=t("../labels/EmptyLabelSet"),g=t("../labels/NodeLabelSet"),w=t("../components/GraphComponent"),p=t("../Animator"),m=t("../ComponentManager"),b=t("../utils"),v=new(t("../Logger"))("graphfactory");i.t={ke:function(t){return t=Object.assign({C:!1,N:!0,O:!0,_:!0,j:!0,k:!1,v:.1},t),v.debug("instantiating graph",t),new u({m:b.Ii(t,"actionQueue"),g:b.Ii(t,"adapter"),M:t.M,Ki:this.Re(t),Xi:this.Se(t),Fi:t.Fi,R:t.R,T:t.T,Ui:t.Ui||this.Te(t),v:t.v,Qi:this.Pe(t),Hi:t.Hi,state:b.Ii(t,"state"),k:t.k})},l:function(t){t=Object.assign({C:!1,N:!0,O:!0,_:!0,j:!0,L:!0,v:.1,A:250,size:"large",k:!1},t),v.debug("instantiating graph component",t);var i=this.xe(t),e=this.Te(t);return new w(Object.assign({I:this.ke(Object.assign({Ui:e,Hi:i.Hi,Fi:i.Fi},t)),ci:this.Ie(t,e),width:i.width,height:i.height},this.De(t)))},ze:function(t){return new m({m:b.Ii(t,"actionQueue"),Rt:this.De(t),document:b.Ii(t,"document")})},De:function(t){return{m:b.Ii(t,"actionQueue")}},Re:function(t){return t.C||!t._?new s:new n},Se:function(t){return t.C||!t.O?new h:new o},Pe:function(t){return t.C||!t.N?new c:new r},Ie:function(t,i){return t.C||!t.L?new a:t.O?new d({g:b.Ii(t,"adapter"),Be:new p({m:b.Ii(t,"actionQueue")}),Ui:i,A:t.A}):new l({g:b.Ii(t,"adapter"),Ui:i,A:t.A})},Te:function(t){return t.j?new g({Fe:t.Fe||this.ze(t),state:t.state}):new f},xe:function(t){var i=t.width&&t.height;return i||"fullscreen"!=t.size?i||"large"!==t.size?i||"wide"!==t.size?i||"small"!==t.size?{width:b.Ii(t,"width"),height:b.Ii(t,"height"),Hi:t.Hi||10,Fi:t.Fi||100}:this.Ge(t):this.qe(t):this.Ue(t):this.Qe(t)},Qe:function(t){var i=b.Ii(t,"window"),e=b.Ii(t,"screen"),n=i.innerWidth>0?i.innerWidth:e.width,o=i.innerHeight>0?i.innerHeight:e.height;return{width:n-10,height:o-10,Hi:this.Xe(n,o),Fi:this.Ke(n)}},Ue:function(t){var i=b.Ii(t,"window"),e=b.Ii(t,"screen"),n=i.innerWidth>0?i.innerWidth:e.width,o=i.innerHeight>0?i.innerHeight:e.height,r=n>1e3?700:300;return{width:r,height:t.height||r,Hi:this.Xe(n,o),Fi:this.Ke(n)}},qe:function(t){var i=b.Ii(t,"window"),e=b.Ii(t,"screen"),n=i.innerWidth>0?i.innerWidth:e.width,o=i.innerHeight>0?i.innerHeight:e.height,r=n<1200?n:1200;return{width:r,height:t.height||r/2,Hi:this.Xe(n,o),Fi:this.Ke(n)}},Ge:function(t){var i=b.Ii(t,"window"),e=b.Ii(t,"screen"),n=i.innerWidth>0?i.innerWidth:e.width,o=i.innerHeight>0?i.innerHeight:e.height;return{width:300,height:t.height||500,Hi:this.Xe(n,o),Fi:this.Ke(n)}},Xe:function(t,i){return t>1e3?10:Math.min(t,i)/20},Ke:function(t){return t>1e3?100:250}}},{We:3,He:5,bi:6,Ye:11,Ve:28,Je:29,Ze:30,$e:31,tn:32,vi:34,se:17,he:18,in:19,en:20,nn:21,on:22,rn:23,ce:24}],27:[function(t,i,e){function n(t){a.apply(this),t&&(this.Fe=t.Fe,this.text=t.text,this.xt=t.xt,this.sn=new o({name:"EditableLabel({ text: '"+this.text+"'})"}),this.hn=t.hn||function(){},this.link=t.link)}var o=t("../ModeSwitch"),r=t("../components/BlockText"),s=t("../components/Link"),h=t("../components/TextBox"),c=t("../utils"),u=t("../Logger"),a=t("../TrackedObject"),d=new u("EditableLabel");n.prototype=Object.assign(new a,{className:"EditableLabel",J:function(){return{Fe:this.Fe,text:this.text,xt:this.xt,hn:this.hn,link:this.link}},display:function(){return d.debug("displaying text",this.text),this.Kt(),this.sn.Et("edit",function(t){this.cn(t.un.Ni()),t.un.remove(),d.debug("got text from input component",this.text)}.bind(this)).Et("display",function(t){t.un.remove()}),this.text&&this.sn.Nt("display",function(){var t=this.Fe.St({Tt:this.link?s:r,ct:c.Yi({text:this.text,link:this.link}),xt:this.xt});return this.hn({text:this.text,link:this.link}),d.debug("displaying component text='"+this.text+"'"+(this.link?", link='"+this.link+"'":"")),{un:t}}.bind(this)),this},an:function(){return d.debug("editing text",this.text),this.Kt(),this.sn.Et("display",function(t){t.un.remove(),d.debug("closed display component")}.bind(this)).Et("edit",function(t){t.un.remove()}),this.sn.Nt("edit",function(){var t=this.Fe.St({Tt:h,ct:{text:this.dn(),Ci:this.display.bind(this)},xt:this.xt});return d.debug("opened edit component"),{un:t}}.bind(this)),this},Kt:function(){if(!this.Fe)throw new Error("componentManager is required");if(!this.sn)throw new Error("modeSwitch is required")},remove:function(){return d.debug("removing",this),this.sn.Et("display",function(t){t.un.remove(),d.debug("closed display component")}).Et("edit",function(t){t.un.remove(),d.debug("closed edit component")}),this},ln:function(t){t.un.remove()},cn:function(t){var i;t&&(i=/\[(.*)\]\((.*)\)/.exec(t))?(this.text=i[1],this.link=i[2]):(this.text=t,this.link=null)},dn:function(){return this.text&&this.link?"["+this.text+"]("+this.link+")":this.text}}),n.fn={create:function(t){return new n(t)}},i.t=n},{bi:6,gn:7,Bi:8,wn:10,pn:12,mn:14,vi:34}],28:[function(t,i,e){function n(){o.apply(this)}var o=t("../TrackedObject");n.prototype=Object.assign(new o,{className:"EmptyLabelSet",J:function(){return{}},initialize:function(){},an:function(){},display:function(){},oe:function(){}}),i.t=n},{Bi:8}],29:[function(t,i,e){function n(t){c.apply(this),this.Fe=t&&t.Fe,this.state=t&&t.state,this.bn=t&&t.bn||r.fn,this.labels={},this.id=a++}var o=t("../geometry/Position"),r=t("./EditableLabel"),s=t("../utils"),h=t("../Logger"),c=t("../TrackedObject"),u=new h("NodeLabelSet"),a=0;n.prototype=Object.assign(new c,{className:"NodeLabelSet",J:function(){return{Fe:this.Fe,state:this.state}},initialize:function(t){u.debug("initializing",t),t.filter(function(t){return!!t.label}).forEach(function(t){var i=this.vn(t);this.labels[t.$i.id]=i,i.display()}.bind(this))},an:function(t){u.debug("editing label for node "+t.id),this.En(t).an()},display:function(t){u.debug("displaying label for node "+t.id),this.En(t).display()},oe:function(){u.debug("closing all labels",this.labels),Object.values(this.labels).forEach(function(t){t.remove()}),this.labels={}},En:function(t){var i;return this.labels[t.id]?(i=this.labels[t.id],u.info("reusing existing label for node "+t.id,i)):(i=this.vn({$i:t}),this.labels[t.id]=i,u.info("created new label for node "+t.id,i)),i},vn:function(t){var i=s.Ii(t,"node"),e=t.label,n=t.link;return u.debug("Creating label",i),this.bn.create({text:e,Fe:this.Fe,xt:function(){return new o({xi:i.Ee().yi()})},hn:function(t){u.debug("saving label",i,t),this.state.zi({id:i.id,label:t.text,link:t.link})}.bind(this),link:n})},Kt:function(){if(!this.Fe)throw new Error("componentManager is required");if(!this.state)throw new Error("state is required")}}),i.t=n},{bi:6,Bi:8,An:16,vi:34,Cn:27}],30:[function(t,i,e){function n(){o.apply(this,arguments)}var o=t("./EditMode");n.prototype=Object.assign(new o,{className:"DisallowedEditMode",mi:function(){},Kt:function(){}}),i.t=n},{Nn:31}],31:[function(t,i,e){function n(t){h.apply(this),this.g=t&&t.g,this.Be=t&&t.Be,this.A=t&&t.A||250,this.Ui=t&&t.Ui,this.sn=t&&t.sn||new o({name:"editMode"}),this.sn.Nt("display")}var o=t("../ModeSwitch"),r=t("../colors"),s=t("../Logger"),h=t("../TrackedObject"),c=new s("EditMode");n.prototype=Object.assign(new h,{className:"EditMode",J:function(){return{g:this.g,Be:this.Be,A:this.A,Ui:this.Ui,sn:this.sn}},mi:function(t){c.info("activating"),this.Kt(),this.sn.Et("display").Et("edit",this.On.bind(this)).Nt("edit",function(){var i=this.g.me(function(i){return i.id!==t.id}),e=i.reduce(function(t,i){return t[i.id]=i.color,t},{}),n=this._n(i,e);this.Ui.an(t);var o={$i:t,animation:n,Ln:i,jn:e};return c.debug("activated",o),o}.bind(this))},fi:function(){c.debug("deactvating"),this.Kt(),this.sn.Et("edit",this.On.bind(this)).Nt("display",function(){c.debug("deactvated")})},ai:function(t){t=Object.assign({Jt:function(){},gi:function(){}},t),this.Kt(),this.sn.Jt({an:function(i){t.Jt(i.$i)},display:t.gi})},yn:function(t){t.forEach(function(t){this.g.Di(t,r.ri)}.bind(this))},Mn:function(t,i){t.forEach(function(t){this.g.Di(t,i[t.id])}.bind(this))},On:function(t){c.debug("cleaning up edit mode state",t),t.animation.stop(),this.Ui.display(t.$i),this.Mn(t.Ln,t.jn)},_n:function(t,i){return this.Be.nt(this.yn.bind(this,t),this.Mn.bind(this,t,i)).every(this.A).play()},Kt:function(){if(!this.g)throw new Error("adapter is required");if(!this.Be)throw new Error("animator is required");if(!this.sn)throw new Error("modeSwitch is required")}}),i.t=n},{bi:6,gn:7,Bi:8,re:9}],32:[function(t,i,e){function n(){o.apply(this,arguments)}var o=t("./EditMode"),r=new(t("../Logger"))("NonAnimatingEditMode");n.prototype=Object.assign(new o,{className:"NonAnimatingEditMode",_n:function(){return r.debug("not animating for edit mode"),{stop:function(){}}},Kt:function(){if(!this.g)throw new Error("adapter is required");if(!this.sn)throw new Error("modeSwitch is required")}}),i.t=n},{bi:6,Nn:31}],33:[function(t,i,e){function n(t){h.apply(this),this.o=t&&t.o,this.s=t&&t.s,this.h=t&&t.h}var o=t("../utils"),r=t("../utils/Literal"),s=t("../Logger"),h=t("../TrackedObject"),c=new s("UrlState");NUM_NODES_PARAM="n",COLOR_PARAM_PREFIX="c_",EDGE_PARAM_PREFIX="e_",LABEL_PARAM_PREFIX="l_",LINK_PARAM_PREFIX="li_",n.prototype=Object.assign(new h,{className:"UrlState",J:function(){return{o:this.o,s:new r("window.history.replaceState.bind(window.history, {}, '')"),h:new r("new URLSearchParams(window.location.search)")}},zi:function(t){var i;return(t=t||{}).hasOwnProperty("id")&&null!==t.id&&void 0!==t.id?i=t.id:(i=this.kn(),this.h.set(NUM_NODES_PARAM,i+1)),t.hasOwnProperty("color")&&this.Rn(i,t.color),t.hasOwnProperty("label")&&this.Sn(i,t.label),t.hasOwnProperty("link")&&this.Tn(i,t.link),this.Pn(),i},xn:function(t){var i=this.In(t),e=this.Dn().find(function(t){return this.zn({Bn:i,Fn:t})}.bind(this)),n=this.h.get(LABEL_PARAM_PREFIX+t),r=this.h.get(LINK_PARAM_PREFIX+t);return o.Yi({id:t,color:e&&e.replace(COLOR_PARAM_PREFIX,"#"),label:n&&decodeURIComponent(n),link:r&&decodeURIComponent(r)},{Ji:"id"})},qi:function(t,i){var e,n=EDGE_PARAM_PREFIX+t;e=this.h.has(n)?this.Gn(n)|this.In(i):this.In(i),this.qn(n,e),this.Pn()},S:function(){var t=[];if(this.h.has(NUM_NODES_PARAM))for(var i=0;i<this.h.get(NUM_NODES_PARAM);i++)t.push(this.xn(i));return t},P:function(){return this.Un().map(function(t){for(var i=parseInt(t.replace(EDGE_PARAM_PREFIX,"")),e=[],n=this.Gn(t),o=n.toString(2).length,r=0;r<o;r++){var s=this.In(r);(n&s)===s&&e.push({source:i,target:r})}return e}.bind(this)).reduce(function(t,i){return t.concat(i)},[])},Sn:function(t,i){i?this.h.set(LABEL_PARAM_PREFIX+t,encodeURIComponent(i)):this.h.delete(LABEL_PARAM_PREFIX+t)},Tn:function(t,i){i?this.h.set(LINK_PARAM_PREFIX+t,encodeURIComponent(i)):this.h.delete(LINK_PARAM_PREFIX+t)},Qn:function(){return this.o+"?"+this.h.toString()},reset:function(){c.debug("resetting"),this.Xn().forEach(function(t){this.h.delete(t)}.bind(this)),this.Pn()},zn:function(t){return t=this.Kn(t),!!this.h.has(t.Fn)&&(this.Gn(t.Fn)&t.Bn)===t.Bn},Wn:function(t){t=this.Kn(t);var i;i=this.h.has(t.Fn)?this.Gn(t.Fn)|t.Bn:t.Bn,this.qn(t.Fn,i)},Hn:function(t){if(t=this.Kn(t),!this.h.has(t.Fn))throw Error("Attempted to remove color "+t.Fn);var i=this.Gn(t.Fn)&~t.Bn;0===i?this.h.delete(t.Fn):this.qn(t.Fn,i)},Gn:function(t){return parseInt(this.h.get(t),16)},qn:function(t,i){this.h.set(t,i.toString(16))},In:function(t){return t<=30?1<<t:Math.pow(2,t)},Kn:function(t){if(!t.hasOwnProperty("bit")&&!t.hasOwnProperty("nodeId"))throw Error("bit or nodeId is required");if(!t.hasOwnProperty("color")&&!t.hasOwnProperty("colorKey"))throw Error("color or colorKey is required");return{Bn:t.hasOwnProperty("bit")?t.Bn:this.In(t.Yn),Fn:t.hasOwnProperty("colorKey")?t.Fn:t.color.replace("#",COLOR_PARAM_PREFIX)}},Dn:function(){return this.Xn(function(t){return t.startsWith(COLOR_PARAM_PREFIX)})},Un:function(){return this.Xn(function(t){return t.startsWith(EDGE_PARAM_PREFIX)})},Xn:function(t){t=t||function(){return!0};for(var i=[],e=this.h.keys(),n=e.next();!n.done;)t(n.value)&&i.push(n.value),n=e.next();return i},kn:function(){return this.h.has(NUM_NODES_PARAM)?parseInt(this.h.get(NUM_NODES_PARAM)):0},Rn:function(t,i){var e=this.In(t);this.Dn().forEach(function(t){this.zn({Bn:e,Fn:t})&&this.Hn({Bn:e,Fn:t})}.bind(this)),i&&this.Wn({Bn:e,color:i})},Pn:function(){this.s(this.Qn())}}),i.t=n},{bi:6,Bi:8,vi:34,Le:35}],34:[function(t,i,e){function n(t,i){function e(t){return" ".repeat(i)+t}function s(t){return" ".repeat(i+2)+t}return i=i||0,t instanceof r?t.value:Array.isArray(t)?"[\n"+t.map(function(t){return n(t,i+2)+","}).map(s).join("\n")+"\n"+e("]"):t&&t.className&&t.J?"new "+t.className+"({\n"+Object.keys(t.J()).map(function(e){return e+": "+n(t.J()[e],i+2)+","}).map(s).join("\n")+"\n"+e("})"):t&&"object"==typeof t?"{\n"+Object.keys(t).map(function(e){return e+": "+n(t[e],i+2)+","}).map(s).join("\n")+"\n"+e("}"):t&&"string"==typeof t?"'"+o(t,"'","\\'")+"'":t||0===t?t.toString():"null"}function o(t,i,e){return t.split(i).join(e)}var r=t("./utils/Literal");i.t={Gi:function(t,i){var e=t.x-i.x,n=t.y-i.y;return Math.sqrt(e*e+n*n)},Yi:function(t,i){var e={};return Object.keys(t).forEach(function(i){t[i]&&(e[i]=t[i])}),i&&i.Ji&&(i.Ji.constructor===Array?i.Ji.forEach(function(i){e[i]=t[i]}):e[i.Ji]=t[i.Ji]),e},vt:function(t){return t&&t.touches&&t.touches.length?Object.assign(t,{clientX:t.touches[0].clientX,clientY:t.touches[0].clientY,screenX:t.touches[0].screenX,screenY:t.touches[0].screenY}):t},Si:function(t){return!(!t||"object"!=typeof t||Array.isArray(t))&&1===Object.keys(t).filter(function(i){return!!t[i]}).length},Wi:function(t,i){var e=t.indexOf(i);if(e>=0){for(var n=[],o=e;o<t.length;o++)n.push(t[o]);for(o=0;o<e;o++)n.push(t[o]);return n}return t},Vn:n,Jn:o,Ii:function(t,i){if(!t[i])throw new Error("missing required property "+i);return t[i]}}},{$:35}],35:[function(t,i,e){i.t=function(t){this.value=t}},{}]},{},[1]);