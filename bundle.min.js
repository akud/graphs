!function t(e,i,n){function o(s,a){if(!i[s]){if(!e[s]){var c="function"==typeof require&&require;if(!a&&c)return c(s,!0);if(r)return r(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var d=i[s]={exports:{}};e[s][0].call(d.exports,function(t){var i=e[s][1][t];return o(i||t)},d,d.exports,t,e,i,n)}return i[s].exports}for(var r="function"==typeof require&&require,s=0;s<n.length;s++)o(n[s]);return o}({1:[function(t,e,i){(function(e){var i=t("./src/graphs/GreulerAdapter"),n=t("./src/state/UrlState"),o=t("./src/ActionQueue"),r=(t("./src/components/ResetButton"),t("./src/graphs/graphfactory"));t("./src/Logger").level=e.logLevel;var s=new o,a=new URLSearchParams(window.location.search),c=new n({baseUrl:window.location.protocol+"//"+window.location.host+window.location.pathname,setUrl:window.history.replaceState.bind(window.history,{},""),urlSearchParams:a}),u="true"===a.get("immutable"),d="false"!==a.get("allowAddNodes"),l="false"!==a.get("allowAddEdges"),h="false"!==a.get("allowEdit"),g="false"!==a.get("allowChangeColors"),p="false"!==a.get("allowLabels"),f="true"===a.get("directed");e.graphComponent=r.newGraphComponent({document:e.document,screen:e.screen,window:window,size:"fullscreen",adapter:new i({greuler:e.greuler}),actionQueue:s,state:c,nodeAreaFuzzFactor:.1,alternateInterval:250,immutable:u,allowAddNodes:d,allowAddEdges:l,allowChangeColors:g,allowEdit:h,allowLabels:p,colorChoices:a.has("colorChoices")&&a.getAll("colorChoices").map(function(t){return 0===t.indexOf("#")?t:"#"+t}),directed:f,initialNodes:c.retrievePersistedNodes(),initialEdges:c.retrievePersistedEdges()}),e.graph=e.graphComponent.graph,e.graphComponent.attachTo(document.getElementById("main-graph"))}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./src/ActionQueue":2,"./src/Logger":6,"./src/components/ResetButton":13,"./src/graphs/GreulerAdapter":20,"./src/graphs/graphfactory":26,"./src/state/UrlState":33}],2:[function(t,e,i){(function(i){function n(t){r.apply(this),this.setTimeout=t&&t.setTimeout||i.setTimeout.bind(i),this.clearTimeout=t&&t.clearTimeout||i.clearTimeout.bind(i),this.actionInterval=t&&t.actionInterval||10,this.periodicActions=[],this.hasStartedPeriodicActions=!1}var o=t("./utils/Literal"),r=t("./TrackedObject");n.prototype=Object.assign(new r,{className:"ActionQueue",defer:function(t,e){1==arguments.length&&(e=t,t=1);var i=this.setTimeout(e,t);return{cancel:function(){this.clearTimeout(i)}.bind(this)}},periodically:function(t){var e=this.periodicActions;return e.push(t),this.hasStartedPeriodicActions||this._startPeriodicActions(),{cancel:function(){e.splice(e.indexOf(t),1)}}},_startPeriodicActions:function(){var t=function(){this.periodicActions.forEach(function(t){t()}),this.setTimeout(t,this.actionInterval)}.bind(this);t(),this.hasStartedPeriodicActions=!0},getConstructorArgs:function(){return{setTimeout:new o("global.setTimeout.bind(global)"),clearTimeout:new o("global.clearTimeout.bind(global)"),actionInterval:this.actionInterval}}}),e.exports=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./TrackedObject":8,"./utils/Literal":35}],3:[function(t,e,i){function n(t){r.apply(this),this.actionQueue=t&&t.actionQueue}function o(t,e){this.actionQueue=t,this.functions=e,this.currentIndex=0,this.interval=100,this.predicate=function(){return!0}}var r=t("./TrackedObject");n.prototype=Object.assign(new r,{className:"Animator",alternate:function(){return this._checkDependencies(),new o(this.actionQueue,Array.prototype.slice.call(arguments))},getConstructorArgs:function(){return{actionQueue:this.actionQueue}},_checkDependencies:function(){if(!this.actionQueue)throw Error("ActionQueue is required")}}),o.prototype={every:function(t){return this.interval=t,this},asLongAs:function(t){return this.predicate=t,this},play:function(){var t=function(){this.predicate()&&(this.functions[this.currentIndex](),this.currentIndex=(this.currentIndex+1)%this.functions.length,this.actionQueue.defer(this.interval,t))}.bind(this);return t(),this},stop:function(){return this.asLongAs(function(){return!1})}},e.exports=n},{"./TrackedObject":8}],4:[function(t,e,i){function n(t){s.apply(this),t&&(this.actionQueue=t.actionQueue,this.holdTime=t.holdTime||250,this.mouseTouchSwitch=new r({actionQueue:this.actionQueue,timeout:500,name:"mouseTouchSwitch"}),this.constructorArgs=t),this.mouseDownCount=0,this.mouseUpCount=0,this.isInClickAndHold=!1,this.closeListeners=[]}var o=t("./utils"),r=t("./ModeSwitch"),s=t("./TrackedObject"),a=new(t("./Logger"))("Component");n.prototype=Object.assign(new s,{handleClick:function(){},handleClickAndHold:function(){},handleEnter:function(){},className:"",getConstructorArgs:function(){return this.constructorArgs},attachTo:function(t){this._validateOptions(),this.element=t,t.addEventListener("mouseup",function(t){a.debug("mouseup",o.normalizeEvent(t)),this.mouseTouchSwitch.exit("mouse",function(t){this._handleMouseUp(t.lastDownEvent)}.bind(this))}.bind(this)),t.addEventListener("touchend",function(t){a.debug("touchend",o.normalizeEvent(t)),this.mouseTouchSwitch.exit("touch",function(t){this._handleMouseUp(t.lastDownEvent)}.bind(this))}.bind(this)),t.addEventListener("mousedown",function(t){t=o.normalizeEvent(t),a.debug("mousedown",t),this.mouseTouchSwitch.enter("mouse",function(){return this._handleMouseDown(t),{lastDownEvent:t}}.bind(this))}.bind(this)),t.addEventListener("touchstart",function(t){t=o.normalizeEvent(t),a.debug("touchstart",t),this.mouseTouchSwitch.enter("touch",function(){return this._handleMouseDown(t),{lastDownEvent:t}}.bind(this))}.bind(this)),t.addEventListener("keyup",function(t){t=o.normalizeEvent(t),a.debug("keyup",t),13===t.keyCode&&this.handleEnter(t)}.bind(this)),this.getGeneratedMarkup()&&(t.innerHTML=this.getGeneratedMarkup()),this.doAttach(t)},getGeneratedMarkup:function(){return null},doAttach:function(t){},onRemove:function(t){return this.closeListeners.push(t),this},remove:function(){this.closeListeners.forEach(function(t){t(this)}.bind(this)),this.element.remove(),a.debug("closed component",this)},_validateOptions:function(){if(!this.actionQueue)throw Error("actionQueue is required");if(!this.className)throw new Error("Must override className")},_handleMouseUp:function(t){this.mouseUpCount++,this.isInClickAndHold?this.isInClickAndHold=!1:this.handleClick(t)},_handleMouseDown:function(t){var e=++this.mouseDownCount;this.actionQueue.defer(this.holdTime,function(){this.mouseDownCount===e&&this.mouseUpCount===this.mouseDownCount-1&&(this.isInClickAndHold=!0,this.handleClickAndHold(t))}.bind(this))}}),e.exports=n},{"./Logger":6,"./ModeSwitch":7,"./TrackedObject":8,"./utils":34}],5:[function(t,e,i){function n(t){a.apply(this),this.document=t&&t.document,this.actionQueue=t&&t.actionQueue,this.componentServices=t&&t.componentServices}t("./utils");var o=t("./geometry/Position"),r=t("./Component"),s=t("./utils/Literal"),a=t("./TrackedObject");n.prototype=Object.assign(new a,{className:"ComponentManager",getConstructorArgs:function(){return{document:new s("global.document"),actionQueue:this.actionQueue,componentServices:this.componentServices}},insertComponent:function(t){var e=new((t=Object.assign({position:new o({topLeft:{x:0,y:0}}),pinTo:void 0,class:r,constructorArgs:void 0},t)).class)(Object.assign({},this.componentServices,t.constructorArgs)),i=this.document.createElement("div");if(t.position&&this._setPositionOnElement(t.position,i),"function"==typeof t.pinTo){var n=this.actionQueue.periodically(function(){this._setPositionOnElement(t.pinTo(),i)}.bind(this));e.onRemove(n.cancel.bind(n))}return this.document.body.insertBefore(i,this.document.body.firstChild),e.attachTo(i),e},_setPositionOnElement:function(t,e){var i=t.getElementPosition({width:e.offsetWidth,height:e.offsetHeight});e.style.position="fixed",e.style.zIndex="1",e.style.top=i.top+"px",e.style.left=i.left+"px"}}),e.exports=n},{"./Component":4,"./TrackedObject":8,"./geometry/Position":16,"./utils":34,"./utils/Literal":35}],6:[function(t,e,i){(function(t){function i(t){this.name=t||"Logger"}var n=["DEBUG","INFO","WARN","ERROR"];i.level="WARN",i.levels={},i.prototype={debug:function(t,e){this._log.apply(this,[(new Date).getTime(),"DEBUG",this.name].concat(Array.prototype.splice.call(arguments,0)))},info:function(t,e){this._log.apply(this,[(new Date).getTime(),"INFO",this.name].concat(Array.prototype.splice.call(arguments,0)))},warn:function(t,e){this._log.apply(this,[(new Date).getTime(),"WARN",this.name].concat(Array.prototype.splice.call(arguments,0)))},error:function(t,e){this._log.apply(this,[(new Date).getTime(),"ERROR",this.name].concat(Array.prototype.splice.call(arguments,0)))},_log:function(){var e=arguments[1],o=i.levels[this.name]||i.level;n.indexOf(e)>=n.indexOf(o)&&t.console.log.apply(t.console.log,arguments)}},e.exports=i}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],7:[function(t,e,i){function n(t){r.apply(this),this.actionQueue=t&&t.actionQueue,this.timeout=t&&t.timeout||0,this.modeStates=t&&t.initialStates||{},this.name=t&&t.name||"ModeSwitch",this.currentMode=null,this.resetModeFuture=null,s.debug("Initialized "+this.name,this)}var o=t("./Logger"),r=t("./TrackedObject"),s=new o("ModeSwitch");n.prototype=Object.assign(new r,{className:"ModeSwitch",getConstructorArgs:function(){return{actionQueue:this.actionQueue,timeout:this.timeout,initialStates:this.modeStates,name:this.name}},enter:function(t,e){if(this._validate(),this._isPermitted(t)){s.debug(this.name+": Entering '"+t+"'",this);var i=(e||function(){})();this.modeStates[t]=i,this.currentMode=t,this._cancelModeReset()}else s.debug(this.name+": Not entering '"+t+"'; active mode is "+this.currentMode,this);return this},exit:function(t,e){return this._validate(),this._isActive(t)?(s.debug(this.name+": Exiting "+t,this),(e||function(){})(this.modeStates[t]),this._scheduleModeReset()):s.debug(this.name+": Not exiting '"+t+"'; active mode is "+this.currentMode,this),this},ifActive:function(t){var e=this.currentMode||"default",i=t[e];return i?(s.debug(this.name+": Found callback for active mode",e,t),i(this.modeStates[this.currentMode||"default"])):s.debug(this.name+": No callback for active mode",e,t),this},_isPermitted:function(t){return!this.currentMode||this._isActive(t)},_isActive:function(t){return this.currentMode===t},_cancelModeReset:function(){this.resetModeFuture&&this.resetModeFuture.cancel()},_scheduleModeReset:function(){var t=function(){delete this.modeStates[this.currentMode],this.currentMode=null}.bind(this);this._cancelModeReset(),this.timeout?this.resetModeFuture=this.actionQueue.defer(this.timeout,t):t()},_validate:function(){if(this.timeout&&!this.actionQueue)throw new Error("action queue is required if a timeout is specified")}}),e.exports=n},{"./Logger":6,"./TrackedObject":8}],8:[function(t,e,i){var n=0;e.exports=function(){this.id=n++}},{}],9:[function(t,e,i){e.exports={RED:"#db190f",ORANGE:"#f76402",YELLOW:"#fbff14",GREEN:"#28b92b",BLUE:"#2826b5",INDIGO:"#2980B9",VIOLET:"#8c28b7",NEON:"#00FF00",RAINBOW:["#db190f","#f76402","#fbff14","#28b92b","#2826b5","#2980B9","#8c28b7"]}},{}],10:[function(t,e,i){function n(t){o.apply(this,arguments),this.text=t&&t.text}var o=t("../Component");n.prototype=Object.assign(new o,{className:"BlockText",getGeneratedMarkup:function(){return this.text&&"<p>"+this.text+"</p>"}}),e.exports=n},{"../Component":4}],11:[function(t,e,i){function n(t){o.apply(this,arguments),this.editMode=t&&t.editMode,this.graph=t&&t.graph,this.width=t&&t.width,this.height=t&&t.height}var o=t("../Component");t("../utils"),new(t("../Logger"))("GraphComponent");n.prototype=Object.assign(new o,{className:"GraphComponent",doAttach:function(t){this.graph.initialize({element:t,width:this.width,height:this.height})},handleClick:function(t){var e=this.graph.getNearestElement({x:t.clientX,y:t.clientY});this.editMode.perform({ifActive:function(t){e.isNode()&&e.id!==t.id?this.graph.addEdge(t,e):this.editMode.deactivate()}.bind(this),ifNotActive:function(){e.isNode()?this.graph.changeColor(e):this.graph.addNode()}.bind(this)})},handleClickAndHold:function(t){var e=this.graph.getNearestElement({x:t.clientX,y:t.clientY});e.isNode()&&this.editMode.activate(e)},reset:function(){this.graph.reset(),this.editMode.deactivate()},_validateOptions:function(){if(o.prototype._validateOptions.call(this,arguments),!this.editMode)throw new Error("edit mode is required");if(!this.graph)throw new Error("graph is required")}}),e.exports=n},{"../Component":4,"../Logger":6,"../utils":34}],12:[function(t,e,i){function n(t){o.apply(this,arguments),this.text=t&&t.text,this.link=t&&t.link}var o=t("../Component");n.prototype=Object.assign(new o,{className:"Link",getGeneratedMarkup:function(){return this.text&&this.link?'<a href="'+this.link+'">'+this.text+"</a>":null}}),e.exports=n},{"../Component":4}],13:[function(t,e,i){function n(t){o.apply(this,arguments),this.resettables=t?t.resettables:[]}var o=t("../Component");n.prototype=Object.assign(new o,{className:"ResetButton",handleClick:function(t){this.resettables.forEach(function(t){t.reset()})}}),e.exports=n},{"../Component":4}],14:[function(t,e,i){function n(t){o.apply(this,arguments),this.initialText=t&&t.text||"",this.onSave=t&&t.onSave||function(){}}var o=t("../Component");n.prototype=Object.assign(new o,{className:"TextBox",getGeneratedMarkup:function(){return'<input type="text" value="'+this.initialText+'"></input>'},getText:function(){return this.element.getElementsByTagName("input")[0].value},handleEnter:function(t){this.onSave()}}),e.exports=n},{"../Component":4}],15:[function(t,e,i){function n(t){this.dimensions=t||{left:0,top:0,right:0,bottom:0}}n.prototype={className:"BoundingBox",getConstructorArgs:function(){return this.dimensions},expandBy:function(t){return new n({left:this.dimensions.left-this.getWidth()*t,right:this.dimensions.right+this.getWidth()*t,top:this.dimensions.top-this.getHeight()*t,bottom:this.dimensions.bottom+this.getHeight()*t})},translate:function(t){return new n({left:this.dimensions.left+t.x,right:this.dimensions.right+t.x,top:this.dimensions.top+t.y,bottom:this.dimensions.bottom+t.y})},contains:function(t){return this.dimensions.left<=t.x&&t.x<=this.dimensions.right&&this.dimensions.top<=t.y&&t.y<=this.dimensions.bottom},getCenter:function(){return{x:this.dimensions.left+this.getWidth()/2,y:this.dimensions.top+this.getHeight()/2}},getTopLeft:function(){return{x:this.dimensions.left,y:this.dimensions.top}},getTopRight:function(){return{x:this.dimensions.right,y:this.dimensions.top}},getBottomLeft:function(){return{x:this.dimensions.left,y:this.dimensions.bottom}},getBottomRight:function(){return{x:this.dimensions.right,y:this.dimensions.bottom}},getWidth:function(){return this.dimensions.right-this.dimensions.left},getHeight:function(){return this.dimensions.bottom-this.dimensions.top}},e.exports=n},{}],16:[function(t,e,i){function n(t){if(!o.isOneValuedObject(t))throw new Error("invalid position object "+t);Object.assign(this,t)}var o=t("../utils");n.prototype={className:"Position",getConstructorArgs:function(){return this},getElementPosition:function(t){if(t=Object.assign({width:0,height:0},t),this.topLeft)return{left:this.topLeft.x,top:this.topLeft.y};if(this.topRight)return{left:this.topRight.x-t.width,top:this.topRight.y};if(this.bottomLeft)return{left:this.bottomLeft.x,top:this.bottomLeft.y-t.height};if(this.bottomRight)return{left:this.bottomRight.x-t.width,top:this.bottomRight.y-t.height};throw new Error("invalid position object: "+this)}},e.exports=n},{"../utils":34}],17:[function(t,e,i){function n(){o.apply(this)}var o=t("../TrackedObject"),r=t("../utils");n.prototype=Object.assign(new o,{className:"ColorChanger",getConstructorArgs:function(){return{}},setColor:function(t){var e=r.requireNonNull(t,"adapter"),i=r.requireNonNull(t,"state"),n=r.requireNonNull(t,"node"),o=r.requireNonNull(t,"color");e.setNodeColor(n,o),i.persistNode({id:n.id,color:o})}}),e.exports=n},{"../TrackedObject":8,"../utils":34}],18:[function(t,e,i){function n(){o.apply(this)}var o=t("../TrackedObject"),r=t("../utils");n.prototype=Object.assign(new o,{className:"EdgeCreator",getConstructorArgs:function(){return{}},addEdge:function(t){var e=r.requireNonNull(t,"adapter"),i=r.requireNonNull(t,"state"),n=r.requireNonNull(t,"source"),o=r.requireNonNull(t,"target"),s=t.edgeDistance,a=t.directed;e.addEdge({source:n,target:o,distance:s,directed:a}),i.persistEdge(n.id,o.id)}}),e.exports=n},{"../TrackedObject":8,"../utils":34}],19:[function(t,e,i){function n(t){d.apply(this),this.state=t&&t.state,this.adapter=t&&t.adapter,this.actionQueue=t&&t.actionQueue,this.labelSet=t&&t.labelSet,this.nodeCreator=t&&t.nodeCreator||new a,this.edgeCreator=t&&t.edgeCreator||new c,this.colorChanger=t&&t.colorChanger||new u,this.colorChoices=t&&t.colorChoices||r.startingAt(o.RAINBOW,o.INDIGO),this.nodeSize=t&&t.nodeSize,this.edgeDistance=t&&t.edgeDistance,this.initialNodes=t&&t.initialNodes||[],this.initialEdges=t&&t.initialEdges||[],this.nodeAreaFuzzFactor=t&&t.nodeAreaFuzzFactor||0,this.directed=!(!t||!t.directed),this.constructorArgs=t}var o=t("../colors"),r=t("../utils"),s=t("../Logger"),a=t("./NodeCreator"),c=t("./EdgeCreator"),u=t("./ColorChanger"),d=t("../TrackedObject"),l=new s("Graph");n.prototype=Object.assign(new d,{className:"Graph",getConstructorArgs:function(){return Object.assign({initialNodes:this.state.retrievePersistedNodes(),initialEdges:this.state.retrievePersistedEdges()},this.constructorArgs)},initialize:function(t){this._validate(),l.debug("initializing graph",this),this.adapter.initialize(t.element,r.optional({width:t.width,height:t.height,nodes:this.initialNodes.map(function(t){return r.optional({id:t.id,color:t.color||this.colorChoices[0],label:"",size:this.nodeSize},{force:["id","label"]})}.bind(this)),edges:this.initialEdges.map(function(t){return Object.assign({directed:this.directed},t)}.bind(this)),edgeDistance:this.edgeDistance})),this.actionQueue.defer(function(){l.debug("initializing label set"),this.labelSet.initialize(this.initialNodes.map(function(t){return{node:this.adapter.getNode(t.id),label:t.label,link:t.link}}.bind(this)))}.bind(this))},addNode:function(){this.nodeCreator.addNode({state:this.state,adapter:this.adapter,color:this.colorChoices[0],nodeSize:this.nodeSize})},changeColor:function(t){var e=this._getNextColorIndex(t),i=this.colorChoices[e];this.colorChanger.setColor({adapter:this.adapter,state:this.state,node:t,color:i})},addEdge:function(t,e){this.edgeCreator.addEdge({source:t,target:e,adapter:this.adapter,state:this.state,edgeDistance:this.edgeDistance,directed:this.directed})},getNearestElement:function(t){return r.requireNonNull(t,"x"),r.requireNonNull(t,"y"),this.adapter.getNearestElement({point:t,nodeAreaFuzzFactor:this.nodeAreaFuzzFactor})},reset:function(){l.debug("resetting"),this.adapter.performInBulk(function(){this.state.retrievePersistedNodes().forEach(function(t){this.adapter.removeNode(t)}.bind(this))}.bind(this)),this.state.reset(),this.labelSet.closeAll()},_getNextColorIndex:function(t){return(this.colorChoices.indexOf(t.color)+1)%this.colorChoices.length},_validate:function(){if(!this.state)throw new Error("state is required");if(!this.adapter)throw new Error("adapter is required");if(!this.actionQueue)throw new Error("actionQueue is required");if(!this.labelSet)throw new Error("labelSet is required");if(!this.nodeCreator)throw new Error("nodeCreator is required");if(!this.edgeCreator)throw new Error("edgeCreator is required")}}),e.exports=n},{"../Logger":6,"../TrackedObject":8,"../colors":9,"../utils":34,"./ColorChanger":17,"./EdgeCreator":18,"./NodeCreator":24}],20:[function(t,e,i){function n(t){u.apply(this),this.greuler=t&&t.greuler,this.isInBulkOperation=!1}var o=t("./graphelements"),r=t("../utils"),s=t("../geometry/BoundingBox"),a=t("../utils/Literal"),c=t("../Logger"),u=t("../TrackedObject"),d=new c("GreulerAdapter");n.prototype=Object.assign(new u,{className:"GreulerAdapter",getConstructorArgs:function(){return{greuler:new a("global.greuler")}},initialize:function(t,e){e=e||{},this.instance=this.greuler(r.optional({target:"#"+t.id,width:e.width,height:e.height,data:r.optional({nodes:e.nodes&&e.nodes.map(this._translateNodeObj),links:e.edges,linkDistance:e.edgeDistance&&function(){return e.edgeDistance}})})).update(),this.graph=this.instance.graph},addNode:function(t){this.graph.addNode(this._translateNodeObj(t));this._updateInstance()},removeNode:function(t){this.graph.removeNode(this._translateNodeObj(t));this._updateInstance()},addEdge:function(t){this.graph.addEdge(r.optional({source:t.source.id,target:t.target.id,linkDistance:t.distance,directed:!!t.directed},{force:["source","target","directed"]}));this._updateInstance()},setNodeColor:function(t,e){if(t.domElement)t.domElement.setAttribute("fill",e);else if(t.id){var i=this.graph.getNode({id:t.id});this._getDomElement(i).setAttribute("fill",e)}else d.error("Got unexpected target node",t)},getNearestElement:function(t){var e=r.requireNonNull(t,"point"),i=t.nodeAreaFuzzFactor||0;return this._getTargetNode(e,i)||o.NONE},getNode:function(t){return d.debug("retrieving node",t),this.getNodes(function(e){return e.id===t})[0]},getNodes:function(t){return t=t||function(){return!0},this.graph.getNodesByFn(t).map(function(t){var e=this._getDomElement(t);return new o.Node({id:t.id,realNode:t,domElement:e,color:e.getAttribute("fill"),getCurrentBoundingBox:this._getBoundingBox.bind(this,t)})}.bind(this))},performInBulk:function(t){this.isInBulkOperation=!0,t(this),this.isInBulkOperation=!1,this._updateInstance()},_translateNodeObj:function(t){return r.optional({id:t.id,fill:t.color,label:t.label||"",r:t.size},{force:["id","label"]})},_getDomElement:function(t){d.debug("retrieving dom element for node: "+t.index,this.instance);var e=this.instance.nodeGroup[0][0].childNodes;return d.debug(e),e[t.index].getElementsByTagName("circle")[0]},_getTargetNode:function(t,e){var i=this.getNodes(function(i){return this._getBoundingBox(i).expandBy(e).contains(t)}.bind(this));return i&&i.length?(i.sort(function(e,i){return r.distance(e.getCenter(),t)-r.distance(i.getCenter(),t)}),i[0]):void 0},_updateInstance:function(){this.isInBulkOperation||(this.instance=this.instance.update())},_getBoundingBox:function(t){var e=this.instance.root[0][0].getBoundingClientRect();return new s({left:t.bounds.x,right:t.bounds.X,top:t.bounds.y,bottom:t.bounds.Y}).translate({x:e.left,y:e.top})}}),e.exports=n},{"../Logger":6,"../TrackedObject":8,"../geometry/BoundingBox":15,"../utils":34,"../utils/Literal":35,"./graphelements":25}],21:[function(t,e,i){function n(){o.apply(this)}var o=t("../TrackedObject");n.prototype=Object.assign(new o,{className:"NoOpColorChanger",getConstructorArgs:function(){return{}},setColor:function(){}}),e.exports=n},{"../TrackedObject":8}],22:[function(t,e,i){function n(){o.apply(this)}var o=t("../TrackedObject");n.prototype=Object.assign(new o,{className:"NoOpEdgeCreator",getConstructorArgs:function(){return{}},addEdge:function(){}}),e.exports=n},{"../TrackedObject":8}],23:[function(t,e,i){function n(){o.apply(this)}var o=t("../TrackedObject");n.prototype=Object.assign(new o,{className:"NoOpNodeCreator",getConstructorArgs:function(){return{}},addNode:function(){}}),e.exports=n},{"../TrackedObject":8}],24:[function(t,e,i){function n(){o.apply(this)}var o=t("../TrackedObject"),r=t("../utils");n.prototype=Object.assign(new o,{className:"NodeCreator",getConstructorArgs:function(){return{}},addNode:function(t){var e=r.requireNonNull(t,"state"),i=r.requireNonNull(t,"adapter"),n=r.requireNonNull(t,"color"),o=t.nodeSize,s=e.persistNode({color:n}),a=r.optional({id:s,color:n,label:"",size:o},{force:["id","label"]});i.addNode(a)}}),e.exports=n},{"../TrackedObject":8,"../utils":34}],25:[function(t,e,i){function n(t){t&&(this.id=t.id,this.domElement=t.domElement)}function o(t){n.apply(this,arguments),t&&(this.realNode=t.realNode,this.color=t.color,this.getCurrentBoundingBox=t.getCurrentBoundingBox)}function r(){n.apply(this,arguments)}function s(){n.apply(this,arguments)}n.prototype={isNode:function(){return!1},isEdge:function(){return!1}},o.prototype=Object.assign(new n,{isNode:function(){return!0},getCenter:function(){return this.getCurrentBoundingBox().getCenter()},getTopLeft:function(){return this.getCurrentBoundingBox().getTopLeft()},getTopRight:function(){return this.getCurrentBoundingBox().getTopRight()},getBottomLeft:function(){return this.getCurrentBoundingBox().getBottomLeft()},getBottomRight:function(){return this.getCurrentBoundingBox().getBottomRight()}}),r.prototype=Object.assign(new n,{isEdge:function(){return!0}}),s.prototype=Object.assign(new n,{}),e.exports={Node:o,Edge:r,NONE:new s}},{}],26:[function(t,e,i){t("./GreulerAdapter");var n=t("./ColorChanger"),o=t("./EdgeCreator"),r=t("./NodeCreator"),s=t("./NoOpColorChanger"),a=t("./NoOpEdgeCreator"),c=t("./NoOpNodeCreator"),u=t("./Graph"),d=t("../modes/DisallowedEditMode"),l=t("../modes/EditMode"),h=t("../modes/NonAnimatingEditMode"),g=t("../labels/EmptyLabelSet"),p=t("../labels/NodeLabelSet"),f=t("../components/GraphComponent"),m=t("../Animator"),b=t("../ComponentManager"),w=t("../utils"),N=new(t("../Logger"))("graphfactory");e.exports={newGraph:function(t){return t=Object.assign({immutable:!1,allowAddNodes:!0,allowAddEdges:!0,allowChangeColors:!0,allowLabels:!0,directed:!1,nodeAreaFuzzFactor:.1},t),N.debug("instantiating graph",t),new u({actionQueue:w.requireNonNull(t,"actionQueue"),adapter:w.requireNonNull(t,"adapter"),colorChoices:t.colorChoices,colorChanger:this._getColorChanger(t),edgeCreator:this._getEdgeCreator(t),edgeDistance:t.edgeDistance,initialNodes:t.initialNodes,initialEdges:t.initialEdges,labelSet:t.labelSet||this._getLabelSet(t),nodeAreaFuzzFactor:t.nodeAreaFuzzFactor,nodeCreator:this._getNodeCreator(t),nodeSize:t.nodeSize,state:w.requireNonNull(t,"state"),directed:t.directed})},newGraphComponent:function(t){t=Object.assign({immutable:!1,allowAddNodes:!0,allowAddEdges:!0,allowChangeColors:!0,allowLabels:!0,allowEdit:!0,nodeAreaFuzzFactor:.1,alternateInterval:250,size:"large",directed:!1},t),N.debug("instantiating graph component",t);var e=this._getSizing(t),i=this._getLabelSet(t);return new f(Object.assign({graph:this.newGraph(Object.assign({labelSet:i,nodeSize:e.nodeSize,edgeDistance:e.edgeDistance},t)),editMode:this._getEditMode(t,i),width:e.width,height:e.height},this._getComponentServices(t)))},_newComponentManager:function(t){return new b({actionQueue:w.requireNonNull(t,"actionQueue"),componentServices:this._getComponentServices(t),document:w.requireNonNull(t,"document")})},_getComponentServices:function(t){return{actionQueue:w.requireNonNull(t,"actionQueue")}},_getColorChanger:function(t){return t.immutable||!t.allowChangeColors?new s:new n},_getEdgeCreator:function(t){return t.immutable||!t.allowAddEdges?new a:new o},_getNodeCreator:function(t){return t.immutable||!t.allowAddNodes?new c:new r},_getEditMode:function(t,e){return t.immutable||!t.allowEdit?new d:t.allowAddEdges?new l({adapter:w.requireNonNull(t,"adapter"),animator:new m({actionQueue:w.requireNonNull(t,"actionQueue")}),labelSet:e,alternateInterval:t.alternateInterval}):new h({adapter:w.requireNonNull(t,"adapter"),labelSet:e,alternateInterval:t.alternateInterval})},_getLabelSet:function(t){return t.allowLabels?new p({componentManager:t.componentManager||this._newComponentManager(t),state:t.state}):new g},_getSizing:function(t){var e=t.width&&t.height;return e||"fullscreen"!=t.size?e||"large"!==t.size?e||"wide"!==t.size?e||"small"!==t.size?{width:w.requireNonNull(t,"width"),height:w.requireNonNull(t,"height"),nodeSize:t.nodeSize||10,edgeDistance:t.edgeDistance||100}:this._getSmallSizing(t):this._getWideSizing(t):this._getLargeSizing(t):this._getFullScreenSizing(t)},_getFullScreenSizing:function(t){var e=w.requireNonNull(t,"window"),i=w.requireNonNull(t,"screen"),n=e.innerWidth>0?e.innerWidth:i.width,o=e.innerHeight>0?e.innerHeight:i.height;return{width:n-10,height:o-10,nodeSize:this._getNodeSize(n,o),edgeDistance:this._getEdgeDistance(n)}},_getLargeSizing:function(t){var e=w.requireNonNull(t,"window"),i=w.requireNonNull(t,"screen"),n=e.innerWidth>0?e.innerWidth:i.width,o=e.innerHeight>0?e.innerHeight:i.height,r=n>1e3?700:300;return{width:r,height:t.height||r,nodeSize:this._getNodeSize(n,o),edgeDistance:this._getEdgeDistance(n)}},_getWideSizing:function(t){var e=w.requireNonNull(t,"window"),i=w.requireNonNull(t,"screen"),n=e.innerWidth>0?e.innerWidth:i.width,o=e.innerHeight>0?e.innerHeight:i.height,r=n<1200?n:1200;return{width:r,height:t.height||r/2,nodeSize:this._getNodeSize(n,o),edgeDistance:this._getEdgeDistance(n)}},_getSmallSizing:function(t){var e=w.requireNonNull(t,"window"),i=w.requireNonNull(t,"screen"),n=e.innerWidth>0?e.innerWidth:i.width,o=e.innerHeight>0?e.innerHeight:i.height;return{width:300,height:t.height||500,nodeSize:this._getNodeSize(n,o),edgeDistance:this._getEdgeDistance(n)}},_getNodeSize:function(t,e){return t>1e3?10:Math.min(t,e)/20},_getEdgeDistance:function(t){return t>1e3?100:250}}},{"../Animator":3,"../ComponentManager":5,"../Logger":6,"../components/GraphComponent":11,"../labels/EmptyLabelSet":28,"../labels/NodeLabelSet":29,"../modes/DisallowedEditMode":30,"../modes/EditMode":31,"../modes/NonAnimatingEditMode":32,"../utils":34,"./ColorChanger":17,"./EdgeCreator":18,"./Graph":19,"./GreulerAdapter":20,"./NoOpColorChanger":21,"./NoOpEdgeCreator":22,"./NoOpNodeCreator":23,"./NodeCreator":24}],27:[function(t,e,i){function n(t){d.apply(this),t&&(this.componentManager=t.componentManager,this.text=t.text,this.pinTo=t.pinTo,this.modeSwitch=new o({name:"EditableLabel({ text: '"+this.text+"'})"}),this.onChange=t.onChange||function(){},this.link=t.link)}var o=t("../ModeSwitch"),r=t("../components/BlockText"),s=t("../components/Link"),a=t("../components/TextBox"),c=t("../utils"),u=t("../Logger"),d=t("../TrackedObject"),l=new u("EditableLabel");n.prototype=Object.assign(new d,{className:"EditableLabel",getConstructorArgs:function(){return{componentManager:this.componentManager,text:this.text,pinTo:this.pinTo,onChange:this.onChange,link:this.link}},display:function(){return l.debug("displaying text",this.text),this._validate(),this.modeSwitch.exit("edit",function(t){this._setText(t.component.getText()),t.component.remove(),l.debug("got text from input component",this.text)}.bind(this)).exit("display",function(t){t.component.remove()}),this.text&&this.modeSwitch.enter("display",function(){var t=this.componentManager.insertComponent({class:this.link?s:r,constructorArgs:c.optional({text:this.text,link:this.link}),pinTo:this.pinTo});return this.onChange({text:this.text,link:this.link}),l.debug("displaying component text='"+this.text+"'"+(this.link?", link='"+this.link+"'":"")),{component:t}}.bind(this)),this},edit:function(){return l.debug("editing text",this.text),this._validate(),this.modeSwitch.exit("display",function(t){t.component.remove(),l.debug("closed display component")}.bind(this)).exit("edit",function(t){t.component.remove()}),this.modeSwitch.enter("edit",function(){var t=this.componentManager.insertComponent({class:a,constructorArgs:{text:this._getTextForEdit(),onSave:this.display.bind(this)},pinTo:this.pinTo});return l.debug("opened edit component"),{component:t}}.bind(this)),this},_validate:function(){if(!this.componentManager)throw new Error("componentManager is required");if(!this.modeSwitch)throw new Error("modeSwitch is required")},remove:function(){return l.debug("removing",this),this.modeSwitch.exit("display",function(t){t.component.remove(),l.debug("closed display component")}).exit("edit",function(t){t.component.remove(),l.debug("closed edit component")}),this},_closeComponent:function(t){t.component.remove()},_setText:function(t){var e;t&&(e=/\[(.*)\]\((.*)\)/.exec(t))?(this.text=e[1],this.link=e[2]):(this.text=t,this.link=null)},_getTextForEdit:function(){return this.text&&this.link?"["+this.text+"]("+this.link+")":this.text}}),n.Factory={create:function(t){return new n(t)}},e.exports=n},{"../Logger":6,"../ModeSwitch":7,"../TrackedObject":8,"../components/BlockText":10,"../components/Link":12,"../components/TextBox":14,"../utils":34}],28:[function(t,e,i){function n(){o.apply(this)}var o=t("../TrackedObject");n.prototype=Object.assign(new o,{className:"EmptyLabelSet",getConstructorArgs:function(){return{}},initialize:function(){},edit:function(){},display:function(){},closeAll:function(){}}),e.exports=n},{"../TrackedObject":8}],29:[function(t,e,i){function n(t){c.apply(this),this.componentManager=t&&t.componentManager,this.state=t&&t.state,this.editableLabelFactory=t&&t.editableLabelFactory||r.Factory,this.labels={},this.id=d++}var o=t("../geometry/Position"),r=t("./EditableLabel"),s=t("../utils"),a=t("../Logger"),c=t("../TrackedObject"),u=new a("NodeLabelSet"),d=0;n.prototype=Object.assign(new c,{className:"NodeLabelSet",getConstructorArgs:function(){return{componentManager:this.componentManager,state:this.state}},initialize:function(t){u.debug("initializing",t),t.filter(function(t){return!!t.label}).forEach(function(t){var e=this._createLabel(t);this.labels[t.node.id]=e,e.display()}.bind(this))},edit:function(t){u.debug("editing label for node "+t.id),this._getOrCreateLabel(t).edit()},display:function(t){u.debug("displaying label for node "+t.id),this._getOrCreateLabel(t).display()},closeAll:function(){u.debug("closing all labels",this.labels),Object.values(this.labels).forEach(function(t){t.remove()}),this.labels={}},_getOrCreateLabel:function(t){var e;return this.labels[t.id]?(e=this.labels[t.id],u.info("reusing existing label for node "+t.id,e)):(e=this._createLabel({node:t}),this.labels[t.id]=e,u.info("created new label for node "+t.id,e)),e},_createLabel:function(t){var e=s.requireNonNull(t,"node"),i=t.label,n=t.link;return u.debug("Creating label",e),this.editableLabelFactory.create({text:i,componentManager:this.componentManager,pinTo:function(){return new o({bottomRight:e.getCurrentBoundingBox().getTopLeft()})},onChange:function(t){u.debug("saving label",e,t),this.state.persistNode({id:e.id,label:t.text,link:t.link})}.bind(this),link:n})},_validate:function(){if(!this.componentManager)throw new Error("componentManager is required");if(!this.state)throw new Error("state is required")}}),e.exports=n},{"../Logger":6,"../TrackedObject":8,"../geometry/Position":16,"../utils":34,"./EditableLabel":27}],30:[function(t,e,i){function n(){o.apply(this,arguments)}var o=t("./EditMode");n.prototype=Object.assign(new o,{className:"DisallowedEditMode",activate:function(){},_validate:function(){}}),e.exports=n},{"./EditMode":31}],31:[function(t,e,i){function n(t){a.apply(this),this.adapter=t&&t.adapter,this.animator=t&&t.animator,this.alternateInterval=t&&t.alternateInterval||250,this.labelSet=t&&t.labelSet,this.modeSwitch=t&&t.modeSwitch||new o({name:"editMode"}),this.modeSwitch.enter("display")}var o=t("../ModeSwitch"),r=t("../colors"),s=t("../Logger"),a=t("../TrackedObject"),c=new s("EditMode");n.prototype=Object.assign(new a,{className:"EditMode",getConstructorArgs:function(){return{adapter:this.adapter,animator:this.animator,alternateInterval:this.alternateInterval,labelSet:this.labelSet,modeSwitch:this.modeSwitch}},activate:function(t){c.info("activating"),this._validate(),this.modeSwitch.exit("display").exit("edit",this._cleanUpEditState.bind(this)).enter("edit",function(){var e=this.adapter.getNodes(function(e){return e.id!==t.id}),i=e.reduce(function(t,e){return t[e.id]=e.color,t},{}),n=this._startEditAnimation(e,i);this.labelSet.edit(t);var o={node:t,animation:n,otherNodes:e,originalColors:i};return c.debug("activated",o),o}.bind(this))},deactivate:function(){c.debug("deactvating"),this._validate(),this.modeSwitch.exit("edit",this._cleanUpEditState.bind(this)).enter("display",function(){c.debug("deactvated")})},perform:function(t){t=Object.assign({ifActive:function(){},ifNotActive:function(){}},t),this._validate(),this.modeSwitch.ifActive({edit:function(e){t.ifActive(e.node)},display:t.ifNotActive})},_setNeon:function(t){t.forEach(function(t){this.adapter.setNodeColor(t,r.NEON)}.bind(this))},_setOriginalColors:function(t,e){t.forEach(function(t){this.adapter.setNodeColor(t,e[t.id])}.bind(this))},_cleanUpEditState:function(t){c.debug("cleaning up edit mode state",t),t.animation.stop(),this.labelSet.display(t.node),this._setOriginalColors(t.otherNodes,t.originalColors)},_startEditAnimation:function(t,e){return this.animator.alternate(this._setNeon.bind(this,t),this._setOriginalColors.bind(this,t,e)).every(this.alternateInterval).play()},_validate:function(){if(!this.adapter)throw new Error("adapter is required");if(!this.animator)throw new Error("animator is required");if(!this.modeSwitch)throw new Error("modeSwitch is required")}}),e.exports=n},{"../Logger":6,"../ModeSwitch":7,"../TrackedObject":8,"../colors":9}],32:[function(t,e,i){function n(){o.apply(this,arguments)}var o=t("./EditMode"),r=new(t("../Logger"))("NonAnimatingEditMode");n.prototype=Object.assign(new o,{className:"NonAnimatingEditMode",_startEditAnimation:function(){return r.debug("not animating for edit mode"),{stop:function(){}}},_validate:function(){if(!this.adapter)throw new Error("adapter is required");if(!this.modeSwitch)throw new Error("modeSwitch is required")}}),e.exports=n},{"../Logger":6,"./EditMode":31}],33:[function(t,e,i){function n(t){a.apply(this),this.baseUrl=t&&t.baseUrl,this.setUrl=t&&t.setUrl,this.urlSearchParams=t&&t.urlSearchParams}var o=t("../utils"),r=t("../utils/Literal"),s=t("../Logger"),a=t("../TrackedObject"),c=new s("UrlState");NUM_NODES_PARAM="n",COLOR_PARAM_PREFIX="c_",EDGE_PARAM_PREFIX="e_",LABEL_PARAM_PREFIX="l_",LINK_PARAM_PREFIX="li_",n.prototype=Object.assign(new a,{className:"UrlState",getConstructorArgs:function(){return{baseUrl:this.baseUrl,setUrl:new r("window.history.replaceState.bind(window.history, {}, '')"),urlSearchParams:new r("new URLSearchParams(window.location.search)")}},persistNode:function(t){var e;return(t=t||{}).hasOwnProperty("id")&&null!==t.id&&void 0!==t.id?e=t.id:(e=this._getNumNodes(),this.urlSearchParams.set(NUM_NODES_PARAM,e+1)),t.hasOwnProperty("color")&&this._setNodeColor(e,t.color),t.hasOwnProperty("label")&&this._setNodeLabel(e,t.label),t.hasOwnProperty("link")&&this._setNodeLink(e,t.link),this._persistState(),e},retrieveNode:function(t){var e=this._idToBit(t),i=this._getColorKeys().find(function(t){return this._isColor({bit:e,colorKey:t})}.bind(this)),n=this.urlSearchParams.get(LABEL_PARAM_PREFIX+t),r=this.urlSearchParams.get(LINK_PARAM_PREFIX+t);return o.optional({id:t,color:i&&i.replace(COLOR_PARAM_PREFIX,"#"),label:n&&decodeURIComponent(n),link:r&&decodeURIComponent(r)},{force:"id"})},persistEdge:function(t,e){var i,n=EDGE_PARAM_PREFIX+t;i=this.urlSearchParams.has(n)?this._getBitmaskParam(n)|this._idToBit(e):this._idToBit(e),this._setBitmaskParam(n,i),this._persistState()},retrievePersistedNodes:function(){var t=[];if(this.urlSearchParams.has(NUM_NODES_PARAM))for(var e=0;e<this.urlSearchParams.get(NUM_NODES_PARAM);e++)t.push(this.retrieveNode(e));return t},retrievePersistedEdges:function(){return this._getEdgeKeys().map(function(t){for(var e=parseInt(t.replace(EDGE_PARAM_PREFIX,"")),i=[],n=this._getBitmaskParam(t),o=n.toString(2).length,r=0;r<o;r++){var s=this._idToBit(r);(n&s)===s&&i.push({source:e,target:r})}return i}.bind(this)).reduce(function(t,e){return t.concat(e)},[])},_setNodeLabel:function(t,e){e?this.urlSearchParams.set(LABEL_PARAM_PREFIX+t,encodeURIComponent(e)):this.urlSearchParams.delete(LABEL_PARAM_PREFIX+t)},_setNodeLink:function(t,e){e?this.urlSearchParams.set(LINK_PARAM_PREFIX+t,encodeURIComponent(e)):this.urlSearchParams.delete(LINK_PARAM_PREFIX+t)},getUrl:function(){return this.baseUrl+"?"+this.urlSearchParams.toString()},reset:function(){c.debug("resetting"),this._getKeys().forEach(function(t){this.urlSearchParams.delete(t)}.bind(this)),this._persistState()},_isColor:function(t){return t=this._normalizeColorOptions(t),!!this.urlSearchParams.has(t.colorKey)&&(this._getBitmaskParam(t.colorKey)&t.bit)===t.bit},_setColor:function(t){t=this._normalizeColorOptions(t);var e;e=this.urlSearchParams.has(t.colorKey)?this._getBitmaskParam(t.colorKey)|t.bit:t.bit,this._setBitmaskParam(t.colorKey,e)},_removeColor:function(t){if(t=this._normalizeColorOptions(t),!this.urlSearchParams.has(t.colorKey))throw Error("Attempted to remove color "+t.colorKey);var e=this._getBitmaskParam(t.colorKey)&~t.bit;0===e?this.urlSearchParams.delete(t.colorKey):this._setBitmaskParam(t.colorKey,e)},_getBitmaskParam:function(t){return parseInt(this.urlSearchParams.get(t),16)},_setBitmaskParam:function(t,e){this.urlSearchParams.set(t,e.toString(16))},_idToBit:function(t){return t<=30?1<<t:Math.pow(2,t)},_normalizeColorOptions:function(t){if(!t.hasOwnProperty("bit")&&!t.hasOwnProperty("nodeId"))throw Error("bit or nodeId is required");if(!t.hasOwnProperty("color")&&!t.hasOwnProperty("colorKey"))throw Error("color or colorKey is required");return{bit:t.hasOwnProperty("bit")?t.bit:this._idToBit(t.nodeId),colorKey:t.hasOwnProperty("colorKey")?t.colorKey:t.color.replace("#",COLOR_PARAM_PREFIX)}},_getColorKeys:function(){return this._getKeys(function(t){return t.startsWith(COLOR_PARAM_PREFIX)})},_getEdgeKeys:function(){return this._getKeys(function(t){return t.startsWith(EDGE_PARAM_PREFIX)})},_getKeys:function(t){t=t||function(){return!0};for(var e=[],i=this.urlSearchParams.keys(),n=i.next();!n.done;)t(n.value)&&e.push(n.value),n=i.next();return e},_getNumNodes:function(){return this.urlSearchParams.has(NUM_NODES_PARAM)?parseInt(this.urlSearchParams.get(NUM_NODES_PARAM)):0},_setNodeColor:function(t,e){var i=this._idToBit(t);this._getColorKeys().forEach(function(t){this._isColor({bit:i,colorKey:t})&&this._removeColor({bit:i,colorKey:t})}.bind(this)),e&&this._setColor({bit:i,color:e})},_persistState:function(){this.setUrl(this.getUrl())}}),e.exports=n},{"../Logger":6,"../TrackedObject":8,"../utils":34,"../utils/Literal":35}],34:[function(t,e,i){function n(t,e){function i(t){return" ".repeat(e)+t}function s(t){return" ".repeat(e+2)+t}return e=e||0,t instanceof r?t.value:Array.isArray(t)?"[\n"+t.map(function(t){return n(t,e+2)+","}).map(s).join("\n")+"\n"+i("]"):t&&t.className&&t.getConstructorArgs?"new "+t.className+"({\n"+Object.keys(t.getConstructorArgs()).map(function(i){return i+": "+n(t.getConstructorArgs()[i],e+2)+","}).map(s).join("\n")+"\n"+i("})"):t&&"object"==typeof t?"{\n"+Object.keys(t).map(function(i){return i+": "+n(t[i],e+2)+","}).map(s).join("\n")+"\n"+i("}"):t&&"string"==typeof t?"'"+o(t,"'","\\'")+"'":t||0===t?t.toString():"null"}function o(t,e,i){return t.split(e).join(i)}var r=t("./utils/Literal");e.exports={distance:function(t,e){var i=t.x-e.x,n=t.y-e.y;return Math.sqrt(i*i+n*n)},optional:function(t,e){var i={};return Object.keys(t).forEach(function(e){t[e]&&(i[e]=t[e])}),e&&e.force&&(e.force.constructor===Array?e.force.forEach(function(e){i[e]=t[e]}):i[e.force]=t[e.force]),i},normalizeEvent:function(t){return t&&t.touches&&t.touches.length?Object.assign(t,{clientX:t.touches[0].clientX,clientY:t.touches[0].clientY,screenX:t.touches[0].screenX,screenY:t.touches[0].screenY}):t},isOneValuedObject:function(t){return!(!t||"object"!=typeof t||Array.isArray(t))&&1===Object.keys(t).filter(function(e){return!!t[e]}).length},startingAt:function(t,e){var i=t.indexOf(e);if(i>=0){for(var n=[],o=i;o<t.length;o++)n.push(t[o]);for(o=0;o<i;o++)n.push(t[o]);return n}return t},toJs:n,replaceAll:o,requireNonNull:function(t,e){if(!t[e])throw new Error("missing required property "+e);return t[e]}}},{"./utils/Literal":35}],35:[function(t,e,i){e.exports=function(t){this.value=t}},{}]},{},[1]);
