!function t(i,e,n){function o(s,h){if(!e[s]){if(!i[s]){var u="function"==typeof require&&require;if(!h&&u)return u(s,!0);if(r)return r(s,!0);var a=new Error("Cannot find module '"+s+"'");throw a.code="MODULE_NOT_FOUND",a}var c=e[s]={t:{}};i[s][0].call(c.t,function(t){var e=i[s][1][t];return o(e||t)},c,c.t,t,i,e,n)}return e[s].t}for(var r="function"==typeof require&&require,s=0;s<n.length;s++)o(n[s]);return o}({1:[function(t,i,e){(function(i){var e=t("./src/graphs/GreulerAdapter"),n=t("./src/state/UrlState"),o=t("./src/ActionQueue"),r=(t("./src/components/ResetButton"),t("./src/graphs/graphfactory"));t("./src/Logger").level=i.i;var s=new o,h=new URLSearchParams(window.location.search),u=new n({o:window.location.protocol+"//"+window.location.host+window.location.pathname,s:window.history.replaceState.bind(window.history,{},""),h:h}),a="true"===h.get("immutable"),c="false"!==h.get("allowAddNodes"),l="false"!==h.get("allowAddEdges"),f="false"!==h.get("allowEdit"),d="false"!==h.get("allowChangeColors"),g="false"!==h.get("allowLabels");i.u=r.l({document:i.document,screen:i.screen,window:window,size:"fullscreen",g:new e({p:i.p}),m:s,state:u,v:.1,C:250,A:a,N:c,_:l,L:d,M:f,O:g,S:h.has("colorChoices")&&h.getAll("colorChoices").map(function(t){return"#"+t}),R:u.P(),D:u.B()}),i.I=i.u.I,i.u.j(document.getElementById("main-graph"))}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{q:2,G:6,T:11,U:18,F:24,k:31}],2:[function(t,i,e){(function(e){function n(t){this.setTimeout=t&&t.setTimeout||e.setTimeout.bind(e),this.clearTimeout=t&&t.clearTimeout||e.clearTimeout.bind(e),this.X=t&&t.X||10,this.K=[],this.W=!1}var o=t("./utils/Literal");n.prototype={className:"ActionQueue",defer:function(t,i){1==arguments.length&&(i=t,t=1);var e=this.setTimeout(i,t);return{cancel:function(){this.clearTimeout(e)}.bind(this)}},H:function(t){var i=this.K;return i.push(t),this.W||this.Y(),{cancel:function(){i.splice(i.indexOf(t),1)}}},Y:function(){var t=function(){this.K.forEach(function(t){t()}),this.setTimeout(t,this.X)}.bind(this);t(),this.W=!0},V:function(){return{setTimeout:new o("global.setTimeout.bind(global)"),clearTimeout:new o("global.clearTimeout.bind(global)"),X:this.X}}},i.t=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{J:33}],3:[function(t,i,e){function n(t){this.m=t&&t.m}function o(t,i){this.m=t,this.Z=i,this.$=0,this.interval=100,this.tt=function(){return!0}}n.prototype={className:"Animator",it:function(){return this.et(),new o(this.m,Array.prototype.slice.call(arguments))},V:function(){return{m:this.m}},et:function(){if(!this.m)throw Error("ActionQueue is required")}},o.prototype={every:function(t){return this.interval=t,this},nt:function(t){return this.tt=t,this},play:function(){var t=function(){this.tt()&&(this.Z[this.$](),this.$=(this.$+1)%this.Z.length,this.m.defer(this.interval,t))}.bind(this);return t(),this},stop:function(){return this.nt(function(){return!1})}},i.t=n},{}],4:[function(t,i,e){function n(t){t&&(this.m=t.m,this.ot=t.ot||250,this.rt=new r({m:this.m,timeout:500,name:"mouseTouchSwitch"}),this.st=t),this.ht=0,this.ut=0,this.at=!1,this.ct=[]}var o=t("./utils"),r=t("./ModeSwitch"),s=new(t("./Logger"))("Component");n.prototype={lt:function(){},ft:function(){},dt:function(){},className:"",V:function(){return this.st},j:function(t){this.gt(),this.wt=t,t.addEventListener("mouseup",function(t){s.debug("mouseup",o.pt(t)),this.rt.vt("mouse",function(t){this.Et(t.bt)}.bind(this))}.bind(this)),t.addEventListener("touchend",function(t){s.debug("touchend",o.pt(t)),this.rt.vt("touch",function(t){this.Et(t.bt)}.bind(this))}.bind(this)),t.addEventListener("mousedown",function(t){t=o.pt(t),s.debug("mousedown",t),this.rt.Ct("mouse",function(){return this.At(t),{bt:t}}.bind(this))}.bind(this)),t.addEventListener("touchstart",function(t){t=o.pt(t),s.debug("touchstart",t),this.rt.Ct("touch",function(){return this.At(t),{bt:t}}.bind(this))}.bind(this)),t.addEventListener("keyup",function(t){t=o.pt(t),s.debug("keyup",t),13===t.keyCode&&this.dt(t)}.bind(this)),this.Nt()&&(t.innerHTML=this.Nt()),this._t(t)},Nt:function(){return null},_t:function(t){},Lt:function(t){return this.ct.push(t),this},remove:function(){this.ct.forEach(function(t){t(this)}.bind(this)),this.wt.remove(),s.debug("closed component",this)},gt:function(){if(!this.m)throw Error("actionQueue is required");if(!this.className)throw new Error("Must override className")},Et:function(t){this.ut++,this.at?this.at=!1:this.lt(t)},At:function(t){var i=++this.ht;this.m.defer(this.ot,function(){this.ht===i&&this.ut===this.ht-1&&(this.at=!0,this.ft(t))}.bind(this))}},i.t=n},{yt:6,Mt:7,Ot:32}],5:[function(t,i,e){function n(t){this.document=t&&t.document,this.m=t&&t.m,this.St=t&&t.St}t("./utils");var o=t("./geometry/Position"),r=t("./Component"),s=t("./utils/Literal");n.prototype={className:"ComponentManager",V:function(){return{document:new s("global.document"),m:this.m,St:this.St}},Rt:function(t){var i=new((t=Object.assign({position:new o({Pt:{x:0,y:0}}),Dt:void 0,xt:r,st:void 0},t)).xt)(Object.assign({},this.St,t.st)),e=this.document.createElement("div");if(t.position&&this.Bt(t.position,e),"function"==typeof t.Dt){var n=this.m.H(function(){this.Bt(t.Dt(),e)}.bind(this));i.Lt(n.cancel.bind(n))}return this.document.body.insertBefore(e,this.document.body.firstChild),i.j(e),i},Bt:function(t,i){var e=t.zt({width:i.offsetWidth,height:i.offsetHeight});i.style.position="fixed",i.style.top=e.top+"px",i.style.left=e.left+"px"}},i.t=n},{It:4,jt:14,Ot:32,J:33}],6:[function(t,i,e){(function(t){function e(t){this.name=t||"Logger"}var n=["DEBUG","INFO","WARN","ERROR"];e.level="WARN",e.qt={},e.prototype={debug:function(t,i){this.Gt.apply(this,[(new Date).getTime(),"DEBUG",this.name].concat(Array.prototype.splice.call(arguments,0)))},info:function(t,i){this.Gt.apply(this,[(new Date).getTime(),"INFO",this.name].concat(Array.prototype.splice.call(arguments,0)))},warn:function(t,i){this.Gt.apply(this,[(new Date).getTime(),"WARN",this.name].concat(Array.prototype.splice.call(arguments,0)))},error:function(t,i){this.Gt.apply(this,[(new Date).getTime(),"ERROR",this.name].concat(Array.prototype.splice.call(arguments,0)))},Gt:function(){var i=arguments[1],o=e.qt[this.name]||e.level;n.indexOf(i)>=n.indexOf(o)&&t.console.log.apply(t.console.log,arguments)}},i.t=e}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],7:[function(t,i,e){function n(t){this.m=t&&t.m,this.timeout=t&&t.timeout||0,this.Tt=t&&t.Ut||{},this.name=t&&t.name||"ModeSwitch",this.Ft=null,this.kt=null,o.debug("Initialized "+this.name,this)}var o=new(t("./Logger"))("ModeSwitch");n.prototype={className:"ModeSwitch",V:function(){return{m:this.m,timeout:this.timeout,Ut:this.Tt,name:this.name}},Ct:function(t,i){if(this.Qt(),this.Xt(t)){o.debug(this.name+": Entering '"+t+"'",this);var e=(i||function(){})();this.Tt[t]=e,this.Ft=t,this.Kt()}else o.debug(this.name+": Not entering '"+t+"'; active mode is "+this.Ft,this);return this},vt:function(t,i){return this.Qt(),this.Wt(t)?(o.debug(this.name+": Exiting "+t,this),(i||function(){})(this.Tt[t]),this.Ht()):o.debug(this.name+": Not exiting '"+t+"'; active mode is "+this.Ft,this),this},Yt:function(t){var i=this.Ft||"default",e=t[i];return e?(o.debug(this.name+": Found callback for active mode",i,t),e(this.Tt[this.Ft||"default"])):o.debug(this.name+": No callback for active mode",i,t),this},Xt:function(t){return!this.Ft||this.Wt(t)},Wt:function(t){return this.Ft===t},Kt:function(){this.kt&&this.kt.cancel()},Ht:function(){var t=function(){delete this.Tt[this.Ft],this.Ft=null}.bind(this);this.Kt(),this.timeout?this.kt=this.m.defer(this.timeout,t):t()},Qt:function(){if(this.timeout&&!this.m)throw new Error("action queue is required if a timeout is specified")}},i.t=n},{yt:6}],8:[function(t,i,e){i.t={Vt:"#db190f",Jt:"#f76402",Zt:"#fbff14",$t:"#28b92b",ti:"#2826b5",ii:"#2980B9",ei:"#8c28b7",ni:"#00FF00",oi:["#db190f","#f76402","#fbff14","#28b92b","#2826b5","#2980B9","#8c28b7"]}},{}],9:[function(t,i,e){function n(t){o.apply(this,arguments),this.text=t&&t.text}var o=t("../Component");n.prototype=Object.assign(new o,{className:"BlockText",Nt:function(){return this.text&&"<p>"+this.text+"</p>"}}),i.t=n},{ri:4}],10:[function(t,i,e){function n(t){o.apply(this,arguments),this.g=t&&t.g,this.si=t&&t.si,this.I=t&&t.I,this.width=t&&t.width,this.height=t&&t.height,this.v=t.v}var o=t("../Component");t("../utils"),new(t("../Logger"))("GraphComponent");n.prototype=Object.assign(new o,{className:"GraphComponent",_t:function(t){this.I.initialize({wt:t,width:this.width,height:this.height})},lt:function(t){var i=this.g.hi(t,this.v);this.si.ui({Yt:function(t){i.ai()&&i.id!==t.id?this.I.ci(t,i):this.si.li()}.bind(this),fi:function(){i.ai()?this.I.di(i):this.I.gi()}.bind(this)})},ft:function(t){var i=this.g.hi(t,this.v);i.ai()&&this.si.wi(i)},reset:function(){this.I.reset(),this.si.li()},gt:function(){if(o.prototype.gt.call(this,arguments),!this.g)throw new Error("adapter is required");if(!this.si)throw new Error("edit mode is required");if(!this.I)throw new Error("graph is required")}}),i.t=n},{ri:4,pi:6,mi:32}],11:[function(t,i,e){function n(t){o.apply(this,arguments),this.vi=t?t.vi:[]}var o=t("../Component");n.prototype=Object.assign(new o,{className:"ResetButton",lt:function(t){this.vi.forEach(function(t){t.reset()})}}),i.t=n},{ri:4}],12:[function(t,i,e){function n(t){o.apply(this,arguments),this.Ei=t&&t.text||"",this.bi=t&&t.bi||function(){}}var o=t("../Component");n.prototype=Object.assign(new o,{className:"TextBox",Nt:function(){return'<input type="text" value="'+this.Ei+'"></input>'},Ci:function(){return this.wt.getElementsByTagName("input")[0].value},dt:function(t){this.bi()}}),i.t=n},{ri:4}],13:[function(t,i,e){function n(t){this.dimensions=t||{left:0,top:0,right:0,bottom:0}}n.prototype={className:"BoundingBox",V:function(){return this.dimensions},Ai:function(t){return new n({left:this.dimensions.left-this.Ni()*t,right:this.dimensions.right+this.Ni()*t,top:this.dimensions.top-this._i()*t,bottom:this.dimensions.bottom+this._i()*t})},translate:function(t){return new n({left:this.dimensions.left+t.x,right:this.dimensions.right+t.x,top:this.dimensions.top+t.y,bottom:this.dimensions.bottom+t.y})},contains:function(t){return this.dimensions.left<=t.x&&t.x<=this.dimensions.right&&this.dimensions.top<=t.y&&t.y<=this.dimensions.bottom},Li:function(){return{x:this.dimensions.left+this.Ni()/2,y:this.dimensions.top+this._i()/2}},yi:function(){return{x:this.dimensions.left,y:this.dimensions.top}},Mi:function(){return{x:this.dimensions.right,y:this.dimensions.top}},Oi:function(){return{x:this.dimensions.left,y:this.dimensions.bottom}},Si:function(){return{x:this.dimensions.right,y:this.dimensions.bottom}},Ni:function(){return this.dimensions.right-this.dimensions.left},_i:function(){return this.dimensions.bottom-this.dimensions.top}},i.t=n},{}],14:[function(t,i,e){function n(t){if(!o.Ri(t))throw new Error("invalid position object "+t);Object.assign(this,t)}var o=t("../utils");n.prototype={className:"Position",V:function(){return this},zt:function(t){if(t=Object.assign({width:0,height:0},t),this.Pt)return{left:this.Pt.x,top:this.Pt.y};if(this.xi)return{left:this.xi.x-t.width,top:this.xi.y};if(this.Pi)return{left:this.Pi.x,top:this.Pi.y-t.height};if(this.Di)return{left:this.Di.x-t.width,top:this.Di.y-t.height};throw new Error("invalid position object: "+this)}},i.t=n},{mi:32}],15:[function(t,i,e){function n(){}var o=t("../utils");n.prototype={className:"ColorChanger",V:function(){return{}},setColor:function(t){var i=o.Bi(t,"adapter"),e=o.Bi(t,"state"),n=o.Bi(t,"node"),r=o.Bi(t,"color");i.zi(n,r),e.Ii({id:n.id,color:r})}},i.t=n},{mi:32}],16:[function(t,i,e){function n(){}var o=t("../utils");n.prototype={className:"EdgeCreator",V:function(){return{}},ci:function(t){var i=o.Bi(t,"adapter"),e=o.Bi(t,"state"),n=o.Bi(t,"source"),r=o.Bi(t,"target"),s=t.ji;i.ci({source:n,target:r,qi:s}),e.Gi(n.id,r.id)}},i.t=n},{mi:32}],17:[function(t,i,e){function n(t){this.state=t&&t.state,this.g=t&&t.g,this.m=t&&t.m,this.Ti=t&&t.Ti,this.Ui=t&&t.Ui||new h,this.Fi=t&&t.Fi||new u,this.ki=t&&t.ki||new a,this.S=t&&t.S||r.Qi(o.oi,o.ii),this.Xi=t&&t.Xi,this.ji=t&&t.ji,this.R=t&&t.R||[],this.D=t&&t.D||[],this.st=t}var o=t("../colors"),r=t("../utils"),s=t("../Logger"),h=t("./NodeCreator"),u=t("./EdgeCreator"),a=t("./ColorChanger"),c=new s("Graph");n.prototype={className:"Graph",V:function(){return Object.assign({R:this.state.P(),D:this.state.B()},this.st)},initialize:function(t){this.Qt(),c.debug("initializing graph",this),this.g.initialize(t.wt,r.Ki({width:t.width,height:t.height,Wi:this.R.map(function(t){return r.Ki({id:t.id,color:t.color||this.S[0],label:"",size:this.Xi},{Hi:["id","label"]})}.bind(this)),Yi:this.D,ji:this.ji})),this.m.defer(function(){c.debug("initializing label set"),this.Ti.initialize(this.R.map(function(t){return{Vi:this.g.Ji(t.id),label:t.label}}.bind(this)))}.bind(this))},gi:function(){this.Ui.gi({state:this.state,g:this.g,color:this.S[0],Xi:this.Xi})},di:function(t){var i=this.Zi(t),e=this.S[i];this.ki.setColor({g:this.g,state:this.state,Vi:t,color:e})},ci:function(t,i){this.Fi.ci({source:t,target:i,g:this.g,state:this.state,ji:this.ji})},reset:function(){c.debug("resetting"),this.g.$i(function(){this.state.P().forEach(function(t){this.g.removeNode(t)}.bind(this))}.bind(this)),this.state.reset(),this.Ti.te()},Zi:function(t){return(this.S.indexOf(t.color)+1)%this.S.length},Qt:function(){if(!this.state)throw new Error("state is required");if(!this.g)throw new Error("adapter is required");if(!this.m)throw new Error("actionQueue is required");if(!this.Ti)throw new Error("labelSet is required");if(!this.Ui)throw new Error("nodeCreator is required");if(!this.Fi)throw new Error("edgeCreator is required")}},i.t=n},{pi:6,ie:8,mi:32,ee:15,ne:16,oe:22}],18:[function(t,i,e){function n(t){this.p=t&&t.p,this.re=!1}var o=t("./graphelements"),r=t("../utils"),s=t("../geometry/BoundingBox"),h=t("../utils/Literal"),u=new(t("../Logger"))("GreulerAdapter");n.prototype={className:"GreulerAdapter",V:function(){return{p:new h("global.greuler")}},initialize:function(t,i){i=i||{},this.se=this.p(r.Ki({target:"#"+t.id,width:i.width,height:i.height,data:r.Ki({Wi:i.Wi&&i.Wi.map(this.he),links:i.Yi,ue:i.ji&&function(){return i.ji}})})).update(),this.I=this.se.I},gi:function(t){this.I.gi(this.he(t));this.ae()},removeNode:function(t){this.I.removeNode(this.he(t));this.ae()},ci:function(t){this.I.ci(r.Ki({source:t.source.id,target:t.target.id,ue:t.qi},{Hi:["source","target"]}));this.ae()},zi:function(t,i){if(t.ce)t.ce.setAttribute("fill",i);else if(t.id){var e=this.I.Ji({id:t.id});this.le(e).setAttribute("fill",i)}else u.error("Got unexpected target node",t)},hi:function(t,i){return this.fe(t,i)||o.NONE},Ji:function(t){return u.debug("retrieving node",t),this.de(function(i){return i.id===t})[0]},de:function(t){return t=t||function(){return!0},this.I.ge(t).map(function(t){var i=this.le(t);return new o.Node({id:t.id,we:t,ce:i,color:i.getAttribute("fill"),pe:this.me.bind(this,t)})}.bind(this))},$i:function(t){this.re=!0,t(this),this.re=!1,this.ae()},he:function(t){return r.Ki({id:t.id,fill:t.color,label:t.label||"",r:t.size},{Hi:["id","label"]})},le:function(t){u.debug("retrieving dom element for node: "+t.index,this.se);var i=this.se.ve[0][0].childNodes;return u.debug(i),i[t.index].getElementsByTagName("circle")[0]},fe:function(t,i){i=i||0;var e={x:t.clientX,y:t.clientY},n=this.de(function(t){return this.me(t).Ai(i).contains(e)}.bind(this));return n&&n.length?(n.sort(function(t,i){return r.qi(t.Li(),e)-r.qi(i.Li(),e)}),n[0]):void 0},ae:function(){this.re||(this.se=this.se.update())},me:function(t){var i=this.se.root[0][0].getBoundingClientRect();return new s({left:t.bounds.x,right:t.bounds.Ee,top:t.bounds.y,bottom:t.bounds.be}).translate({x:i.left,y:i.top})}},i.t=n},{pi:6,Ce:13,mi:32,Ae:33,Ne:23}],19:[function(t,i,e){function n(){}n.prototype={className:"NoOpColorChanger",V:function(){return{}},setColor:function(){}},i.t=n},{}],20:[function(t,i,e){function n(){}n.prototype={className:"NoOpEdgeCreator",V:function(){return{}},ci:function(){}},i.t=n},{}],21:[function(t,i,e){function n(){}n.prototype={className:"NoOpNodeCreator",V:function(){return{}},gi:function(){}},i.t=n},{}],22:[function(t,i,e){function n(){}var o=t("../utils");n.prototype={className:"NodeCreator",V:function(){return{}},gi:function(t){var i=o.Bi(t,"state"),e=o.Bi(t,"adapter"),n=o.Bi(t,"color"),r=t.Xi,s=i.Ii({color:n}),h=o.Ki({id:s,color:n,label:"",size:r},{Hi:["id","label"]});e.gi(h)}},i.t=n},{mi:32}],23:[function(t,i,e){function n(t){t&&(this.id=t.id,this.ce=t.ce)}function o(t){n.apply(this,arguments),t&&(this.we=t.we,this.color=t.color,this.pe=t.pe)}function r(){n.apply(this,arguments)}function s(){n.apply(this,arguments)}n.prototype={ai:function(){return!1},_e:function(){return!1}},o.prototype=Object.assign(new n,{ai:function(){return!0},Li:function(){return this.pe().Li()},yi:function(){return this.pe().yi()},Mi:function(){return this.pe().Mi()},Oi:function(){return this.pe().Oi()},Si:function(){return this.pe().Si()}}),r.prototype=Object.assign(new n,{_e:function(){return!0}}),s.prototype=Object.assign(new n,{}),i.t={Node:o,Le:r,NONE:new s}},{}],24:[function(t,i,e){t("./GreulerAdapter");var n=t("./ColorChanger"),o=t("./EdgeCreator"),r=t("./NodeCreator"),s=t("./NoOpColorChanger"),h=t("./NoOpEdgeCreator"),u=t("./NoOpNodeCreator"),a=t("./Graph"),c=t("../modes/DisallowedEditMode"),l=t("../modes/EditMode"),f=t("../modes/NonAnimatingEditMode"),d=t("../labels/EmptyLabelSet"),g=t("../labels/NodeLabelSet"),w=t("../components/GraphComponent"),p=t("../Animator"),m=t("../ComponentManager"),v=t("../utils"),E=new(t("../Logger"))("graphfactory");i.t={ye:function(t){return t=Object.assign({A:!1,N:!0,_:!0,L:!0,O:!0},t),E.debug("instantiating graph",t),new a({m:v.Bi(t,"actionQueue"),g:v.Bi(t,"adapter"),S:t.S,ki:this.Me(t),Fi:this.Oe(t),ji:t.ji,R:t.R,D:t.D,Ti:this.Se(t),Ui:this.Re(t),Xi:t.Xi,state:v.Bi(t,"state")})},l:function(t){t=Object.assign({A:!1,N:!0,_:!0,L:!0,O:!0,M:!0,v:.1,C:250,size:"large"},t),E.debug("instantiating graph component",t);var i=this.xe(t),e=this.Se(t);return new w(Object.assign({I:this.ye(Object.assign({Ti:e,Xi:i.Xi,ji:i.ji},t)),g:v.Bi(t,"adapter"),si:this.Pe(t,e),width:i.width,height:i.height,v:t.v},this.De(t)))},Be:function(t){return new m({m:v.Bi(t,"actionQueue"),St:this.De(t),document:v.Bi(t,"document")})},De:function(t){return{m:v.Bi(t,"actionQueue")}},Me:function(t){return t.A||!t.L?new s:new n},Oe:function(t){return t.A||!t._?new h:new o},Re:function(t){return t.A||!t.N?new u:new r},Pe:function(t,i){return t.A||!t.M?new c:t._?new l({g:v.Bi(t,"adapter"),ze:new p({m:v.Bi(t,"actionQueue")}),Ti:i,C:t.C}):new f({g:v.Bi(t,"adapter"),Ti:i,C:t.C})},Se:function(t){return t.O?new g({Ie:t.Ie||this.Be(t),state:t.state}):new d},xe:function(t){var i=t.width&&t.height;return i||"fullscreen"!=t.size?i||"large"!==t.size?i||"wide"!==t.size?i||"small"!==t.size?{width:v.Bi(t,"width"),height:v.Bi(t,"height"),Xi:t.Xi||10,ji:t.ji||100}:this.je(t):this.qe(t):this.Ge(t):this.Te(t)},Te:function(t){var i=v.Bi(t,"window"),e=v.Bi(t,"screen"),n=i.innerWidth>0?i.innerWidth:e.width,o=i.innerHeight>0?i.innerHeight:e.height;return{width:n-10,height:o-10,Xi:this.Ue(n,o),ji:this.Fe(n)}},Ge:function(t){var i=v.Bi(t,"window"),e=v.Bi(t,"screen"),n=i.innerWidth>0?i.innerWidth:e.width,o=i.innerHeight>0?i.innerHeight:e.height,r=n>1e3?700:300;return{width:r,height:t.height||r,Xi:this.Ue(n,o),ji:this.Fe(n)}},qe:function(t){var i=v.Bi(t,"window"),e=v.Bi(t,"screen"),n=i.innerWidth>0?i.innerWidth:e.width,o=i.innerHeight>0?i.innerHeight:e.height,r=n<1200?n:1200;return{width:r,height:t.height||r/2,Xi:this.Ue(n,o),ji:this.Fe(n)}},je:function(t){var i=v.Bi(t,"window"),e=v.Bi(t,"screen"),n=i.innerWidth>0?i.innerWidth:e.width,o=i.innerHeight>0?i.innerHeight:e.height;return{width:300,height:t.height||500,Xi:this.Ue(n,o),ji:this.Fe(n)}},Ue:function(t,i){return t>1e3?10:Math.min(t,i)/20},Fe:function(t){return t>1e3?100:250}}},{ke:3,Qe:5,pi:6,Xe:10,Ke:26,We:27,He:28,Ye:29,Ve:30,mi:32,ee:15,ne:16,Je:17,Ze:18,$e:19,tn:20,in:21,oe:22}],25:[function(t,i,e){function n(t){t&&(this.Ie=t.Ie,this.text=t.text,this.Dt=t.Dt,this.en=new o({name:"EditableLabel({ text: '"+this.text+"'})"}),this.nn=t.nn||function(){})}var o=t("../ModeSwitch"),r=t("../components/BlockText"),s=t("../components/TextBox"),h=new(t("../Logger"))("EditableLabel");n.prototype={className:"EditableLabel",V:function(){return{Ie:this.Ie,text:this.text,Dt:this.Dt,nn:this.nn}},display:function(){return h.debug("displaying text",this.text),this.Qt(),this.en.vt("edit",function(t){this.text=t.on.Ci(),t.on.remove(),h.debug("got text from input component",this.text)}.bind(this)).vt("display",function(t){t.on.remove()}),this.text&&this.en.Ct("display",function(){var t=this.Ie.Rt({xt:r,st:{text:this.text},Dt:this.Dt});return this.nn(this.text),h.debug("EditableLabel: displaying component with text",this.text),{on:t}}.bind(this)),this},rn:function(){return h.debug("editing text",this.text),this.Qt(),this.en.vt("display",function(t){t.on.remove(),h.debug("closed display component")}.bind(this)).vt("edit",function(t){t.on.remove()}),this.en.Ct("edit",function(){var t=this.Ie.Rt({xt:s,st:{text:this.text,bi:this.display.bind(this)},Dt:this.Dt});return h.debug("opened edit component"),{on:t}}.bind(this)),this},Qt:function(){if(!this.Ie)throw new Error("componentManager is required");if(!this.en)throw new Error("modeSwitch is required")},remove:function(){return h.debug("removing",this),this.en.vt("display",function(t){t.on.remove(),h.debug("closed display component")}).vt("edit",function(t){t.on.remove(),h.debug("closed edit component")}),this},sn:function(t){t.on.remove()}},n.hn={create:function(t){return new n(t)}},i.t=n},{pi:6,un:7,an:9,cn:12}],26:[function(t,i,e){function n(){}n.prototype={className:"EmptyLabelSet",V:function(){return{}},initialize:function(){},rn:function(){},display:function(){},te:function(){}},i.t=n},{}],27:[function(t,i,e){function n(t){this.Ie=t&&t.Ie,this.state=t&&t.state,this.ln=t&&t.ln||r.hn,this.labels={}}var o=t("../geometry/Position"),r=t("./EditableLabel"),s=new(t("../Logger"))("NodeLabelSet");n.prototype={className:"NodeLabelSet",V:function(){return{Ie:this.Ie,state:this.state}},initialize:function(t){s.debug("initializing",t),t.filter(function(t){return!!t.label}).forEach(function(t){var i=this.fn(t.Vi,t.label);this.labels[t.Vi.id]=i,i.display()}.bind(this))},rn:function(t){s.debug("editing label for node "+t.id),this.dn(t).rn()},display:function(t){s.debug("displaying label for node "+t.id),this.dn(t).display()},te:function(){s.debug("closing all labels",this.labels),Object.values(this.labels).forEach(function(t){t.remove()}),this.labels={}},dn:function(t){var i;return this.labels[t.id]?(i=this.labels[t.id],s.info("reusing existing label for node "+t.id,i)):(i=this.fn(t),this.labels[t.id]=i,s.info("created new label for node "+t.id,i)),i},fn:function(t,i){return s.debug("Creating label",t),this.ln.create({text:i,Ie:this.Ie,Dt:function(){return new o({Di:t.pe().yi()})},nn:function(i){s.debug("saving label",t,i),this.state.Ii({id:t.id,label:i})}.bind(this)})},Qt:function(){if(!this.Ie)throw new Error("componentManager is required");if(!this.state)throw new Error("state is required")}},i.t=n},{pi:6,gn:14,wn:25}],28:[function(t,i,e){function n(){o.apply(this,arguments)}var o=t("./EditMode");n.prototype=Object.assign(new o,{className:"DisallowedEditMode",wi:function(){},Qt:function(){}}),i.t=n},{pn:29}],29:[function(t,i,e){function n(t){this.g=t&&t.g,this.ze=t&&t.ze,this.C=t&&t.C||250,this.Ti=t&&t.Ti,this.en=t&&t.en||new o({name:"editMode"}),this.en.Ct("display")}var o=t("../ModeSwitch"),r=t("../colors"),s=new(t("../Logger"))("EditMode");n.prototype={className:"EditMode",V:function(){return{g:this.g,ze:this.ze,C:this.C,Ti:this.Ti,en:this.en}},wi:function(t){s.info("activating"),this.Qt(),this.en.vt("display").vt("edit",this.mn.bind(this)).Ct("edit",function(){var i=this.g.de(function(i){return i.id!==t.id}),e=i.reduce(function(t,i){return t[i.id]=i.color,t},{}),n=this.vn(i,e);this.Ti.rn(t);var o={Vi:t,animation:n,En:i,bn:e};return s.debug("activated",o),o}.bind(this))},li:function(){s.debug("deactvating"),this.Qt(),this.en.vt("edit",this.mn.bind(this)).Ct("display",function(){s.debug("deactvated")})},ui:function(t){t=Object.assign({Yt:function(){},fi:function(){}},t),this.Qt(),this.en.Yt({rn:function(i){t.Yt(i.Vi)},display:t.fi})},Cn:function(t){t.forEach(function(t){this.g.zi(t,r.ni)}.bind(this))},An:function(t,i){t.forEach(function(t){this.g.zi(t,i[t.id])}.bind(this))},mn:function(t){s.debug("cleaning up edit mode state",t),t.animation.stop(),this.Ti.display(t.Vi),this.An(t.En,t.bn)},vn:function(t,i){return this.ze.it(this.Cn.bind(this,t),this.An.bind(this,t,i)).every(this.C).play()},Qt:function(){if(!this.g)throw new Error("adapter is required");if(!this.ze)throw new Error("animator is required");if(!this.en)throw new Error("modeSwitch is required")}},i.t=n},{pi:6,un:7,ie:8}],30:[function(t,i,e){function n(){o.apply(this,arguments)}var o=t("./EditMode"),r=new(t("../Logger"))("NonAnimatingEditMode");n.prototype=Object.assign(new o,{className:"NonAnimatingEditMode",vn:function(){return r.debug("not animating for edit mode"),{stop:function(){}}},Qt:function(){if(!this.g)throw new Error("adapter is required");if(!this.en)throw new Error("modeSwitch is required")}}),i.t=n},{pi:6,pn:29}],31:[function(t,i,e){function n(t){this.o=t&&t.o,this.s=t&&t.s,this.h=t&&t.h}var o=t("../utils"),r=t("../utils/Literal"),s=new(t("../Logger"))("UrlState");NUM_NODES_PARAM="n",COLOR_PARAM_PREFIX="c_",EDGE_PARAM_PREFIX="e_",LABEL_PARAM_PREFIX="l_",n.prototype={className:"UrlState",V:function(){return{o:this.o,s:new r("window.history.replaceState.bind(window.history, {}, '')"),h:new r("new URLSearchParams(window.location.search)")}},Ii:function(t){var i;return(t=t||{}).hasOwnProperty("id")&&null!==t.id&&void 0!==t.id?i=t.id:(i=this.Nn(),this.h.set(NUM_NODES_PARAM,i+1)),t.color&&this._n(i,t.color),t.label&&this.Ln(i,t.label),this.yn(),i},Mn:function(t){var i=this.On(t),e=this.Sn().find(function(t){return this.Rn({xn:i,Pn:t})}.bind(this)),n=this.h.get(LABEL_PARAM_PREFIX+t);return o.Ki({id:t,color:e&&e.replace(COLOR_PARAM_PREFIX,"#"),label:n&&decodeURIComponent(n)},{Hi:"id"})},Gi:function(t,i){var e,n=EDGE_PARAM_PREFIX+t;e=this.h.has(n)?this.Dn(n)|this.On(i):this.On(i),this.Bn(n,e),this.yn()},P:function(){var t=[];if(this.h.has(NUM_NODES_PARAM))for(var i=0;i<this.h.get(NUM_NODES_PARAM);i++)t.push(this.Mn(i));return t},B:function(){return this.zn().map(function(t){for(var i=parseInt(t.replace(EDGE_PARAM_PREFIX,"")),e=[],n=this.Dn(t),o=n.toString(2).length,r=0;r<o;r++){var s=this.On(r);(n&s)===s&&e.push({source:i,target:r})}return e}.bind(this)).reduce(function(t,i){return t.concat(i)},[])},Ln:function(t,i){this.h.set(LABEL_PARAM_PREFIX+t,encodeURIComponent(i))},In:function(){return this.o+"?"+this.h.toString()},reset:function(){s.debug("resetting"),this.jn().forEach(function(t){this.h.delete(t)}.bind(this)),this.yn()},Rn:function(t){return t=this.qn(t),!!this.h.has(t.Pn)&&(this.Dn(t.Pn)&t.xn)===t.xn},Gn:function(t){t=this.qn(t);var i;i=this.h.has(t.Pn)?this.Dn(t.Pn)|t.xn:t.xn,this.Bn(t.Pn,i)},Tn:function(t){if(t=this.qn(t),!this.h.has(t.Pn))throw Error("Attempted to remove color "+t.Pn);var i=this.Dn(t.Pn)&~t.xn;0===i?this.h.delete(t.Pn):this.Bn(t.Pn,i)},Dn:function(t){return parseInt(this.h.get(t),16)},Bn:function(t,i){this.h.set(t,i.toString(16))},On:function(t){return t<=30?1<<t:Math.pow(2,t)},qn:function(t){if(!t.hasOwnProperty("bit")&&!t.hasOwnProperty("nodeId"))throw Error("bit or nodeId is required");if(!t.hasOwnProperty("color")&&!t.hasOwnProperty("colorKey"))throw Error("color or colorKey is required");return{xn:t.hasOwnProperty("bit")?t.xn:this.On(t.Un),Pn:t.hasOwnProperty("colorKey")?t.Pn:t.color.replace("#",COLOR_PARAM_PREFIX)}},Sn:function(){return this.jn(function(t){return t.startsWith(COLOR_PARAM_PREFIX)})},zn:function(){return this.jn(function(t){return t.startsWith(EDGE_PARAM_PREFIX)})},jn:function(t){t=t||function(){return!0};for(var i=[],e=this.h.keys(),n=e.next();!n.done;)t(n.value)&&i.push(n.value),n=e.next();return i},Nn:function(){return this.h.has(NUM_NODES_PARAM)?parseInt(this.h.get(NUM_NODES_PARAM)):0},_n:function(t,i){var e=this.On(t);this.Sn().forEach(function(t){this.Rn({xn:e,Pn:t})&&this.Tn({xn:e,Pn:t})}.bind(this)),this.Gn({xn:e,color:i})},yn:function(){this.s(this.In())}},i.t=n},{pi:6,mi:32,Ae:33}],32:[function(t,i,e){function n(t,i){function e(t){return" ".repeat(i)+t}function s(t){return" ".repeat(i+2)+t}return i=i||0,t instanceof r?t.value:Array.isArray(t)?"[\n"+t.map(function(t){return n(t,i+2)+","}).map(s).join("\n")+"\n"+e("]"):t&&t.className&&t.V?"new "+t.className+"({\n"+Object.keys(t.V()).map(function(e){return e+": "+n(t.V()[e],i+2)+","}).map(s).join("\n")+"\n"+e("})"):t&&"object"==typeof t?"{\n"+Object.keys(t).map(function(e){return e+": "+n(t[e],i+2)+","}).map(s).join("\n")+"\n"+e("}"):t&&"string"==typeof t?"'"+o(t,"'","\\'")+"'":t||0===t?t.toString():"null"}function o(t,i,e){return t.split(i).join(e)}var r=t("./utils/Literal");i.t={qi:function(t,i){var e=t.x-i.x,n=t.y-i.y;return Math.sqrt(e*e+n*n)},Ki:function(t,i){var e={};return Object.keys(t).forEach(function(i){t[i]&&(e[i]=t[i])}),i&&i.Hi&&(i.Hi.constructor===Array?i.Hi.forEach(function(i){e[i]=t[i]}):e[i.Hi]=t[i.Hi]),e},pt:function(t){return t&&t.touches&&t.touches.length?Object.assign(t,{clientX:t.touches[0].clientX,clientY:t.touches[0].clientY,screenX:t.touches[0].screenX,screenY:t.touches[0].screenY}):t},Ri:function(t){return!(!t||"object"!=typeof t||Array.isArray(t))&&1===Object.keys(t).filter(function(i){return!!t[i]}).length},Qi:function(t,i){var e=t.indexOf(i);if(e>=0){for(var n=[],o=e;o<t.length;o++)n.push(t[o]);for(o=0;o<e;o++)n.push(t[o]);return n}return t},Fn:n,kn:o,Bi:function(t,i){if(!t[i])throw new Error("missing required property "+i);return t[i]}}},{J:33}],33:[function(t,i,e){i.t=function(t){this.value=t}},{}]},{},[1]);