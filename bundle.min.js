!function t(i,n,e){function o(s,h){if(!n[s]){if(!i[s]){var u="function"==typeof require&&require;if(!h&&u)return u(s,!0);if(r)return r(s,!0);var a=new Error("Cannot find module '"+s+"'");throw a.code="MODULE_NOT_FOUND",a}var c=n[s]={t:{}};i[s][0].call(c.t,function(t){var n=i[s][1][t];return o(n||t)},c,c.t,t,i,n,e)}return n[s].t}for(var r="function"==typeof require&&require,s=0;s<e.length;s++)o(e[s]);return o}({1:[function(t,i,n){(function(i){var n=t("./src/graphs/GreulerAdapter"),e=t("./src/state/UrlState"),o=t("./src/ActionQueue"),r=(t("./src/components/ResetButton"),t("./src/graphs/graphfactory"));t("./src/Logger").level=i.i;var s=new o,h=new URLSearchParams(window.location.search),u=new e({o:window.location.protocol+"//"+window.location.host+window.location.pathname,s:window.history.replaceState.bind(window.history,{},""),h:h}),a="true"===h.get("immutable"),c="false"!==h.get("allowAddNodes"),l="false"!==h.get("allowAddEdges"),f="false"!==h.get("allowEdit"),d="false"!==h.get("allowChangeColors"),g="false"!==h.get("allowLabels");i.u=r.l({document:i.document,screen:i.screen,window:window,size:"fullscreen",g:new n({p:i.p}),m:s,state:u,v:.1,A:250,C:a,N:c,_:l,L:d,M:f,O:g,R:h.has("colorChoices")&&h.getAll("colorChoices").map(function(t){return"#"+t}),S:u.P(),I:u.D()}),i.B=i.u.B,i.u.k(document.getElementById("main-graph"))}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{F:2,j:6,G:12,q:19,T:25,U:32}],2:[function(t,i,n){(function(n){function e(t){this.setTimeout=t&&t.setTimeout||n.setTimeout.bind(n),this.clearTimeout=t&&t.clearTimeout||n.clearTimeout.bind(n),this.X=t&&t.X||10,this.K=[],this.W=!1}var o=t("./utils/Literal");e.prototype={className:"ActionQueue",defer:function(t,i){1==arguments.length&&(i=t,t=1);var n=this.setTimeout(i,t);return{cancel:function(){this.clearTimeout(n)}.bind(this)}},H:function(t){var i=this.K;return i.push(t),this.W||this.Y(),{cancel:function(){i.splice(i.indexOf(t),1)}}},Y:function(){var t=function(){this.K.forEach(function(t){t()}),this.setTimeout(t,this.X)}.bind(this);t(),this.W=!0},V:function(){return{setTimeout:new o("global.setTimeout.bind(global)"),clearTimeout:new o("global.clearTimeout.bind(global)"),X:this.X}}},i.t=e}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{J:34}],3:[function(t,i,n){function e(t){this.m=t&&t.m}function o(t,i){this.m=t,this.Z=i,this.$=0,this.interval=100,this.tt=function(){return!0}}e.prototype={className:"Animator",it:function(){return this.nt(),new o(this.m,Array.prototype.slice.call(arguments))},V:function(){return{m:this.m}},nt:function(){if(!this.m)throw Error("ActionQueue is required")}},o.prototype={every:function(t){return this.interval=t,this},et:function(t){return this.tt=t,this},play:function(){var t=function(){this.tt()&&(this.Z[this.$](),this.$=(this.$+1)%this.Z.length,this.m.defer(this.interval,t))}.bind(this);return t(),this},stop:function(){return this.et(function(){return!1})}},i.t=e},{}],4:[function(t,i,n){function e(t){t&&(this.m=t.m,this.ot=t.ot||250,this.rt=new r({m:this.m,timeout:500,name:"mouseTouchSwitch"}),this.st=t),this.ht=0,this.ut=0,this.at=!1,this.ct=[]}var o=t("./utils"),r=t("./ModeSwitch"),s=new(t("./Logger"))("Component");e.prototype={lt:function(){},ft:function(){},dt:function(){},className:"",V:function(){return this.st},k:function(t){this.gt(),this.wt=t,t.addEventListener("mouseup",function(t){s.debug("mouseup",o.pt(t)),this.rt.Et("mouse",function(t){this.vt(t.bt)}.bind(this))}.bind(this)),t.addEventListener("touchend",function(t){s.debug("touchend",o.pt(t)),this.rt.Et("touch",function(t){this.vt(t.bt)}.bind(this))}.bind(this)),t.addEventListener("mousedown",function(t){t=o.pt(t),s.debug("mousedown",t),this.rt.At("mouse",function(){return this.Ct(t),{bt:t}}.bind(this))}.bind(this)),t.addEventListener("touchstart",function(t){t=o.pt(t),s.debug("touchstart",t),this.rt.At("touch",function(){return this.Ct(t),{bt:t}}.bind(this))}.bind(this)),t.addEventListener("keyup",function(t){t=o.pt(t),s.debug("keyup",t),13===t.keyCode&&this.dt(t)}.bind(this)),this.Nt()&&(t.innerHTML=this.Nt()),this._t(t)},Nt:function(){return null},_t:function(t){},Lt:function(t){return this.ct.push(t),this},remove:function(){this.ct.forEach(function(t){t(this)}.bind(this)),this.wt.remove(),s.debug("closed component",this)},gt:function(){if(!this.m)throw Error("actionQueue is required");if(!this.className)throw new Error("Must override className")},vt:function(t){this.ut++,this.at?this.at=!1:this.lt(t)},Ct:function(t){var i=++this.ht;this.m.defer(this.ot,function(){this.ht===i&&this.ut===this.ht-1&&(this.at=!0,this.ft(t))}.bind(this))}},i.t=e},{yt:6,Mt:7,Ot:33}],5:[function(t,i,n){function e(t){this.document=t&&t.document,this.m=t&&t.m,this.Rt=t&&t.Rt}t("./utils");var o=t("./geometry/Position"),r=t("./Component"),s=t("./utils/Literal");e.prototype={className:"ComponentManager",V:function(){return{document:new s("global.document"),m:this.m,Rt:this.Rt}},St:function(t){var i=new((t=Object.assign({position:new o({xt:{x:0,y:0}}),It:void 0,Pt:r,st:void 0},t)).Pt)(Object.assign({},this.Rt,t.st)),n=this.document.createElement("div");if(t.position&&this.Dt(t.position,n),"function"==typeof t.It){var e=this.m.H(function(){this.Dt(t.It(),n)}.bind(this));i.Lt(e.cancel.bind(e))}return this.document.body.insertBefore(n,this.document.body.firstChild),i.k(n),i},Dt:function(t,i){var n=t.zt({width:i.offsetWidth,height:i.offsetHeight});i.style.position="fixed",i.style.top=n.top+"px",i.style.left=n.left+"px"}},i.t=e},{Bt:4,kt:15,Ot:33,J:34}],6:[function(t,i,n){(function(t){function n(t){this.name=t||"Logger"}var e=["DEBUG","INFO","WARN","ERROR"];n.level="WARN",n.Ft={},n.prototype={debug:function(t,i){this.jt.apply(this,[(new Date).getTime(),"DEBUG",this.name].concat(Array.prototype.splice.call(arguments,0)))},info:function(t,i){this.jt.apply(this,[(new Date).getTime(),"INFO",this.name].concat(Array.prototype.splice.call(arguments,0)))},warn:function(t,i){this.jt.apply(this,[(new Date).getTime(),"WARN",this.name].concat(Array.prototype.splice.call(arguments,0)))},error:function(t,i){this.jt.apply(this,[(new Date).getTime(),"ERROR",this.name].concat(Array.prototype.splice.call(arguments,0)))},jt:function(){var i=arguments[1],o=n.Ft[this.name]||n.level;e.indexOf(i)>=e.indexOf(o)&&t.console.log.apply(t.console.log,arguments)}},i.t=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],7:[function(t,i,n){function e(t){this.m=t&&t.m,this.timeout=t&&t.timeout||0,this.Gt=t&&t.qt||{},this.name=t&&t.name||"ModeSwitch",this.Tt=null,this.Ut=null,o.debug("Initialized "+this.name,this)}var o=new(t("./Logger"))("ModeSwitch");e.prototype={className:"ModeSwitch",V:function(){return{m:this.m,timeout:this.timeout,qt:this.Gt,name:this.name}},At:function(t,i){if(this.Qt(),this.Xt(t)){o.debug(this.name+": Entering '"+t+"'",this);var n=(i||function(){})();this.Gt[t]=n,this.Tt=t,this.Kt()}else o.debug(this.name+": Not entering '"+t+"'; active mode is "+this.Tt,this);return this},Et:function(t,i){return this.Qt(),this.Wt(t)?(o.debug(this.name+": Exiting "+t,this),(i||function(){})(this.Gt[t]),this.Ht()):o.debug(this.name+": Not exiting '"+t+"'; active mode is "+this.Tt,this),this},Yt:function(t){var i=this.Tt||"default",n=t[i];return n?(o.debug(this.name+": Found callback for active mode",i,t),n(this.Gt[this.Tt||"default"])):o.debug(this.name+": No callback for active mode",i,t),this},Xt:function(t){return!this.Tt||this.Wt(t)},Wt:function(t){return this.Tt===t},Kt:function(){this.Ut&&this.Ut.cancel()},Ht:function(){var t=function(){delete this.Gt[this.Tt],this.Tt=null}.bind(this);this.Kt(),this.timeout?this.Ut=this.m.defer(this.timeout,t):t()},Qt:function(){if(this.timeout&&!this.m)throw new Error("action queue is required if a timeout is specified")}},i.t=e},{yt:6}],8:[function(t,i,n){i.t={Vt:"#db190f",Jt:"#f76402",Zt:"#fbff14",$t:"#28b92b",ti:"#2826b5",ii:"#2980B9",ni:"#8c28b7",ei:"#00FF00",oi:["#db190f","#f76402","#fbff14","#28b92b","#2826b5","#2980B9","#8c28b7"]}},{}],9:[function(t,i,n){function e(t){o.apply(this,arguments),this.text=t&&t.text}var o=t("../Component");e.prototype=Object.assign(new o,{className:"BlockText",Nt:function(){return this.text&&"<p>"+this.text+"</p>"}}),i.t=e},{ri:4}],10:[function(t,i,n){function e(t){o.apply(this,arguments),this.si=t&&t.si,this.B=t&&t.B,this.width=t&&t.width,this.height=t&&t.height}var o=t("../Component");t("../utils"),new(t("../Logger"))("GraphComponent");e.prototype=Object.assign(new o,{className:"GraphComponent",_t:function(t){this.B.initialize({wt:t,width:this.width,height:this.height})},lt:function(t){var i=this.B.hi({x:t.clientX,y:t.clientY});this.si.ui({Yt:function(t){i.ai()&&i.id!==t.id?this.B.ci(t,i):this.si.li()}.bind(this),fi:function(){i.ai()?this.B.di(i):this.B.gi()}.bind(this)})},ft:function(t){var i=this.B.hi({x:t.clientX,y:t.clientY});i.ai()&&this.si.wi(i)},reset:function(){this.B.reset(),this.si.li()},gt:function(){if(o.prototype.gt.call(this,arguments),!this.si)throw new Error("edit mode is required");if(!this.B)throw new Error("graph is required")}}),i.t=e},{ri:4,pi:6,mi:33}],11:[function(t,i,n){function e(t){o.apply(this,arguments),this.text=t&&t.text,this.link=t&&t.link}var o=t("../Component");e.prototype=Object.assign(new o,{className:"Link",Nt:function(){return this.text&&this.link?'<a href="'+this.link+'">'+this.text+"</a>":null}}),i.t=e},{ri:4}],12:[function(t,i,n){function e(t){o.apply(this,arguments),this.Ei=t?t.Ei:[]}var o=t("../Component");e.prototype=Object.assign(new o,{className:"ResetButton",lt:function(t){this.Ei.forEach(function(t){t.reset()})}}),i.t=e},{ri:4}],13:[function(t,i,n){function e(t){o.apply(this,arguments),this.vi=t&&t.text||"",this.bi=t&&t.bi||function(){}}var o=t("../Component");e.prototype=Object.assign(new o,{className:"TextBox",Nt:function(){return'<input type="text" value="'+this.vi+'"></input>'},Ai:function(){return this.wt.getElementsByTagName("input")[0].value},dt:function(t){this.bi()}}),i.t=e},{ri:4}],14:[function(t,i,n){function e(t){this.dimensions=t||{left:0,top:0,right:0,bottom:0}}e.prototype={className:"BoundingBox",V:function(){return this.dimensions},Ci:function(t){return new e({left:this.dimensions.left-this.Ni()*t,right:this.dimensions.right+this.Ni()*t,top:this.dimensions.top-this._i()*t,bottom:this.dimensions.bottom+this._i()*t})},translate:function(t){return new e({left:this.dimensions.left+t.x,right:this.dimensions.right+t.x,top:this.dimensions.top+t.y,bottom:this.dimensions.bottom+t.y})},contains:function(t){return this.dimensions.left<=t.x&&t.x<=this.dimensions.right&&this.dimensions.top<=t.y&&t.y<=this.dimensions.bottom},Li:function(){return{x:this.dimensions.left+this.Ni()/2,y:this.dimensions.top+this._i()/2}},yi:function(){return{x:this.dimensions.left,y:this.dimensions.top}},Mi:function(){return{x:this.dimensions.right,y:this.dimensions.top}},Oi:function(){return{x:this.dimensions.left,y:this.dimensions.bottom}},Ri:function(){return{x:this.dimensions.right,y:this.dimensions.bottom}},Ni:function(){return this.dimensions.right-this.dimensions.left},_i:function(){return this.dimensions.bottom-this.dimensions.top}},i.t=e},{}],15:[function(t,i,n){function e(t){if(!o.Si(t))throw new Error("invalid position object "+t);Object.assign(this,t)}var o=t("../utils");e.prototype={className:"Position",V:function(){return this},zt:function(t){if(t=Object.assign({width:0,height:0},t),this.xt)return{left:this.xt.x,top:this.xt.y};if(this.Pi)return{left:this.Pi.x-t.width,top:this.Pi.y};if(this.xi)return{left:this.xi.x,top:this.xi.y-t.height};if(this.Ii)return{left:this.Ii.x-t.width,top:this.Ii.y-t.height};throw new Error("invalid position object: "+this)}},i.t=e},{mi:33}],16:[function(t,i,n){function e(){}var o=t("../utils");e.prototype={className:"ColorChanger",V:function(){return{}},setColor:function(t){var i=o.Di(t,"adapter"),n=o.Di(t,"state"),e=o.Di(t,"node"),r=o.Di(t,"color");i.zi(e,r),n.Bi({id:e.id,color:r})}},i.t=e},{mi:33}],17:[function(t,i,n){function e(){}var o=t("../utils");e.prototype={className:"EdgeCreator",V:function(){return{}},ci:function(t){var i=o.Di(t,"adapter"),n=o.Di(t,"state"),e=o.Di(t,"source"),r=o.Di(t,"target"),s=t.ki;i.ci({source:e,target:r,Fi:s}),n.ji(e.id,r.id)}},i.t=e},{mi:33}],18:[function(t,i,n){function e(t){this.state=t&&t.state,this.g=t&&t.g,this.m=t&&t.m,this.Gi=t&&t.Gi,this.qi=t&&t.qi||new h,this.Ti=t&&t.Ti||new u,this.Ui=t&&t.Ui||new a,this.R=t&&t.R||r.Qi(o.oi,o.ii),this.Xi=t&&t.Xi,this.ki=t&&t.ki,this.S=t&&t.S||[],this.I=t&&t.I||[],this.v=t&&t.v||0,this.st=t}var o=t("../colors"),r=t("../utils"),s=t("../Logger"),h=t("./NodeCreator"),u=t("./EdgeCreator"),a=t("./ColorChanger"),c=new s("Graph");e.prototype={className:"Graph",V:function(){return Object.assign({S:this.state.P(),I:this.state.D()},this.st)},initialize:function(t){this.Qt(),c.debug("initializing graph",this),this.g.initialize(t.wt,r.Ki({width:t.width,height:t.height,Wi:this.S.map(function(t){return r.Ki({id:t.id,color:t.color||this.R[0],label:"",size:this.Xi},{Hi:["id","label"]})}.bind(this)),Yi:this.I,ki:this.ki})),this.m.defer(function(){c.debug("initializing label set"),this.Gi.initialize(this.S.map(function(t){return{Vi:this.g.Ji(t.id),label:t.label,link:t.link}}.bind(this)))}.bind(this))},gi:function(){this.qi.gi({state:this.state,g:this.g,color:this.R[0],Xi:this.Xi})},di:function(t){var i=this.Zi(t),n=this.R[i];this.Ui.setColor({g:this.g,state:this.state,Vi:t,color:n})},ci:function(t,i){this.Ti.ci({source:t,target:i,g:this.g,state:this.state,ki:this.ki})},hi:function(t){return r.Di(t,"x"),r.Di(t,"y"),this.g.hi({$i:t,v:this.v})},reset:function(){c.debug("resetting"),this.g.tn(function(){this.state.P().forEach(function(t){this.g.removeNode(t)}.bind(this))}.bind(this)),this.state.reset(),this.Gi.in()},Zi:function(t){return(this.R.indexOf(t.color)+1)%this.R.length},Qt:function(){if(!this.state)throw new Error("state is required");if(!this.g)throw new Error("adapter is required");if(!this.m)throw new Error("actionQueue is required");if(!this.Gi)throw new Error("labelSet is required");if(!this.qi)throw new Error("nodeCreator is required");if(!this.Ti)throw new Error("edgeCreator is required")}},i.t=e},{pi:6,nn:8,mi:33,en:16,on:17,rn:23}],19:[function(t,i,n){function e(t){this.p=t&&t.p,this.sn=!1}var o=t("./graphelements"),r=t("../utils"),s=t("../geometry/BoundingBox"),h=t("../utils/Literal"),u=new(t("../Logger"))("GreulerAdapter");e.prototype={className:"GreulerAdapter",V:function(){return{p:new h("global.greuler")}},initialize:function(t,i){i=i||{},this.hn=this.p(r.Ki({target:"#"+t.id,width:i.width,height:i.height,data:r.Ki({Wi:i.Wi&&i.Wi.map(this.un),links:i.Yi,an:i.ki&&function(){return i.ki}})})).update(),this.B=this.hn.B},gi:function(t){this.B.gi(this.un(t));this.cn()},removeNode:function(t){this.B.removeNode(this.un(t));this.cn()},ci:function(t){this.B.ci(r.Ki({source:t.source.id,target:t.target.id,an:t.Fi},{Hi:["source","target"]}));this.cn()},zi:function(t,i){if(t.ln)t.ln.setAttribute("fill",i);else if(t.id){var n=this.B.Ji({id:t.id});this.fn(n).setAttribute("fill",i)}else u.error("Got unexpected target node",t)},hi:function(t){var i=r.Di(t,"point"),n=t.v||0;return this.dn(i,n)||o.NONE},Ji:function(t){return u.debug("retrieving node",t),this.gn(function(i){return i.id===t})[0]},gn:function(t){return t=t||function(){return!0},this.B.wn(t).map(function(t){var i=this.fn(t);return new o.Node({id:t.id,pn:t,ln:i,color:i.getAttribute("fill"),mn:this.En.bind(this,t)})}.bind(this))},tn:function(t){this.sn=!0,t(this),this.sn=!1,this.cn()},un:function(t){return r.Ki({id:t.id,fill:t.color,label:t.label||"",r:t.size},{Hi:["id","label"]})},fn:function(t){u.debug("retrieving dom element for node: "+t.index,this.hn);var i=this.hn.vn[0][0].childNodes;return u.debug(i),i[t.index].getElementsByTagName("circle")[0]},dn:function(t,i){var n=this.gn(function(n){return this.En(n).Ci(i).contains(t)}.bind(this));return n&&n.length?(n.sort(function(i,n){return r.Fi(i.Li(),t)-r.Fi(n.Li(),t)}),n[0]):void 0},cn:function(){this.sn||(this.hn=this.hn.update())},En:function(t){var i=this.hn.root[0][0].getBoundingClientRect();return new s({left:t.bounds.x,right:t.bounds.bn,top:t.bounds.y,bottom:t.bounds.An}).translate({x:i.left,y:i.top})}},i.t=e},{pi:6,Cn:14,mi:33,Nn:34,_n:24}],20:[function(t,i,n){function e(){}e.prototype={className:"NoOpColorChanger",V:function(){return{}},setColor:function(){}},i.t=e},{}],21:[function(t,i,n){function e(){}e.prototype={className:"NoOpEdgeCreator",V:function(){return{}},ci:function(){}},i.t=e},{}],22:[function(t,i,n){function e(){}e.prototype={className:"NoOpNodeCreator",V:function(){return{}},gi:function(){}},i.t=e},{}],23:[function(t,i,n){function e(){}var o=t("../utils");e.prototype={className:"NodeCreator",V:function(){return{}},gi:function(t){var i=o.Di(t,"state"),n=o.Di(t,"adapter"),e=o.Di(t,"color"),r=t.Xi,s=i.Bi({color:e}),h=o.Ki({id:s,color:e,label:"",size:r},{Hi:["id","label"]});n.gi(h)}},i.t=e},{mi:33}],24:[function(t,i,n){function e(t){t&&(this.id=t.id,this.ln=t.ln)}function o(t){e.apply(this,arguments),t&&(this.pn=t.pn,this.color=t.color,this.mn=t.mn)}function r(){e.apply(this,arguments)}function s(){e.apply(this,arguments)}e.prototype={ai:function(){return!1},Ln:function(){return!1}},o.prototype=Object.assign(new e,{ai:function(){return!0},Li:function(){return this.mn().Li()},yi:function(){return this.mn().yi()},Mi:function(){return this.mn().Mi()},Oi:function(){return this.mn().Oi()},Ri:function(){return this.mn().Ri()}}),r.prototype=Object.assign(new e,{Ln:function(){return!0}}),s.prototype=Object.assign(new e,{}),i.t={Node:o,yn:r,NONE:new s}},{}],25:[function(t,i,n){t("./GreulerAdapter");var e=t("./ColorChanger"),o=t("./EdgeCreator"),r=t("./NodeCreator"),s=t("./NoOpColorChanger"),h=t("./NoOpEdgeCreator"),u=t("./NoOpNodeCreator"),a=t("./Graph"),c=t("../modes/DisallowedEditMode"),l=t("../modes/EditMode"),f=t("../modes/NonAnimatingEditMode"),d=t("../labels/EmptyLabelSet"),g=t("../labels/NodeLabelSet"),w=t("../components/GraphComponent"),p=t("../Animator"),m=t("../ComponentManager"),E=t("../utils"),v=new(t("../Logger"))("graphfactory");i.t={Mn:function(t){return t=Object.assign({C:!1,N:!0,_:!0,L:!0,O:!0,v:.1},t),v.debug("instantiating graph",t),new a({m:E.Di(t,"actionQueue"),g:E.Di(t,"adapter"),R:t.R,Ui:this.On(t),Ti:this.Rn(t),ki:t.ki,S:t.S,I:t.I,Gi:this.Sn(t),v:t.v,qi:this.Pn(t),Xi:t.Xi,state:E.Di(t,"state")})},l:function(t){t=Object.assign({C:!1,N:!0,_:!0,L:!0,O:!0,M:!0,v:.1,A:250,size:"large"},t),v.debug("instantiating graph component",t);var i=this.xn(t),n=this.Sn(t);return new w(Object.assign({B:this.Mn(Object.assign({Gi:n,Xi:i.Xi,ki:i.ki},t)),si:this.In(t,n),width:i.width,height:i.height},this.Dn(t)))},zn:function(t){return new m({m:E.Di(t,"actionQueue"),Rt:this.Dn(t),document:E.Di(t,"document")})},Dn:function(t){return{m:E.Di(t,"actionQueue")}},On:function(t){return t.C||!t.L?new s:new e},Rn:function(t){return t.C||!t._?new h:new o},Pn:function(t){return t.C||!t.N?new u:new r},In:function(t,i){return t.C||!t.M?new c:t._?new l({g:E.Di(t,"adapter"),Bn:new p({m:E.Di(t,"actionQueue")}),Gi:i,A:t.A}):new f({g:E.Di(t,"adapter"),Gi:i,A:t.A})},Sn:function(t){return t.O?new g({kn:t.kn||this.zn(t),state:t.state}):new d},xn:function(t){var i=t.width&&t.height;return i||"fullscreen"!=t.size?i||"large"!==t.size?i||"wide"!==t.size?i||"small"!==t.size?{width:E.Di(t,"width"),height:E.Di(t,"height"),Xi:t.Xi||10,ki:t.ki||100}:this.Fn(t):this.jn(t):this.Gn(t):this.qn(t)},qn:function(t){var i=E.Di(t,"window"),n=E.Di(t,"screen"),e=i.innerWidth>0?i.innerWidth:n.width,o=i.innerHeight>0?i.innerHeight:n.height;return{width:e-10,height:o-10,Xi:this.Tn(e,o),ki:this.Un(e)}},Gn:function(t){var i=E.Di(t,"window"),n=E.Di(t,"screen"),e=i.innerWidth>0?i.innerWidth:n.width,o=i.innerHeight>0?i.innerHeight:n.height,r=e>1e3?700:300;return{width:r,height:t.height||r,Xi:this.Tn(e,o),ki:this.Un(e)}},jn:function(t){var i=E.Di(t,"window"),n=E.Di(t,"screen"),e=i.innerWidth>0?i.innerWidth:n.width,o=i.innerHeight>0?i.innerHeight:n.height,r=e<1200?e:1200;return{width:r,height:t.height||r/2,Xi:this.Tn(e,o),ki:this.Un(e)}},Fn:function(t){var i=E.Di(t,"window"),n=E.Di(t,"screen"),e=i.innerWidth>0?i.innerWidth:n.width,o=i.innerHeight>0?i.innerHeight:n.height;return{width:300,height:t.height||500,Xi:this.Tn(e,o),ki:this.Un(e)}},Tn:function(t,i){return t>1e3?10:Math.min(t,i)/20},Un:function(t){return t>1e3?100:250}}},{Qn:3,Xn:5,pi:6,Kn:10,Wn:27,Hn:28,Yn:29,Vn:30,Jn:31,mi:33,en:16,on:17,Zn:18,$n:19,te:20,ie:21,ne:22,rn:23}],26:[function(t,i,n){function e(t){t&&(this.kn=t.kn,this.text=t.text,this.It=t.It,this.ee=new o({name:"EditableLabel({ text: '"+this.text+"'})"}),this.oe=t.oe||function(){},this.link=t.link)}var o=t("../ModeSwitch"),r=t("../components/BlockText"),s=t("../components/Link"),h=t("../components/TextBox"),u=t("../utils"),a=new(t("../Logger"))("EditableLabel");e.prototype={className:"EditableLabel",V:function(){return{kn:this.kn,text:this.text,It:this.It,oe:this.oe,link:this.link}},display:function(){return a.debug("displaying text",this.text),this.Qt(),this.ee.Et("edit",function(t){this.re(t.se.Ai()),t.se.remove(),a.debug("got text from input component",this.text)}.bind(this)).Et("display",function(t){t.se.remove()}),this.text&&this.ee.At("display",function(){var t=this.kn.St({Pt:this.link?s:r,st:u.Ki({text:this.text,link:this.link}),It:this.It});return this.oe({text:this.text,link:this.link}),a.debug("displaying component text='"+this.text+"'"+(this.link?", link='"+this.link+"'":"")),{se:t}}.bind(this)),this},he:function(){return a.debug("editing text",this.text),this.Qt(),this.ee.Et("display",function(t){t.se.remove(),a.debug("closed display component")}.bind(this)).Et("edit",function(t){t.se.remove()}),this.ee.At("edit",function(){var t=this.kn.St({Pt:h,st:{text:this.ue(),bi:this.display.bind(this)},It:this.It});return a.debug("opened edit component"),{se:t}}.bind(this)),this},Qt:function(){if(!this.kn)throw new Error("componentManager is required");if(!this.ee)throw new Error("modeSwitch is required")},remove:function(){return a.debug("removing",this),this.ee.Et("display",function(t){t.se.remove(),a.debug("closed display component")}).Et("edit",function(t){t.se.remove(),a.debug("closed edit component")}),this},ae:function(t){t.se.remove()},re:function(t){var i;t&&(i=/\[(.*)\]\((.*)\)/.exec(t))?(this.text=i[1],this.link=i[2]):(this.text=t,this.link=null)},ue:function(){return this.text&&this.link?"["+this.text+"]("+this.link+")":this.text}},e.ce={create:function(t){return new e(t)}},i.t=e},{pi:6,le:7,fe:9,de:11,ge:13,mi:33}],27:[function(t,i,n){function e(){}e.prototype={className:"EmptyLabelSet",V:function(){return{}},initialize:function(){},he:function(){},display:function(){},in:function(){}},i.t=e},{}],28:[function(t,i,n){function e(t){this.kn=t&&t.kn,this.state=t&&t.state,this.we=t&&t.we||r.ce,this.labels={}}var o=t("../geometry/Position"),r=t("./EditableLabel"),s=t("../utils"),h=new(t("../Logger"))("NodeLabelSet");e.prototype={className:"NodeLabelSet",V:function(){return{kn:this.kn,state:this.state}},initialize:function(t){h.debug("initializing",t),t.filter(function(t){return!!t.label}).forEach(function(t){var i=this.pe(t);this.labels[t.Vi.id]=i,i.display()}.bind(this))},he:function(t){h.debug("editing label for node "+t.id),this.me(t).he()},display:function(t){h.debug("displaying label for node "+t.id),this.me(t).display()},in:function(){h.debug("closing all labels",this.labels),Object.values(this.labels).forEach(function(t){t.remove()}),this.labels={}},me:function(t){var i;return this.labels[t.id]?(i=this.labels[t.id],h.info("reusing existing label for node "+t.id,i)):(i=this.pe({Vi:t}),this.labels[t.id]=i,h.info("created new label for node "+t.id,i)),i},pe:function(t){var i=s.Di(t,"node"),n=t.label,e=t.link;return h.debug("Creating label",i),this.we.create({text:n,kn:this.kn,It:function(){return new o({Ii:i.mn().yi()})},oe:function(t){h.debug("saving label",i,t),this.state.Bi({id:i.id,label:t.text,link:t.link})}.bind(this),link:e})},Qt:function(){if(!this.kn)throw new Error("componentManager is required");if(!this.state)throw new Error("state is required")}},i.t=e},{pi:6,Ee:15,mi:33,ve:26}],29:[function(t,i,n){function e(){o.apply(this,arguments)}var o=t("./EditMode");e.prototype=Object.assign(new o,{className:"DisallowedEditMode",wi:function(){},Qt:function(){}}),i.t=e},{be:30}],30:[function(t,i,n){function e(t){this.g=t&&t.g,this.Bn=t&&t.Bn,this.A=t&&t.A||250,this.Gi=t&&t.Gi,this.ee=t&&t.ee||new o({name:"editMode"}),this.ee.At("display")}var o=t("../ModeSwitch"),r=t("../colors"),s=new(t("../Logger"))("EditMode");e.prototype={className:"EditMode",V:function(){return{g:this.g,Bn:this.Bn,A:this.A,Gi:this.Gi,ee:this.ee}},wi:function(t){s.info("activating"),this.Qt(),this.ee.Et("display").Et("edit",this.Ae.bind(this)).At("edit",function(){var i=this.g.gn(function(i){return i.id!==t.id}),n=i.reduce(function(t,i){return t[i.id]=i.color,t},{}),e=this.Ce(i,n);this.Gi.he(t);var o={Vi:t,animation:e,Ne:i,_e:n};return s.debug("activated",o),o}.bind(this))},li:function(){s.debug("deactvating"),this.Qt(),this.ee.Et("edit",this.Ae.bind(this)).At("display",function(){s.debug("deactvated")})},ui:function(t){t=Object.assign({Yt:function(){},fi:function(){}},t),this.Qt(),this.ee.Yt({he:function(i){t.Yt(i.Vi)},display:t.fi})},Le:function(t){t.forEach(function(t){this.g.zi(t,r.ei)}.bind(this))},ye:function(t,i){t.forEach(function(t){this.g.zi(t,i[t.id])}.bind(this))},Ae:function(t){s.debug("cleaning up edit mode state",t),t.animation.stop(),this.Gi.display(t.Vi),this.ye(t.Ne,t._e)},Ce:function(t,i){return this.Bn.it(this.Le.bind(this,t),this.ye.bind(this,t,i)).every(this.A).play()},Qt:function(){if(!this.g)throw new Error("adapter is required");if(!this.Bn)throw new Error("animator is required");if(!this.ee)throw new Error("modeSwitch is required")}},i.t=e},{pi:6,le:7,nn:8}],31:[function(t,i,n){function e(){o.apply(this,arguments)}var o=t("./EditMode"),r=new(t("../Logger"))("NonAnimatingEditMode");e.prototype=Object.assign(new o,{className:"NonAnimatingEditMode",Ce:function(){return r.debug("not animating for edit mode"),{stop:function(){}}},Qt:function(){if(!this.g)throw new Error("adapter is required");if(!this.ee)throw new Error("modeSwitch is required")}}),i.t=e},{pi:6,be:30}],32:[function(t,i,n){function e(t){this.o=t&&t.o,this.s=t&&t.s,this.h=t&&t.h}var o=t("../utils"),r=t("../utils/Literal"),s=new(t("../Logger"))("UrlState");NUM_NODES_PARAM="n",COLOR_PARAM_PREFIX="c_",EDGE_PARAM_PREFIX="e_",LABEL_PARAM_PREFIX="l_",LINK_PARAM_PREFIX="li_",e.prototype={className:"UrlState",V:function(){return{o:this.o,s:new r("window.history.replaceState.bind(window.history, {}, '')"),h:new r("new URLSearchParams(window.location.search)")}},Bi:function(t){var i;return(t=t||{}).hasOwnProperty("id")&&null!==t.id&&void 0!==t.id?i=t.id:(i=this.Me(),this.h.set(NUM_NODES_PARAM,i+1)),t.hasOwnProperty("color")&&this.Oe(i,t.color),t.hasOwnProperty("label")&&this.Re(i,t.label),t.hasOwnProperty("link")&&this.Se(i,t.link),this.Pe(),i},xe:function(t){var i=this.Ie(t),n=this.De().find(function(t){return this.ze({Be:i,ke:t})}.bind(this)),e=this.h.get(LABEL_PARAM_PREFIX+t),r=this.h.get(LINK_PARAM_PREFIX+t);return o.Ki({id:t,color:n&&n.replace(COLOR_PARAM_PREFIX,"#"),label:e&&decodeURIComponent(e),link:r&&decodeURIComponent(r)},{Hi:"id"})},ji:function(t,i){var n,e=EDGE_PARAM_PREFIX+t;n=this.h.has(e)?this.Fe(e)|this.Ie(i):this.Ie(i),this.je(e,n),this.Pe()},P:function(){var t=[];if(this.h.has(NUM_NODES_PARAM))for(var i=0;i<this.h.get(NUM_NODES_PARAM);i++)t.push(this.xe(i));return t},D:function(){return this.Ge().map(function(t){for(var i=parseInt(t.replace(EDGE_PARAM_PREFIX,"")),n=[],e=this.Fe(t),o=e.toString(2).length,r=0;r<o;r++){var s=this.Ie(r);(e&s)===s&&n.push({source:i,target:r})}return n}.bind(this)).reduce(function(t,i){return t.concat(i)},[])},Re:function(t,i){i?this.h.set(LABEL_PARAM_PREFIX+t,encodeURIComponent(i)):this.h.delete(LABEL_PARAM_PREFIX+t)},Se:function(t,i){i?this.h.set(LINK_PARAM_PREFIX+t,encodeURIComponent(i)):this.h.delete(LINK_PARAM_PREFIX+t)},qe:function(){return this.o+"?"+this.h.toString()},reset:function(){s.debug("resetting"),this.Te().forEach(function(t){this.h.delete(t)}.bind(this)),this.Pe()},ze:function(t){return t=this.Ue(t),!!this.h.has(t.ke)&&(this.Fe(t.ke)&t.Be)===t.Be},Qe:function(t){t=this.Ue(t);var i;i=this.h.has(t.ke)?this.Fe(t.ke)|t.Be:t.Be,this.je(t.ke,i)},Xe:function(t){if(t=this.Ue(t),!this.h.has(t.ke))throw Error("Attempted to remove color "+t.ke);var i=this.Fe(t.ke)&~t.Be;0===i?this.h.delete(t.ke):this.je(t.ke,i)},Fe:function(t){return parseInt(this.h.get(t),16)},je:function(t,i){this.h.set(t,i.toString(16))},Ie:function(t){return t<=30?1<<t:Math.pow(2,t)},Ue:function(t){if(!t.hasOwnProperty("bit")&&!t.hasOwnProperty("nodeId"))throw Error("bit or nodeId is required");if(!t.hasOwnProperty("color")&&!t.hasOwnProperty("colorKey"))throw Error("color or colorKey is required");return{Be:t.hasOwnProperty("bit")?t.Be:this.Ie(t.Ke),ke:t.hasOwnProperty("colorKey")?t.ke:t.color.replace("#",COLOR_PARAM_PREFIX)}},De:function(){return this.Te(function(t){return t.startsWith(COLOR_PARAM_PREFIX)})},Ge:function(){return this.Te(function(t){return t.startsWith(EDGE_PARAM_PREFIX)})},Te:function(t){t=t||function(){return!0};for(var i=[],n=this.h.keys(),e=n.next();!e.done;)t(e.value)&&i.push(e.value),e=n.next();return i},Me:function(){return this.h.has(NUM_NODES_PARAM)?parseInt(this.h.get(NUM_NODES_PARAM)):0},Oe:function(t,i){var n=this.Ie(t);this.De().forEach(function(t){this.ze({Be:n,ke:t})&&this.Xe({Be:n,ke:t})}.bind(this)),i&&this.Qe({Be:n,color:i})},Pe:function(){this.s(this.qe())}},i.t=e},{pi:6,mi:33,Nn:34}],33:[function(t,i,n){function e(t,i){function n(t){return" ".repeat(i)+t}function s(t){return" ".repeat(i+2)+t}return i=i||0,t instanceof r?t.value:Array.isArray(t)?"[\n"+t.map(function(t){return e(t,i+2)+","}).map(s).join("\n")+"\n"+n("]"):t&&t.className&&t.V?"new "+t.className+"({\n"+Object.keys(t.V()).map(function(n){return n+": "+e(t.V()[n],i+2)+","}).map(s).join("\n")+"\n"+n("})"):t&&"object"==typeof t?"{\n"+Object.keys(t).map(function(n){return n+": "+e(t[n],i+2)+","}).map(s).join("\n")+"\n"+n("}"):t&&"string"==typeof t?"'"+o(t,"'","\\'")+"'":t||0===t?t.toString():"null"}function o(t,i,n){return t.split(i).join(n)}var r=t("./utils/Literal");i.t={Fi:function(t,i){var n=t.x-i.x,e=t.y-i.y;return Math.sqrt(n*n+e*e)},Ki:function(t,i){var n={};return Object.keys(t).forEach(function(i){t[i]&&(n[i]=t[i])}),i&&i.Hi&&(i.Hi.constructor===Array?i.Hi.forEach(function(i){n[i]=t[i]}):n[i.Hi]=t[i.Hi]),n},pt:function(t){return t&&t.touches&&t.touches.length?Object.assign(t,{clientX:t.touches[0].clientX,clientY:t.touches[0].clientY,screenX:t.touches[0].screenX,screenY:t.touches[0].screenY}):t},Si:function(t){return!(!t||"object"!=typeof t||Array.isArray(t))&&1===Object.keys(t).filter(function(i){return!!t[i]}).length},Qi:function(t,i){var n=t.indexOf(i);if(n>=0){for(var e=[],o=n;o<t.length;o++)e.push(t[o]);for(o=0;o<n;o++)e.push(t[o]);return e}return t},We:e,He:o,Di:function(t,i){if(!t[i])throw new Error("missing required property "+i);return t[i]}}},{J:34}],34:[function(t,i,n){i.t=function(t){this.value=t}},{}]},{},[1]);